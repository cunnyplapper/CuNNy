// CuNNy 1x16 NVL
// Copyright (c) 2024 cunnyplapper

// This program is free software; you can redistribute it and/or
// modify it under the terms of the GNU Lesser General Public
// License as published by the Free Software Foundation; either
// version 3.0 of the License, or (at your option) any later version.
// 
// This program is distributed in the hope that it will be useful,
// but WITHOUT ANY WARRANTY; without even the implied warranty of
// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
// Lesser General Public License for more details.
// 
// You should have received a copy of the GNU Lesser General Public
// License along with this program.  If not, see <https://www.gnu.org/licenses/>.
/* ------------------------------------------------------------------- */

//!MAGPIE EFFECT
//!VERSION 3
//!OUTPUT_WIDTH INPUT_WIDTH * 2
//!OUTPUT_HEIGHT INPUT_HEIGHT * 2

//!TEXTURE
Texture2D INPUT;

//!TEXTURE
//!WIDTH INPUT_WIDTH * 2
//!HEIGHT INPUT_HEIGHT * 2
//!FORMAT R16_FLOAT
Texture2D easu;

//!SAMPLER
//!FILTER POINT
SamplerState SP;

//!SAMPLER
//!FILTER LINEAR
SamplerState SL;

//!TEXTURE
//!WIDTH INPUT_WIDTH
//!HEIGHT INPUT_HEIGHT
//!FORMAT R16G16B16A16_FLOAT
Texture2D up_0;

//!TEXTURE
//!WIDTH INPUT_WIDTH
//!HEIGHT INPUT_HEIGHT
//!FORMAT R16G16B16A16_FLOAT
Texture2D up_1;

//!TEXTURE
//!WIDTH INPUT_WIDTH
//!HEIGHT INPUT_HEIGHT
//!FORMAT R16G16B16A16_FLOAT
Texture2D up_2;

//!TEXTURE
//!WIDTH INPUT_WIDTH
//!HEIGHT INPUT_HEIGHT
//!FORMAT R16G16B16A16_FLOAT
Texture2D up_3;

//!TEXTURE
//!WIDTH INPUT_WIDTH
//!HEIGHT INPUT_HEIGHT
//!FORMAT R16G16B16A16_FLOAT
Texture2D conv1_0;

//!TEXTURE
//!WIDTH INPUT_WIDTH
//!HEIGHT INPUT_HEIGHT
//!FORMAT R16G16B16A16_FLOAT
Texture2D conv1_1;

//!TEXTURE
//!WIDTH INPUT_WIDTH
//!HEIGHT INPUT_HEIGHT
//!FORMAT R16G16B16A16_FLOAT
Texture2D conv1_2;

//!TEXTURE
//!WIDTH INPUT_WIDTH
//!HEIGHT INPUT_HEIGHT
//!FORMAT R16G16B16A16_FLOAT
Texture2D conv1_3;

//!TEXTURE
//!WIDTH INPUT_WIDTH
//!HEIGHT INPUT_HEIGHT
//!FORMAT R16G16B16A16_FLOAT
Texture2D down;

// FSR mpv | modified
// Copyright (c) 2021 Advanced Micro Devices, Inc. All rights reserved.
//
// Permission is hereby granted, free of charge, to any person obtaining a copy
// of this software and associated documentation files (the "Software"), to deal
// in the Software without restriction, including without limitation the rights
// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
// copies of the Software, and to permit persons to whom the Software is
// furnished to do so, subject to the following conditions:
//
// The above copyright notice and this permission notice shall be included in
// all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
// THE SOFTWARE.

// FidelityFX FSR v1.0.2 by AMD
// ported to mpv by agyild

//!PASS 1
//!STYLE PS
//!IN INPUT
//!OUT easu

float GetLuma(float3 rgb) {
	return dot(float3(0.299, 0.587, 0.114), rgb);
}

float APrxLoRcpF1(float a) {
	return asfloat(uint(0x7ef07ebb) - asuint(a));
}

float APrxLoRsqF1(float a) {
	return asfloat(uint(0x5f347d74) - (asuint(a) >> uint(1)));
}

float AMin3F1(float x, float y, float z) {

	return min(x, min(y, z));
}

float AMax3F1(float x, float y, float z) {
	return max(x, max(y, z));
}

void tap(inout float aC, inout float aW, float2 off, float2 dir, float2 len,
         float lob, float clp, float c){
	float2 v;
	v.x = (off.x * ( dir.x)) + (off.y * dir.y);
	v.y = (off.x * (-dir.y)) + (off.y * dir.x);
	v *= len;
	float d2 = v.x * v.x + v.y * v.y;
	d2 = min(d2, clp);
	float wB = float(2.0 / 5.0) * d2 + -1.0;

	float wA = lob * d2 + -1.0;
	wB *= wB;
	wA *= wA;
	wB = float(25.0 / 16.0) * wB + float(-(25.0 / 16.0 - 1.0));
	float w = wB * wA;
	aC += c * w;
	aW += w;
}

void set(inout float2 dir, inout float len, float2 pp, bool biS, bool biT,
         bool biU, bool biV, float lA, float lB, float lC, float lD, float lE){

	float w = 0.0;
	if (biS)
		w = (1.0 - pp.x) * (1.0 - pp.y);
	if (biT)
		w =        pp.x  * (1.0 - pp.y);
	if (biU)
		w = (1.0 - pp.x) *        pp.y;

	if (biV)
		w =        pp.x  *        pp.y;
	float dc = lD - lC;
	float cb = lC - lB;
	float lenX = max(abs(dc), abs(cb));
	lenX = APrxLoRcpF1(lenX);
	float dirX = lD - lB;
	lenX = clamp(abs(dirX) * lenX, 0.0, 1.0);
	lenX *= lenX;
	float ec = lE - lC;

	float ca = lC - lA;
	float lenY = max(abs(ec), abs(ca));
	lenY = APrxLoRcpF1(lenY);
	float dirY = lE - lA;
	lenY = clamp(abs(dirY) * lenY, 0.0, 1.0);
	lenY *= lenY;
	dir += float2(dirX, dirY) * w;
	len += dot(float2(w, w), float2(lenX, lenY));
}

float4 Pass1(float2 pos) {
	float2 pt = float2(GetInputPt());
	float2 size = float2(GetInputSize());
	float4 pix = float4(0.0, 0.0, 0.0, 1.0);
	float2 pp = pos * size - float2(0.5, 0.5);
	float2 fp = floor(pp);
	pp -= fp;
	float b = GetLuma(INPUT.SampleLevel(SP, float2((fp + float2(0.5, -0.5)) * pt), 0).rgb);
	float c = GetLuma(INPUT.SampleLevel(SP, float2((fp + float2(1.5, -0.5)) * pt), 0).rgb);
	float e = GetLuma(INPUT.SampleLevel(SP, float2((fp + float2(-0.5, 0.5)) * pt), 0).rgb);
	float f = GetLuma(INPUT.SampleLevel(SP, float2((fp + float2( 0.5, 0.5)) * pt), 0).rgb);
	float g = GetLuma(INPUT.SampleLevel(SP, float2((fp + float2( 1.5, 0.5)) * pt), 0).rgb);
	float h = GetLuma(INPUT.SampleLevel(SP, float2((fp + float2( 2.5, 0.5)) * pt), 0).rgb);
	float i = GetLuma(INPUT.SampleLevel(SP, float2((fp + float2(-0.5, 1.5)) * pt), 0).rgb);
	float j = GetLuma(INPUT.SampleLevel(SP, float2((fp + float2( 0.5, 1.5)) * pt), 0).rgb);
	float k = GetLuma(INPUT.SampleLevel(SP, float2((fp + float2( 1.5, 1.5)) * pt), 0).rgb);
	float l = GetLuma(INPUT.SampleLevel(SP, float2((fp + float2( 2.5, 1.5)) * pt), 0).rgb);
	float n = GetLuma(INPUT.SampleLevel(SP, float2((fp + float2(0.5, 2.5) ) * pt), 0).rgb);
	float o = GetLuma(INPUT.SampleLevel(SP, float2((fp + float2(1.5, 2.5) ) * pt), 0).rgb);
	float4 bczzL = float4(b, c, 0.0, 0.0);
	float4 ijfeL = float4(i, j, f, e);
	float4 klhgL = float4(k, l, h, g);
	float4 zzonL = float4(0.0, 0.0, o, n);
	float bL = bczzL.x;
	float cL = bczzL.y;
	float iL = ijfeL.x;
	float jL = ijfeL.y;
	float fL = ijfeL.z;
	float eL = ijfeL.w;
	float kL = klhgL.x;
	float lL = klhgL.y;
	float hL = klhgL.z;
	float gL = klhgL.w;
	float oL = zzonL.z;
	float nL = zzonL.w;
	float2 dir = float2(0.0, 0.0);
	float len = 0.0;
	set(dir, len, pp, true, false, false, false, bL, eL, fL, gL, jL);
	set(dir, len, pp, false, true, false, false, cL, fL, gL, hL, kL);
	set(dir, len, pp, false, false, true, false, fL, iL, jL, kL, nL);
	set(dir, len, pp, false, false, false, true, gL, jL, kL, lL, oL);
	float2 dir2 = dir * dir;
	float dirR = dir2.x + dir2.y;
	bool zro = dirR < float(1.0 / 32768.0);
	dirR = APrxLoRsqF1(dirR);
	dirR = zro ? 1.0 : dirR;
	dir.x = zro ? 1.0 : dir.x;
	dir *= float2(dirR, dirR);
	len = len * 0.5;
	len *= len;
	float stretch = (dir.x * dir.x + dir.y * dir.y) * APrxLoRcpF1(max(abs(dir.x), abs(dir.y)));
	float2 len2 = float2(1.0 + (stretch - 1.0) * len, 1.0 + -0.5 * len);
	float lob = 0.5 + float((1.0 / 4.0 - 0.04) - 0.5) * len;
	float clp = APrxLoRcpF1(lob);
	float aC = 0.0;
	float aW = 0.0;
	tap(aC, aW, float2( 0.0,-1.0) - pp, dir, len2, lob, clp, bL);
	tap(aC, aW, float2( 1.0,-1.0) - pp, dir, len2, lob, clp, cL);
	tap(aC, aW, float2(-1.0, 1.0) - pp, dir, len2, lob, clp, iL);
	tap(aC, aW, float2( 0.0, 1.0) - pp, dir, len2, lob, clp, jL);
	tap(aC, aW, float2( 0.0, 0.0) - pp, dir, len2, lob, clp, fL);
	tap(aC, aW, float2(-1.0, 0.0) - pp, dir, len2, lob, clp, eL);
	tap(aC, aW, float2( 1.0, 1.0) - pp, dir, len2, lob, clp, kL);
	tap(aC, aW, float2( 2.0, 1.0) - pp, dir, len2, lob, clp, lL);
	tap(aC, aW, float2( 2.0, 0.0) - pp, dir, len2, lob, clp, hL);
	tap(aC, aW, float2( 1.0, 0.0) - pp, dir, len2, lob, clp, gL);
	tap(aC, aW, float2( 1.0, 2.0) - pp, dir, len2, lob, clp, oL);
	tap(aC, aW, float2( 0.0, 2.0) - pp, dir, len2, lob, clp, nL);
	pix.r = aC / aW;
	float min1 = min(AMin3F1(fL, gL, jL), kL);
	float max1 = max(AMax3F1(fL, gL, jL), kL);
	pix.r = clamp(pix.r, min1, max1);
	pix.r = clamp(pix.r, 0.0, 1.0);
	return pix;
}

//!PASS 2
//!DESC CuNNy-1x16-NVL-up
//!BLOCK_SIZE 8
//!NUM_THREADS 64
//!IN INPUT
//!OUT up_0, up_1, up_2, up_3
#define O(t, p) t.SampleLevel(SP, pos + p * pt, 0)
#define l0(x, y) dot(float3(0.299, 0.587, 0.114), O(INPUT, float2(x, y)).rgb)
float4 f0(float2 pt, float2 pos, float s0_0, float s0_1, float s0_2, float s0_3, float s0_4, float s0_5, float s0_6, float s0_7, float s0_8) {
	float4 r = 0.0;
	r += float4(0.06156063452363014, 0.028457624837756157, -0.001630169339478016, 0.2607422471046448) * s0_0;
	r += float4(0.448209673166275, 0.01013316959142685, 0.0016871902626007795, -0.18800334632396698) * s0_1;
	r += float4(0.029486825689673424, 0.22492000460624695, 7.989531877683476e-05, -0.08090222626924515) * s0_2;
	r += float4(-0.13134776055812836, -0.02366541512310505, 0.4002895653247833, 0.2838805615901947) * s0_3;
	r += float4(-0.2829356789588928, -0.22509588301181793, -0.39355456829071045, -0.15718410909175873) * s0_4;
	r += float4(-0.08991008251905441, -0.2978512942790985, -0.007369149476289749, -0.09789802134037018) * s0_5;
	r += float4(-0.015116523951292038, -0.012132378295063972, -2.618452526803594e-05, -0.01039338018745184) * s0_6;
	r += float4(-0.02124478481709957, 0.30755025148391724, -0.0023204670287668705, -0.030461952090263367) * s0_7;
	r += float4(0.007190532982349396, -0.013620821759104729, 0.00317642861045897, 0.027221515774726868) * s0_8;
	r += float4(0.006850624922662973, 0.00031352663063444197, -0.0007158210501074791, -0.0004806598590221256);
	return max(r, 0.0);
}
float4 f1(float2 pt, float2 pos, float s0_0, float s0_1, float s0_2, float s0_3, float s0_4, float s0_5, float s0_6, float s0_7, float s0_8) {
	float4 r = 0.0;
	r += float4(0.04528126120567322, 0.017952419817447662, -0.08397593349218369, -0.07800295203924179) * s0_0;
	r += float4(0.06676214933395386, 0.22901132702827454, 0.009253029711544514, -0.0037468892987817526) * s0_1;
	r += float4(-0.06420886516571045, 0.024414727464318275, 0.05978021025657654, -0.07202684134244919) * s0_2;
	r += float4(0.0310518778860569, 0.03731469064950943, -0.1303534060716629, -0.009347768500447273) * s0_3;
	r += float4(-0.3583754897117615, -0.5455097556114197, -0.29927244782447815, -0.05495814234018326) * s0_4;
	r += float4(-0.039029810577631, 0.015524555929005146, 0.01578720659017563, -0.012573087587952614) * s0_5;
	r += float4(-0.06367597728967667, -0.009492018260061741, 0.22132138907909393, 0.006409543566405773) * s0_6;
	r += float4(0.07736202329397202, 0.10127100348472595, 0.2724609076976776, -0.021499009802937508) * s0_7;
	r += float4(0.29464995861053467, 0.012175599113106728, -0.0680360272526741, -0.030891163274645805) * s0_8;
	r += float4(-0.006742898840457201, 0.007263643201440573, 0.003254176350310445, -0.005282798781991005);
	return max(r, 0.0);
}
float4 f2(float2 pt, float2 pos, float s0_0, float s0_1, float s0_2, float s0_3, float s0_4, float s0_5, float s0_6, float s0_7, float s0_8) {
	float4 r = 0.0;
	r += float4(0.0011984561569988728, 0.05170051008462906, -0.19286984205245972, 0.12656375765800476) * s0_0;
	r += float4(0.4294593930244446, 0.13232135772705078, 0.1420884132385254, -0.00199217745102942) * s0_1;
	r += float4(-0.0077005368657410145, 0.026285238564014435, 0.1888204663991928, -0.0756232887506485) * s0_2;
	r += float4(-0.006865440867841244, 0.09118501096963882, -0.08290392905473709, -0.01783125102519989) * s0_3;
	r += float4(-0.41894522309303284, -0.33388471603393555, -0.1752961426973343, -0.4235048294067383) * s0_4;
	r += float4(0.008208970539271832, 0.1290075182914734, 0.16044564545154572, -0.03951384499669075) * s0_5;
	r += float4(0.004279716871678829, 0.13304215669631958, 0.1577148139476776, -0.025540165603160858) * s0_6;
	r += float4(-0.012725870124995708, -0.3603505492210388, -0.0421118326485157, 0.26834338903427124) * s0_7;
	r += float4(0.0025355604011565447, 0.13165584206581116, -0.1542069911956787, 0.18244551122188568) * s0_8;
	r += float4(-0.0003624315722845495, -0.0020495483186095953, -0.0031471806578338146, 0.01040359865874052);
	return max(r, 0.0);
}
float4 f3(float2 pt, float2 pos, float s0_0, float s0_1, float s0_2, float s0_3, float s0_4, float s0_5, float s0_6, float s0_7, float s0_8) {
	float4 r = 0.0;
	r += float4(-0.22904519736766815, 0.0042509459890425205, 0.009806566871702671, 0.044541940093040466) * s0_0;
	r += float4(-0.05364612489938736, -0.40164950489997864, 0.014370080083608627, -0.07745619118213654) * s0_1;
	r += float4(0.20556671917438507, 0.3974606990814209, -0.012875236570835114, 0.0042512184008955956) * s0_2;
	r += float4(-0.09203803539276123, -0.004751879721879959, 0.43015560507774353, 0.08881393074989319) * s0_3;
	r += float4(0.31364211440086365, -0.009994549676775932, -0.4794268310070038, 0.10157670825719833) * s0_4;
	r += float4(-0.058055274188518524, 0.017158303409814835, 0.04174976795911789, 0.07513533532619476) * s0_5;
	r += float4(0.14242063462734222, 0.0030372277833521366, 0.054077133536338806, -0.08082392066717148) * s0_6;
	r += float4(-0.07272163033485413, 0.013817635364830494, -0.06600576639175415, -0.3876953721046448) * s0_7;
	r += float4(-0.15514200925827026, -0.016425490379333496, 0.004317344166338444, 0.24022941291332245) * s0_8;
	r += float4(0.0011088172905147076, -0.0007633368368260562, -0.016873197630047798, 0.003867898602038622);
	return max(r, 0.0);
}
void Pass2(uint2 blockStart, uint3 tid) {
	float2 pt = float2(GetInputPt());
	uint2 gxy = Rmp8x8(tid.x) + blockStart;
	uint2 size = GetInputSize();
	if (gxy.x >= size.x || gxy.y >= size.y) {
		return;
	}
	float2 pos = (gxy + 0.5) * pt;
	float s0_0 = l0(-1.0, -1.0);
	float s0_1 = l0(0.0, -1.0);
	float s0_2 = l0(1.0, -1.0);
	float s0_3 = l0(-1.0, 0.0);
	float s0_4 = l0(0.0, 0.0);
	float s0_5 = l0(1.0, 0.0);
	float s0_6 = l0(-1.0, 1.0);
	float s0_7 = l0(0.0, 1.0);
	float s0_8 = l0(1.0, 1.0);
	up_0[gxy] = f0(pt, pos, s0_0, s0_1, s0_2, s0_3, s0_4, s0_5, s0_6, s0_7, s0_8);
	up_1[gxy] = f1(pt, pos, s0_0, s0_1, s0_2, s0_3, s0_4, s0_5, s0_6, s0_7, s0_8);
	up_2[gxy] = f2(pt, pos, s0_0, s0_1, s0_2, s0_3, s0_4, s0_5, s0_6, s0_7, s0_8);
	up_3[gxy] = f3(pt, pos, s0_0, s0_1, s0_2, s0_3, s0_4, s0_5, s0_6, s0_7, s0_8);
}
//!PASS 3
//!DESC CuNNy-1x16-NVL-conv1
//!BLOCK_SIZE 8
//!NUM_THREADS 64
//!IN up_0, up_1, up_2, up_3
//!OUT conv1_0, conv1_1, conv1_2, conv1_3
#define O(t, p) t.SampleLevel(SP, pos + p * pt, 0)
#define l0(x, y) O(up_0, float2(x, y))
#define l1(x, y) O(up_1, float2(x, y))
#define l2(x, y) O(up_2, float2(x, y))
#define l3(x, y) O(up_3, float2(x, y))
float4 f0(float2 pt, float2 pos, float4 s0_0, float4 s0_1, float4 s0_2, float4 s0_3, float4 s0_4, float4 s0_5, float4 s0_6, float4 s0_7, float4 s0_8, float4 s1_0, float4 s1_1, float4 s1_2, float4 s1_3, float4 s1_4, float4 s1_5, float4 s1_6, float4 s1_7, float4 s1_8, float4 s2_0, float4 s2_1, float4 s2_2, float4 s2_3, float4 s2_4, float4 s2_5, float4 s2_6, float4 s2_7, float4 s2_8, float4 s3_0, float4 s3_1, float4 s3_2, float4 s3_3, float4 s3_4, float4 s3_5, float4 s3_6, float4 s3_7, float4 s3_8) {
	float4 r = 0.0;
	r += mul(s0_0, float4x4(0.03575693815946579, 0.06261899322271347, 0.1641029417514801, 0.11731065064668655, 0.060013189911842346, 0.14725938439369202, -0.11627785116434097, 0.014702480286359787, 0.04442722722887993, 0.34634852409362793, -0.029755694791674614, -0.45800793170928955, -0.016675837337970734, 0.010581002570688725, -0.03322237357497215, -0.005879971198737621));
	r += mul(s0_1, float4x4(0.10774434357881546, -0.18487666547298431, -0.21457473933696747, 0.04163273051381111, -0.26263806223869324, -0.13999514281749725, 0.005078998859971762, 0.1019461378455162, -0.11541698127985, 0.2782396376132965, 0.48006680607795715, -0.23992671072483063, 0.049199290573596954, 0.060760267078876495, -0.046823129057884216, 0.044989097863435745));
	r += mul(s0_2, float4x4(-0.036148034036159515, 0.32918232679367065, -0.01478985883295536, 0.02950562909245491, 0.006642216816544533, -0.03567027673125267, 0.08371085673570633, 0.013350248336791992, -0.40145766735076904, 0.10489191859960556, 0.19246672093868256, -0.07486281543970108, 0.011688964441418648, -0.17101672291755676, -0.059451695531606674, 0.017706193029880524));
	r += mul(s0_3, float4x4(-0.11941424012184143, -0.15258310735225677, 0.20689688622951508, -0.11657078564167023, 0.1528695970773697, 0.23115506768226624, -0.2173224836587906, 0.13408778607845306, 0.3465600609779358, 0.3058210015296936, -0.5486605167388916, -1.7370647192001343, -0.26702505350112915, -0.20462380349636078, -0.027979936450719833, 0.07322735339403152));
	r += mul(s0_4, float4x4(0.0029492981266230345, -0.05823126807808876, -0.2998957931995392, 0.0068322173319756985, 0.1529984176158905, 0.16378629207611084, 0.03866187483072281, 0.18067729473114014, 0.9669555425643921, 0.6676717400550842, 0.31586259603500366, 1.308984637260437, -0.04454151913523674, -0.5077816247940063, 0.015618032775819302, -0.10941734164953232));
	r += mul(s0_5, float4x4(0.4175091087818146, 0.039428967982530594, -0.1893274039030075, 0.028175977990031242, -0.005370781756937504, -0.013631683774292469, 0.03359939903020859, 0.029179617762565613, -0.7721794247627258, 0.15261709690093994, -0.09134576469659805, 0.11610957980155945, 0.0232066810131073, -0.001734002958983183, -0.046860188245773315, -0.013734696432948112));
	r += mul(s0_6, float4x4(-0.1024550199508667, 0.001150078373029828, 0.11890381574630737, -0.19507619738578796, 0.12418349832296371, -0.006987502798438072, -0.19247698783874512, -0.024278970435261726, 0.22607393562793732, -0.018892154097557068, 0.22337083518505096, -0.2582886815071106, -0.15486553311347961, -0.014758226461708546, 0.10817653685808182, 0.14590907096862793));
	r += mul(s0_7, float4x4(-0.4246807098388672, -0.09005887806415558, -0.32378631830215454, -0.1490860879421234, 0.23087169229984283, 0.012691263109445572, 0.036070771515369415, 0.0654984712600708, 0.4657662510871887, -0.054309554398059845, -1.0106852054595947, 0.0972236767411232, -0.25465166568756104, 0.0702861025929451, 0.08628526329994202, -0.1915408819913864));
	r += mul(s0_8, float4x4(-0.08052641898393631, 0.04130095988512039, -0.5528215169906616, -0.05922911688685417, -0.023788688704371452, -0.010924194008111954, 0.3738877475261688, 0.007254293188452721, 0.24927973747253418, -0.0877709910273552, 0.537121593952179, 0.13245831429958344, -0.21993578970432281, -0.010107545182108879, -0.19283154606819153, -0.0534476600587368));
	r += mul(s1_0, float4x4(0.046796396374702454, 0.3485874533653259, -0.17295345664024353, 0.0922161117196083, -0.10822819918394089, -0.2667783200740814, 0.22009548544883728, 0.07173650711774826, 0.017165526747703552, -0.011341105215251446, -0.011919106356799603, -0.06256891787052155, 0.038278382271528244, -0.07111227512359619, -0.04925311356782913, -0.03734764829277992));
	r += mul(s1_1, float4x4(-0.5396105051040649, 0.08108193427324295, -0.2841394245624542, -0.07964738458395004, 0.46340855956077576, -0.9734682440757751, -0.11175613105297089, -0.08016052842140198, -0.3633897006511688, -0.09265775978565216, 0.23646432161331177, 0.23244936764240265, -0.11529795080423355, 0.043945055454969406, -0.017803793773055077, -0.06228533387184143));
	r += mul(s1_2, float4x4(0.1176460012793541, -0.023921992629766464, 0.23768016695976257, 0.003419652348384261, 0.1966298222541809, 0.4643045663833618, 0.09950541704893112, 0.07803208380937576, -0.03336412459611893, 0.2624691426753998, -0.3109878897666931, 0.06855691224336624, -0.012353131547570229, 0.06232543662190437, -0.03874725475907326, 0.08756829053163528));
	r += mul(s1_3, float4x4(0.20852895081043243, -0.16965101659297943, -0.24440933763980865, 0.6158980131149292, -0.16767866909503937, -0.037548601627349854, -0.17187632620334625, -0.8033499121665955, -0.17899978160858154, -0.04011671990156174, -0.16067926585674286, -0.10635307431221008, 0.03826040029525757, -0.0526578463613987, -0.05256062000989914, 0.008912602439522743));
	r += mul(s1_4, float4x4(0.04125889390707016, 0.044958505779504776, 0.5543582439422607, -0.1203814223408699, -0.20381109416484833, -0.16163504123687744, -0.3070584237575531, -0.29547548294067383, 0.15391570329666138, -0.10640228539705276, 0.44000330567359924, -0.17928332090377808, -0.05755847692489624, -0.05950462073087692, 0.042405884712934494, 0.06149774789810181));
	r += mul(s1_5, float4x4(0.026622265577316284, -0.07149377465248108, -0.7235636115074158, -0.05060814693570137, 0.37481260299682617, 0.12584421038627625, -0.1895773559808731, 0.04198581725358963, 0.23449765145778656, 0.005901211407035589, -0.35718390345573425, -0.10892676562070847, -0.058756377547979355, -0.05739881470799446, 0.02909781225025654, -0.007444688118994236));
	r += mul(s1_6, float4x4(0.0015470316866412759, -0.06958680599927902, -0.34462082386016846, 0.07677856087684631, -0.045937951654195786, -0.02314911037683487, 0.11560115963220596, -0.02244093082845211, 0.037414561957120895, -0.0069460179656744, -0.1139528900384903, 0.07796210795640945, -0.04463028162717819, 0.06541725993156433, -0.07668375968933105, -0.0031167869456112385));
	r += mul(s1_7, float4x4(0.04243607446551323, 0.01915997639298439, 0.18768559396266937, 0.17046380043029785, -0.24729996919631958, 0.05964476987719536, 0.2435237467288971, -0.11359827220439911, -0.13719597458839417, 0.0204000361263752, 0.2694324851036072, -0.03205575793981552, -0.05322260782122612, -0.10822933167219162, -0.03008672408759594, -0.027433447539806366));
	r += mul(s1_8, float4x4(0.06585244834423065, -0.06475204229354858, -0.1920645833015442, 0.08714901655912399, 0.13556376099586487, 0.06056235730648041, -0.20265953242778778, 0.036763325333595276, 0.06139512360095978, 0.02393767237663269, 0.18266841769218445, 0.023004304617643356, 0.0032694668043404818, -0.04907207936048508, 0.030697567388415337, -0.056344322860240936));
	r += mul(s2_0, float4x4(0.07241670787334442, 0.040412355214357376, -0.1601244956254959, -0.16610538959503174, -0.15065163373947144, 0.07611840963363647, -0.07399843633174896, -0.08273229002952576, -0.10180938988924026, 0.023552801460027695, -0.029785530641674995, 0.1090451329946518, 0.04500633105635643, -0.1276826113462448, -0.09663088619709015, -0.04701028764247894));
	r += mul(s2_1, float4x4(-0.3876212239265442, -0.5723652839660645, 0.2989791929721832, -0.05985097959637642, 0.11333887279033661, 0.028434643521904945, 0.1369919627904892, 0.01800035685300827, 0.08114359527826309, -0.07048709690570831, -0.10342881828546524, -0.008420540951192379, -0.1480233073234558, -0.24198468029499054, 0.21991878747940063, 0.015341738238930702));
	r += mul(s2_2, float4x4(-0.09619316458702087, -0.6421626210212708, -0.07335492223501205, -0.13556616008281708, 0.1927804946899414, 0.07147950679063797, -0.2886108160018921, 0.03260161727666855, -0.014739342033863068, 0.1263631284236908, 0.20848533511161804, -0.008100596256554127, 0.0661056786775589, 0.12898273766040802, -0.20859581232070923, 0.014697575941681862));
	r += mul(s2_3, float4x4(0.1407916396856308, 0.38320353627204895, -0.1331520676612854, -0.574834406375885, 0.0357661135494709, -0.07241908460855484, 0.16550429165363312, 0.016564931720495224, 0.024513201788067818, -0.06310024112462997, 0.05919842794537544, 0.09054969996213913, -0.05480775609612465, -0.03613905981183052, 0.10780002921819687, -0.1564365178346634));
	r += mul(s2_4, float4x4(0.05608348920941353, 0.986331582069397, 0.2545014023780823, 0.13469938933849335, -0.03364080935716629, -0.25678136944770813, 0.2595464587211609, -0.14054900407791138, 0.2682831287384033, -0.10203910619020462, -0.06478466838598251, -0.12529011070728302, 0.05645759403705597, -0.016905996948480606, -0.3688819110393524, 0.014686981216073036));
	r += mul(s2_5, float4x4(-0.8944445848464966, -0.5097668766975403, 0.06415355205535889, -0.1900809407234192, -0.009084805846214294, -0.08716634660959244, -0.19812843203544617, -0.009898165240883827, 0.030948037281632423, 0.05821242928504944, 0.06445222347974777, -0.030764028429985046, -0.0043702507391572, 0.08315768837928772, 0.09942879527807236, 0.10319312661886215));
	r += mul(s2_6, float4x4(0.47751298546791077, 0.04154789075255394, -0.4671212434768677, 0.7261550426483154, -0.11594878882169724, -0.009715554304420948, 0.11691675335168839, -0.12378495186567307, 0.0686076283454895, -0.09741215407848358, 0.4507983326911926, 0.025670250877738, -0.17259903252124786, 0.03851916268467903, 0.07416915148496628, 0.0028308620676398277));
	r += mul(s2_7, float4x4(0.8425375819206238, 0.12643122673034668, -0.1290254443883896, 0.37159520387649536, -0.27502912282943726, -0.024520792067050934, 0.17204293608665466, -0.12387263029813766, -0.10011352598667145, -0.06135723367333412, 0.12354104220867157, -0.105683334171772, -0.10018055886030197, -0.06748522073030472, -0.6093849539756775, -0.18283386528491974));
	r += mul(s2_8, float4x4(-0.34853532910346985, -0.114342100918293, 0.2997284233570099, 0.03029419109225273, -0.09981033205986023, 0.011293286457657814, 0.037497252225875854, 0.029349464923143387, 0.012944486923515797, -0.023539282381534576, 0.22855165600776672, -0.024653950706124306, -0.07295744121074677, 0.07554138451814651, -0.04810420796275139, -0.10916034132242203));
	r += mul(s3_0, float4x4(0.013554073870182037, -0.005632201209664345, -0.021644650027155876, -0.03316139057278633, -0.026699533686041832, -0.1269514411687851, 0.2705073356628418, -0.058717031031847, 0.13285478949546814, -0.14009498059749603, 0.05072224140167236, 0.30700722336769104, -0.05221178010106087, -0.031218482181429863, -0.12388592958450317, -0.11053254455327988));
	r += mul(s3_1, float4x4(0.10718332976102829, 0.10082870721817017, -0.2869003713130951, 0.008995900861918926, 0.002437198767438531, -0.0979587584733963, 0.01978405751287937, -0.047049567103385925, 0.13539661467075348, 0.13423357903957367, -0.41514405608177185, -0.03696809336543083, 0.08566419780254364, -0.13207300007343292, -0.03966875001788139, -0.10590643435716629));
	r += mul(s3_2, float4x4(0.005820916499942541, -0.06419237703084946, 0.07491132616996765, -0.009187844581902027, -0.04768253117799759, -0.11178428679704666, -0.0727679505944252, -0.016586938872933388, -0.04214764013886452, -0.16179917752742767, -0.03849683701992035, -0.0053024147637188435, -0.16022850573062897, 0.1280823051929474, -0.04139477759599686, 0.03144438564777374));
	r += mul(s3_3, float4x4(0.06288562715053558, 0.05020291730761528, -0.0669756680727005, -0.15262927114963531, 0.0519612617790699, 0.5756534337997437, 0.10263588279485703, 0.23105674982070923, -0.0415801964700222, -0.1163962185382843, 0.4063320755958557, 0.103692926466465, 0.07772185653448105, 0.08506833761930466, -0.09095174819231033, 0.03929610922932625));
	r += mul(s3_4, float4x4(-0.3173828423023224, 0.12496345490217209, -0.19835704565048218, 0.08038702607154846, -0.20205058157444, -1.0279983282089233, 0.179495170712471, 0.22802434861660004, -0.04004614055156708, -0.1076943576335907, -0.2699083089828491, 0.03234679624438286, -0.18602806329727173, -0.012188206426799297, -0.39380353689193726, 0.07985924184322357));
	r += mul(s3_5, float4x4(0.0702017992734909, -0.0004169871681369841, -0.13965784013271332, 0.0103757344186306, -0.07882580906152725, -0.058470141142606735, 0.20216436684131622, 0.00948090199381113, -0.28327637910842896, 0.1479927897453308, 0.2557934522628784, -0.04275329038500786, 0.059388168156147, 0.05771825090050697, 0.34353330731391907, -0.03890082240104675));
	r += mul(s3_6, float4x4(-0.0029189276974648237, 0.06105620786547661, -0.4171707034111023, 0.03199945017695427, 0.06760149449110031, 0.09185229241847992, 0.14060959219932556, -0.291993111371994, -0.07094302028417587, 0.05603691190481186, -0.2977588176727295, 0.1628127098083496, 0.05421346053481102, 0.015203982591629028, 0.013701574876904488, 0.036048583686351776));
	r += mul(s3_7, float4x4(0.18283458054065704, 0.07776153087615967, -0.17783930897712708, 0.07832064479589462, 0.29744741320610046, -1.858831092249602e-05, -0.002134518465027213, 0.2250230610370636, -0.10818833112716675, -0.041052017360925674, 0.701305627822876, 0.10619752109050751, 0.08419212698936462, -0.003815585281699896, -0.1205965057015419, 0.028846224769949913));
	r += mul(s3_8, float4x4(-0.02305407077074051, 1.0792084140121005e-05, -0.7707881927490234, 0.045917410403490067, -0.16472649574279785, -0.10228899866342545, -0.027057379484176636, 0.0032192340586334467, 0.01329516526311636, 0.08816774189472198, -0.18411168456077576, -0.1200166717171669, 0.038164205849170685, -0.02024678885936737, 0.15141156315803528, -0.016150306910276413));
	r += float4(-0.0001834497379604727, -0.006881401874125004, -0.0024224447552114725, -0.001000422053039074);
	return max(r, 0.0);
}
float4 f1(float2 pt, float2 pos, float4 s0_0, float4 s0_1, float4 s0_2, float4 s0_3, float4 s0_4, float4 s0_5, float4 s0_6, float4 s0_7, float4 s0_8, float4 s1_0, float4 s1_1, float4 s1_2, float4 s1_3, float4 s1_4, float4 s1_5, float4 s1_6, float4 s1_7, float4 s1_8, float4 s2_0, float4 s2_1, float4 s2_2, float4 s2_3, float4 s2_4, float4 s2_5, float4 s2_6, float4 s2_7, float4 s2_8, float4 s3_0, float4 s3_1, float4 s3_2, float4 s3_3, float4 s3_4, float4 s3_5, float4 s3_6, float4 s3_7, float4 s3_8) {
	float4 r = 0.0;
	r += mul(s0_0, float4x4(0.08218873292207718, -0.05403854325413704, 0.10087468475103378, 0.35632646083831787, 0.15266551077365875, 0.07225343585014343, -0.032323207706213, -0.32201093435287476, -0.14833147823810577, -0.16651080548763275, -0.3352723717689514, -0.31294727325439453, 0.1616080403327942, 0.0310833677649498, -0.08683124929666519, 0.03213905915617943));
	r += mul(s0_1, float4x4(0.07298513501882553, 0.30374738574028015, 0.11408118903636932, 0.22532978653907776, 0.560565173625946, -0.017576735466718674, -0.21957933902740479, -0.019392168149352074, -1.0429679155349731, -0.6895979642868042, 0.16049936413764954, -0.05657437443733215, 0.19735541939735413, -0.04155595600605011, 0.02672186866402626, 0.12975846230983734));
	r += mul(s0_2, float4x4(-0.060101330280303955, 0.05113890767097473, -0.13258570432662964, -0.38587620854377747, 0.048291321843862534, 0.19090087711811066, 0.025602107867598534, 0.01731787621974945, -0.3835775852203369, 0.5205573439598083, 0.16107888519763947, 0.3186957836151123, 0.19877362251281738, 0.050367724150419235, -0.17127563059329987, -0.05986776202917099));
	r += mul(s0_3, float4x4(-0.07689031958580017, 0.12711048126220703, -0.03467516228556633, -0.12905454635620117, -0.1760747730731964, -0.4968293607234955, 0.35513773560523987, 0.40655800700187683, 0.43292227387428284, -0.21859900653362274, -1.0704524517059326, -0.895153820514679, -0.6057981252670288, 0.07704907655715942, 0.1632337123155594, 0.430215448141098));
	r += mul(s0_4, float4x4(-0.049769483506679535, -0.1184665709733963, -0.3406107723712921, -0.16041874885559082, -0.7275660634040833, -0.3014731705188751, -0.5875318050384521, -0.08714434504508972, 0.6540310978889465, -0.1432162970304489, 0.12961991131305695, 0.3967478275299072, -0.6699406504631042, 0.49708497524261475, -0.20086845755577087, -0.042276326566934586));
	r += mul(s0_5, float4x4(0.37761572003364563, -0.3212150037288666, -0.20163634419441223, -0.33269473910331726, 0.02737501449882984, 0.10705471783876419, 0.054608143866062164, 0.028169354423880577, 0.6364403963088989, 0.22939366102218628, 0.1242489218711853, -0.047726716846227646, -0.3818483054637909, -0.17528417706489563, -0.14971183240413666, -0.16227973997592926));
	r += mul(s0_6, float4x4(-0.26074519753456116, -0.0847800225019455, -0.0950072705745697, -0.3686124384403229, 0.20746628940105438, 0.02056524157524109, 0.1114136204123497, 0.14846985042095184, -0.12796156108379364, 0.3873099684715271, -0.23663093149662018, -0.4288509488105774, 0.3385336101055145, -0.089328333735466, -0.17568644881248474, -0.05336557701230049));
	r += mul(s0_7, float4x4(-0.517971396446228, -0.034538619220256805, -0.36341047286987305, -0.7209267616271973, 0.07444234192371368, 0.1064925566315651, 0.1915469467639923, 0.25103703141212463, -1.1877830028533936, 0.3824915289878845, 0.15215474367141724, 0.4419747591018677, -0.05823276937007904, -0.4897884428501129, -0.071004219353199, -0.12029732018709183));
	r += mul(s0_8, float4x4(-0.3467112183570862, 0.0634409710764885, 0.16915950179100037, 0.4186411201953888, 0.19187870621681213, -0.12372695654630661, -0.05352183058857918, -0.04281316697597504, -0.4461873173713684, 0.2625458836555481, 0.2830332815647125, 0.1160731166601181, -0.08161229640245438, -0.23471245169639587, 0.017036084085702896, 0.17991431057453156));
	r += mul(s1_0, float4x4(-0.11317671090364456, -0.02655649557709694, 0.3268105089664459, 0.4311148524284363, -0.10532920062541962, -0.20865893363952637, -0.006857668049633503, -0.06911174952983856, 0.09696537256240845, -0.026071840897202492, 0.08857521414756775, 0.09835439175367355, -0.03641423583030701, -0.11393947899341583, 0.038847047835588455, -0.01550658792257309));
	r += mul(s1_1, float4x4(0.3404255509376526, -0.1554708182811737, 0.049185678362846375, -0.009802720509469509, 0.011822137050330639, 0.2798994481563568, -0.34520769119262695, -0.2708834707736969, -0.12868033349514008, -0.03900726139545441, -0.15771441161632538, -0.3104439377784729, 0.0224708653986454, -0.022331221029162407, 0.08630046248435974, 0.13219454884529114));
	r += mul(s1_2, float4x4(0.1116374135017395, -0.2778785526752472, -0.0865616500377655, -0.0989001989364624, -0.054160334169864655, -0.29325753450393677, 0.16990330815315247, -0.01936226710677147, 0.19055268168449402, 0.0917649045586586, -0.4473426342010498, -0.5341590046882629, -0.06477444618940353, -0.008668368682265282, -0.0548357255756855, 0.1313759684562683));
	r += mul(s1_3, float4x4(-0.199664905667305, 0.21680109202861786, 0.10193103551864624, -0.01795332133769989, -0.10133499652147293, 0.10925901681184769, -0.1883350908756256, -1.0861780643463135, 0.09122230112552643, 0.14106464385986328, 0.09544026851654053, -0.02653595618903637, 0.001411320874467492, -0.1356833130121231, 0.07977785170078278, 0.016214542090892792));
	r += mul(s1_4, float4x4(-0.268193781375885, 0.14022362232208252, 0.32828378677368164, 0.14063303172588348, -0.2757885158061981, 0.19575966894626617, 0.1437927782535553, -0.5815116763114929, 0.39621102809906006, 0.25669848918914795, -0.4807949364185333, -0.8200593590736389, 0.028873948380351067, -0.038269490003585815, 0.0058189150877296925, -0.03641071915626526));
	r += mul(s1_5, float4x4(0.10989173501729965, 0.27694833278656006, -0.13676084578037262, -0.20378631353378296, 0.028943540528416634, -0.8042647838592529, -0.00433921767398715, -0.10376033186912537, 0.29703810811042786, -0.3920522928237915, -0.31819948554039, -0.4866074323654175, -0.010189002379775047, -0.016775885596871376, -0.0060716597363352776, 0.1046232134103775));
	r += mul(s1_6, float4x4(-0.42413097620010376, 0.19831563532352448, 0.018015757203102112, 0.09643065184354782, 0.17988421022891998, -0.03249827027320862, -0.0028654837515205145, 0.22495432198047638, -0.20648035407066345, -0.03779978305101395, -0.0015697689959779382, 0.09185176342725754, 0.13726913928985596, 0.028618410229682922, 0.02252170629799366, -0.05008477717638016));
	r += mul(s1_7, float4x4(-0.0029153034556657076, 0.008249732665717602, -0.08143913745880127, -0.07714826613664627, -0.6455402374267578, 0.048619430512189865, -0.014960884116590023, 0.040254730731248856, -0.07872773706912994, -0.3544531464576721, -0.24604080617427826, -0.372339129447937, -0.004326469264924526, 0.02191711589694023, -0.0292324461042881, -0.016950378194451332));
	r += mul(s1_8, float4x4(0.11797168850898743, -0.07265464216470718, -0.01782691292464733, 0.08035023510456085, 0.014734200201928616, 0.03279663622379303, -0.12560223042964935, -0.04381784424185753, 0.1300370842218399, -0.4517081677913666, -0.0789489820599556, 0.12394819408655167, -0.12095853686332703, -0.04090472310781479, 0.041022852063179016, 0.007581290323287249));
	r += mul(s2_0, float4x4(-0.006650170311331749, 0.04526621475815773, -0.19248783588409424, -0.4532187879085541, -0.25069692730903625, 0.09157274663448334, -0.44422635436058044, 0.043121516704559326, 0.04895753413438797, -0.0007472155848518014, -0.0899176150560379, -0.13602177798748016, -0.09392790496349335, 0.023543566465377808, -0.10988914221525192, -0.051682863384485245));
	r += mul(s2_1, float4x4(-0.2851705849170685, -0.4753691554069519, 0.18522192537784576, -0.0697486624121666, 0.1862371265888214, 0.1254841387271881, -0.47278672456741333, -0.02805512584745884, 0.18135716021060944, -0.032348740845918655, -0.12515991926193237, -0.30958297848701477, -0.2990294098854065, 0.11619021743535995, -0.02329409122467041, -0.29279932379722595));
	r += mul(s2_2, float4x4(-0.18929646909236908, 0.13723133504390717, 0.042010508477687836, 0.45996996760368347, -0.023121371865272522, -0.3777371048927307, -0.2510513365268707, -0.21534836292266846, -0.06959625333547592, -0.09108249843120575, -0.11846423894166946, -0.1628417819738388, -0.22318729758262634, 0.06322106719017029, -0.06950012594461441, 0.2705341577529907));
	r += mul(s2_3, float4x4(0.24564729630947113, -0.01433790847659111, -0.026374369859695435, -0.8820773959159851, -0.19359232485294342, -0.20962442457675934, 0.07345325499773026, 0.008593081496655941, -0.024077115580439568, -0.15729814767837524, -0.07699237763881683, -0.23726651072502136, -0.1795642077922821, 0.11962895840406418, 0.008674596436321735, 0.21186678111553192));
	r += mul(s2_4, float4x4(0.4817745089530945, 0.2926822006702423, 0.34975624084472656, 0.517200767993927, -0.41294002532958984, -0.09190551191568375, -0.10458986461162567, -0.14489352703094482, 0.31583261489868164, -0.31178873777389526, -0.35302335023880005, -0.6272369623184204, 0.4029332101345062, 0.2718481123447418, -0.06480386108160019, -0.047507066279649734));
	r += mul(s2_5, float4x4(0.02772538922727108, 1.2267869710922241, -0.2326936423778534, 0.371046781539917, -0.23042316734790802, -0.10107175260782242, 0.056700557470321655, 0.07698754966259003, 0.2414715737104416, -0.3525395393371582, -0.08343897759914398, -0.0704302042722702, -0.1586906909942627, -0.41109058260917664, -0.06915251910686493, 0.10139358043670654));
	r += mul(s2_6, float4x4(0.2822000980377197, 0.04928075149655342, -0.028272151947021484, 0.28929761052131653, -0.013996993191540241, -0.07695867121219635, 0.18888671696186066, 0.12988629937171936, 0.15770672261714935, -0.10522950440645218, -0.02667590230703354, -0.45384347438812256, 0.05946499481797218, 0.08466296643018723, 0.04976186156272888, -0.11351121962070465));
	r += mul(s2_7, float4x4(0.27344903349876404, -0.03998897597193718, 0.2128838449716568, 0.7558605670928955, 0.010454552248120308, -0.06672567874193192, -0.0639428123831749, 0.10079646855592728, 0.07761016488075256, -0.2798311710357666, -0.4478258788585663, -0.7358567714691162, -0.35212045907974243, 0.18589557707309723, -0.061305902898311615, 0.07880919426679611));
	r += mul(s2_8, float4x4(0.3728000521659851, 0.3954780399799347, -0.2540516257286072, -0.7266048192977905, -0.06391888856887817, -0.15860457718372345, 0.07929877936840057, -0.0684739276766777, 0.18145810067653656, -0.4272221624851227, 0.022413544356822968, -0.12059971690177917, -0.34424951672554016, 0.13223573565483093, -0.03234780579805374, -0.11254818737506866));
	r += mul(s3_0, float4x4(-0.08422690629959106, 0.01462226640433073, -0.07729487866163254, 0.09605056792497635, -0.2657351791858673, -0.018877223134040833, -0.0919654369354248, 0.033524442464113235, 0.5684215426445007, 0.10966961085796356, 0.007828157395124435, 0.0035510589368641376, -0.09642729163169861, -0.18698255717754364, -0.07519882917404175, -0.05889619514346123));
	r += mul(s3_1, float4x4(0.0685456246137619, 0.16738680005073547, -0.07535696774721146, 0.18866243958473206, -0.1674550622701645, -0.03078443929553032, 0.03505510464310646, 0.136067196726799, 1.1860477924346924, 0.10435855388641357, -0.06791764497756958, -0.11743034422397614, -0.0895104706287384, 0.325469434261322, -0.3485071361064911, 0.2286016196012497));
	r += mul(s3_2, float4x4(0.10899028182029724, -0.022491825744509697, -0.0072469026781618595, -0.14191873371601105, -0.0671711415052414, -0.05203770846128464, 0.03491568937897682, 0.2066606879234314, 0.3604770600795746, -0.15800786018371582, -0.04573778063058853, -0.27830660343170166, -0.14698833227157593, -0.5058605670928955, -0.09645111113786697, -0.26248541474342346));
	r += mul(s3_3, float4x4(-0.037426456809043884, -0.020925890654325485, -0.09794392436742783, 0.08314057439565659, 0.31915685534477234, -0.11859631538391113, -0.1710866242647171, 0.2047884315252304, -0.3688076138496399, 0.15279033780097961, -0.10577709227800369, 0.6310842037200928, 0.10035254806280136, -0.14985303580760956, -0.32203394174575806, -0.24470895528793335));
	r += mul(s3_4, float4x4(-1.1751039028167725, -0.08415386080741882, -0.08142789453268051, -0.015052467584609985, -0.31359681487083435, -0.06516911089420319, -0.2548399567604065, 0.17718380689620972, -0.2363685518503189, 0.02677053026854992, 0.02188853733241558, -0.14990347623825073, 0.1900806576013565, -0.18632152676582336, -0.0985342487692833, 0.0321611687541008));
	r += mul(s3_5, float4x4(-0.05596677213907242, 0.1564931422472, 0.04808725044131279, 0.0822470486164093, -0.06019142270088196, 0.2532612979412079, -0.01676970347762108, 0.1762382686138153, -0.5197445750236511, -0.01308121532201767, -0.11112447082996368, -0.2821598947048187, -0.10605037212371826, 0.025854622945189476, -0.04002648964524269, 0.2819494307041168));
	r += mul(s3_6, float4x4(0.018591340631246567, 0.13232456147670746, -0.06132188439369202, 0.3622220754623413, -0.1612103134393692, -0.5982584357261658, 0.06254491209983826, 0.0788346379995346, -0.08178362995386124, -0.2508895695209503, -0.07429840415716171, 0.18144455552101135, 0.057064689695835114, -0.012670010328292847, -0.03707151487469673, 0.03704478219151497));
	r += mul(s3_7, float4x4(-0.03236128389835358, 0.12936855852603912, 0.09713337570428848, 0.08296223729848862, -0.3927261233329773, 0.45822980999946594, -0.2330545336008072, 0.2438124418258667, 1.0194849967956543, 0.008568428456783295, 0.03099806047976017, -0.3401285409927368, -0.05447957664728165, 0.041853707283735275, -0.05997157469391823, -0.10670245438814163));
	r += mul(s3_8, float4x4(-0.21076373755931854, 0.3011590540409088, -0.01546383649110794, 0.0983479768037796, 0.14724503457546234, 0.34487274289131165, -0.013278036378324032, 0.009291358292102814, 0.44435665011405945, 0.006860293447971344, -0.18419311940670013, 0.340402752161026, 0.07240442931652069, 0.0013131806626915932, -0.10431752353906631, 0.021975446492433548));
	r += float4(-0.0009534365963190794, -0.007647024467587471, -0.05689055100083351, -0.012922270223498344);
	return max(r, 0.0);
}
float4 f2(float2 pt, float2 pos, float4 s0_0, float4 s0_1, float4 s0_2, float4 s0_3, float4 s0_4, float4 s0_5, float4 s0_6, float4 s0_7, float4 s0_8, float4 s1_0, float4 s1_1, float4 s1_2, float4 s1_3, float4 s1_4, float4 s1_5, float4 s1_6, float4 s1_7, float4 s1_8, float4 s2_0, float4 s2_1, float4 s2_2, float4 s2_3, float4 s2_4, float4 s2_5, float4 s2_6, float4 s2_7, float4 s2_8, float4 s3_0, float4 s3_1, float4 s3_2, float4 s3_3, float4 s3_4, float4 s3_5, float4 s3_6, float4 s3_7, float4 s3_8) {
	float4 r = 0.0;
	r += mul(s0_0, float4x4(0.3566059470176697, 0.12857744097709656, -0.023284170776605606, -0.1250377893447876, -0.1281062513589859, -0.6838374137878418, 0.16346485912799835, 0.2713901698589325, -0.14739644527435303, -0.41784822940826416, -0.024010801687836647, 0.032637789845466614, -0.003819933859631419, -0.0314941368997097, 0.0027995507698506117, 0.10421984642744064));
	r += mul(s0_1, float4x4(-0.19695094227790833, 0.09713263809680939, 0.0684080570936203, 0.16215239465236664, 0.06364008039236069, -0.14279364049434662, 0.029253480955958366, -3.5019547939300537, 0.6278039813041687, -0.9413858652114868, 0.7569975852966309, 0.31838008761405945, 0.04640161618590355, -0.020890161395072937, 0.07146473973989487, 0.2033930867910385));
	r += mul(s0_2, float4x4(0.5341757535934448, -0.004857202526181936, 0.09394840151071548, 0.2846486568450928, 0.1482374221086502, 0.15596136450767517, -0.010956472717225552, -0.07205580919981003, 0.8560804128646851, -0.40787386894226074, 0.16930606961250305, -0.28764697909355164, -0.1910112202167511, 0.09758041054010391, -0.058423254638910294, 0.15478892624378204));
	r += mul(s0_3, float4x4(-0.19149309396743774, 0.22162213921546936, -0.03710058704018593, -0.018430162221193314, 0.4447498321533203, 0.035453494638204575, -0.150873064994812, -0.25474315881729126, -0.0388239324092865, 0.3181370198726654, 0.18101178109645844, 0.3521503806114197, 0.28609323501586914, 0.8387174010276794, 0.08283405750989914, -0.27601155638694763));
	r += mul(s0_4, float4x4(-0.22135917842388153, 0.11011158674955368, -0.6347323060035706, 0.2530648708343506, 0.37195223569869995, 0.28712737560272217, -0.05628592148423195, -0.7129064798355103, 0.28517088294029236, 0.8974149823188782, 0.07887863367795944, 0.0777253657579422, -0.4406600296497345, -0.15170897543430328, -0.44941821694374084, -0.39983823895454407));
	r += mul(s0_5, float4x4(0.0646994486451149, -0.06420249491930008, -0.19384171068668365, 0.16502276062965393, 0.20262901484966278, 0.0410764217376709, 0.014414708130061626, 0.033213697373867035, 0.019351491704583168, 0.9169527888298035, 0.22605344653129578, -0.5147324800491333, -0.24619682133197784, -0.30814260244369507, -0.22900497913360596, -0.20418886840343475));
	r += mul(s0_6, float4x4(-0.1388188898563385, 0.07915841788053513, 0.016032617539167404, -0.19318866729736328, 0.2222539186477661, -0.3724232614040375, 0.08748260140419006, 0.28045275807380676, 0.0847446620464325, 0.6525049209594727, -0.10864417999982834, -0.321115106344223, 0.04097101837396622, -0.7714896202087402, -0.06278986483812332, -0.0633092001080513));
	r += mul(s0_7, float4x4(-0.11895614117383957, -0.11093325912952423, 0.3388652205467224, -0.08114026486873627, 0.21013519167900085, -0.017539946362376213, 0.09268752485513687, -0.04443715512752533, 0.01720452681183815, 0.33998265862464905, -0.2661794424057007, -0.5831854343414307, -0.21928046643733978, -0.6907618641853333, -0.008899861946702003, -0.24663299322128296));
	r += mul(s0_8, float4x4(-0.4418083429336548, 0.21588341891765594, 0.13294966518878937, -0.40487799048423767, -0.037500981241464615, -0.005244373809546232, -0.025067560374736786, 0.16447961330413818, 0.028695562854409218, -0.5389136075973511, -0.7120828032493591, 0.7846404314041138, 0.014370864257216454, -0.10608115792274475, 0.2685311734676361, -0.1576189547777176));
	r += mul(s1_0, float4x4(-0.33973944187164307, 0.472965270280838, 0.14210695028305054, 0.07804075628519058, 0.4161812365055084, 0.29802006483078003, -0.041540805250406265, 0.32307168841362, 0.26439231634140015, 0.05859246104955673, -0.02756483480334282, -0.06034136563539505, -0.09648466110229492, 0.002862212946638465, -0.0007538505014963448, -0.024577556177973747));
	r += mul(s1_1, float4x4(-0.014996339567005634, 0.7693873047828674, -0.002796635963022709, -0.9152811169624329, -0.4402349293231964, 0.7694689035415649, -0.283182829618454, -0.7503865957260132, -0.23173078894615173, -0.45127174258232117, 0.2826952040195465, -0.24912935495376587, 0.04302358627319336, -0.04161779209971428, -0.028765397146344185, 0.041346702724695206));
	r += mul(s1_2, float4x4(-0.5108300447463989, 0.23976555466651917, -0.06649891287088394, 0.1351763904094696, -0.016946276649832726, 0.11875680834054947, 0.07512739300727844, -0.46665722131729126, -0.6127347350120544, -0.2549712657928467, -0.005053624976426363, -0.44955629110336304, 0.018719526007771492, -0.08024312555789948, 0.04344027861952782, 0.007774368394166231));
	r += mul(s1_3, float4x4(0.1657273918390274, -0.502066433429718, 0.05346221104264259, -0.06935807317495346, 0.15122003853321075, -0.1337117850780487, 0.020714208483695984, 0.12824206054210663, 0.14896471798419952, -0.06004641577601433, 0.020786266773939133, 0.21041430532932281, 0.0033786764834076166, 0.03847624734044075, -0.09587151557207108, -0.037332914769649506));
	r += mul(s1_4, float4x4(0.07147295027971268, 0.04077839106321335, 0.3350766897201538, -0.05022463947534561, -0.47349661588668823, -0.23404085636138916, -0.30380943417549133, -0.4365367293357849, -0.5175484418869019, -0.3187602460384369, -0.48401185870170593, 0.1115466058254242, 0.024746805429458618, 0.06760690361261368, -0.016292795538902283, 0.03492626175284386));
	r += mul(s1_5, float4x4(0.2882887125015259, 0.10867921262979507, 0.27366703748703003, 0.5287004113197327, -0.11461954563856125, 0.04441715031862259, 0.10251449793577194, -0.07891688495874405, -0.03708552196621895, -0.37291988730430603, -0.02454419434070587, 0.023599771782755852, 0.04994400590658188, -0.07234520465135574, 0.10235334932804108, 0.026087159290909767));
	r += mul(s1_6, float4x4(-0.07608288526535034, -0.27090534567832947, -0.3122832775115967, -0.11311976611614227, -0.10940971970558167, -0.11065558344125748, 0.0439034029841423, 0.02787001244723797, 0.03644317388534546, 0.22787249088287354, -0.09728004783391953, -0.1450202316045761, -0.04798044636845589, -0.021967945620417595, -0.041473131626844406, 0.031577929854393005));
	r += mul(s1_7, float4x4(-0.04859933629631996, -0.03560032323002815, -0.351402223110199, -0.25463640689849854, -0.011222267523407936, 0.04839358478784561, 0.19447696208953857, 0.0140947001054883, -0.32001474499702454, -0.20704835653305054, -0.20035040378570557, -0.04710368439555168, 0.013868613168597221, 0.0722871944308281, 6.162607314763591e-05, 0.03223973512649536));
	r += mul(s1_8, float4x4(-0.0033575191628187895, -0.060537394136190414, -0.20833644270896912, -0.09534237533807755, 0.2826702892780304, -0.11018193513154984, 0.1599777340888977, 0.005240002181380987, -0.003601213451474905, 0.001069359597750008, -0.14115802943706512, 0.1577461063861847, -0.00023293308913707733, 0.040851034224033356, 0.01001951564103365, -0.027888605371117592));
	r += mul(s2_0, float4x4(-0.4153751730918884, -0.24368037283420563, 0.0522061325609684, -0.19264480471611023, -0.16546837985515594, -0.09502636641263962, -0.06106432527303696, -0.041719309985637665, -0.06473004817962646, 0.09210697561502457, -0.019263043999671936, 0.1015278622508049, 0.08154325932264328, 0.1395820826292038, -0.05357762426137924, -0.3654772639274597));
	r += mul(s2_1, float4x4(0.4795132875442505, -0.3938823640346527, 0.12677261233329773, -0.9628048539161682, -0.6928179860115051, 0.1350836306810379, -0.33578774333000183, 0.5563912391662598, -0.34586063027381897, -0.016069483011960983, -0.1841551512479782, 0.1523279994726181, -0.08611325919628143, -0.5704753398895264, 0.025815488770604134, -2.307159900665283));
	r += mul(s2_2, float4x4(-0.6878290176391602, 0.02249012142419815, -0.029505621641874313, -0.9158519506454468, -0.7485083937644958, -0.3579041063785553, -0.08275306224822998, -0.2662486732006073, 0.006018101237714291, -0.12478454411029816, 0.03650382533669472, -0.1340552717447281, 0.4368690848350525, -0.24366752803325653, 0.13796773552894592, -0.26365479826927185));
	r += mul(s2_3, float4x4(-0.1892320215702057, 0.07320857048034668, 0.2121274471282959, 0.09331663697957993, 0.17248742282390594, -0.662364661693573, -0.02099687047302723, -0.08687268197536469, -0.10450445115566254, -0.4093199074268341, -0.19095560908317566, -0.03818203881382942, -0.18699118494987488, 0.36421021819114685, -0.016306594014167786, 0.054769858717918396));
	r += mul(s2_4, float4x4(0.49083590507507324, 0.36200985312461853, 1.4191546440124512, 0.1377592831850052, -0.1851181834936142, -0.558247983455658, -0.22294963896274567, -0.4424707889556885, -0.1417843997478485, -0.6455206871032715, -0.005240021273493767, 0.23367512226104736, -0.3260062038898468, 0.40705606341362, -0.7271164059638977, 0.3664672076702118));
	r += mul(s2_5, float4x4(-0.3130435049533844, 0.14596600830554962, 0.02656279318034649, 0.275373250246048, 0.07899155467748642, 0.25944119691848755, -0.1072637140750885, -0.5169755816459656, 0.21148060262203217, -0.19721046090126038, 0.1424785852432251, 0.3955901265144348, -0.2769910395145416, -0.22880852222442627, -0.08845274895429611, -0.5806224942207336));
	r += mul(s2_6, float4x4(0.12211672961711884, 0.011296847835183144, 0.08925748616456985, 0.060773640871047974, 0.13681939244270325, -0.15766745805740356, 0.11362694203853607, -0.006748904008418322, -0.10181711614131927, -0.444071501493454, -0.1702922284603119, -0.044536788016557693, 0.11303038895130157, 0.21242530643939972, 0.24072939157485962, 0.026179896667599678));
	r += mul(s2_7, float4x4(0.3558797538280487, 0.17377592623233795, -0.35176214575767517, 0.5639481544494629, -0.17486128211021423, -0.0529814213514328, 0.05110935494303703, -0.008836399763822556, -0.23700080811977386, -0.24693898856639862, -0.14527764916419983, -0.4211057722568512, -0.046458665281534195, 0.26344144344329834, 0.43543916940689087, 0.013210967183113098));
	r += mul(s2_8, float4x4(0.15686851739883423, 0.3017691671848297, -0.3475598096847534, 0.19669833779335022, 0.12931351363658905, -0.06813006848096848, 0.032839976251125336, 0.3372609615325928, 0.05285399779677391, -0.08761702477931976, -0.04603945463895798, -0.16597016155719757, 0.006475220434367657, 0.07531161606311798, 0.17916515469551086, 0.05525699630379677));
	r += mul(s3_0, float4x4(-0.12797890603542328, -0.08100944757461548, 0.034453216940164566, -0.005876399111002684, 0.14248931407928467, 0.07594723254442215, -0.05844459682703018, -0.04261166602373123, 0.04879072308540344, -0.16132141649723053, -0.00961981900036335, 0.1501774787902832, 0.11449813842773438, -0.11843189597129822, 0.07437846064567566, -0.018637174740433693));
	r += mul(s3_1, float4x4(-0.04984237998723984, 0.13932949304580688, 0.062284644693136215, -0.0641738623380661, 0.11012434214353561, 0.002319997176527977, -0.07117678225040436, 0.17632491886615753, 0.09444627165794373, 0.6656693816184998, -0.10669154673814774, -0.5624383091926575, -0.06807217746973038, -0.13033246994018555, -0.13539735972881317, 0.0014747710665687919));
	r += mul(s3_2, float4x4(-0.03554682061076164, 0.11455674469470978, -0.06339137256145477, 0.08269592374563217, -0.0017142626456916332, 0.0029884646646678448, 0.005816899240016937, 0.07893618941307068, -0.1524835079908371, 0.6354638934135437, -0.040815841406583786, 0.49520689249038696, -0.3159746825695038, -0.10122997313737869, 0.06829706579446793, 0.05876469612121582));
	r += mul(s3_3, float4x4(-0.18010255694389343, 0.27985507249832153, 0.06309320032596588, -0.061498794704675674, 0.1488315612077713, -0.26356595754623413, -0.1567440629005432, 0.2721386253833771, -0.26338431239128113, -0.7727199196815491, -0.18145260214805603, -0.15544173121452332, -0.0762508362531662, 0.3209645748138428, -0.258393794298172, -0.07542989403009415));
	r += mul(s3_4, float4x4(0.30702292919158936, 0.1371641904115677, 0.18761590123176575, -0.5058463215827942, 0.5160953402519226, 0.011088046245276928, 0.317388117313385, -0.8976902961730957, 0.06828710436820984, -0.402559369802475, 0.13439340889453888, 0.4836004972457886, 0.2777545154094696, -0.26380401849746704, -0.10800367593765259, 0.2114260494709015));
	r += mul(s3_5, float4x4(0.05062613636255264, -0.242373988032341, -0.11057872325181961, -0.3271310031414032, -0.8582494258880615, 0.192874938249588, -0.015009441412985325, -0.038246430456638336, 0.15306422114372253, -0.7035237550735474, -0.002752129454165697, 0.2862413823604584, -0.31997889280319214, -0.1529666632413864, -0.04814314842224121, 0.21660661697387695));
	r += mul(s3_6, float4x4(0.025931358337402344, 0.11866382509469986, 0.09135429561138153, 0.1272045224905014, 0.03152431175112724, -0.7557641267776489, 0.8925782442092896, -0.45448407530784607, -0.16254301369190216, 0.07102174311876297, 0.12494269758462906, 0.3559451699256897, -0.05088416859507561, -0.1438186913728714, -0.05046969652175903, 0.10141609609127045));
	r += mul(s3_7, float4x4(0.21985389292240143, 0.10505956411361694, -0.03336155042052269, 0.3116704225540161, 0.23867078125476837, -0.020734598860144615, -0.7040423154830933, -0.13818195462226868, 0.03625893592834473, 0.001717453938908875, 0.30787935853004456, 0.6308456063270569, 0.13463793694972992, 0.05374560132622719, -0.10846171528100967, 0.013795286417007446));
	r += mul(s3_8, float4x4(0.03699944168329239, 0.18820598721504211, 0.08018215000629425, -0.06104598566889763, -0.6933905482292175, 0.060151491314172745, -0.015367038547992706, 0.03236767649650574, -0.23125125467777252, 0.33512020111083984, 0.41490092873573303, -0.49374762177467346, -0.09204502403736115, 0.08911201357841492, -0.011462199501693249, -0.18257272243499756));
	r += float4(-0.0032555118668824434, -0.021039754152297974, -0.0025488801766186953, -0.00943848118185997);
	return max(r, 0.0);
}
float4 f3(float2 pt, float2 pos, float4 s0_0, float4 s0_1, float4 s0_2, float4 s0_3, float4 s0_4, float4 s0_5, float4 s0_6, float4 s0_7, float4 s0_8, float4 s1_0, float4 s1_1, float4 s1_2, float4 s1_3, float4 s1_4, float4 s1_5, float4 s1_6, float4 s1_7, float4 s1_8, float4 s2_0, float4 s2_1, float4 s2_2, float4 s2_3, float4 s2_4, float4 s2_5, float4 s2_6, float4 s2_7, float4 s2_8, float4 s3_0, float4 s3_1, float4 s3_2, float4 s3_3, float4 s3_4, float4 s3_5, float4 s3_6, float4 s3_7, float4 s3_8) {
	float4 r = 0.0;
	r += mul(s0_0, float4x4(-0.027393167838454247, -0.08419094979763031, 0.20410555601119995, 0.03562391921877861, -0.2529295086860657, 0.2835703194141388, 0.039876632392406464, -0.0971708595752716, -0.012148415669798851, 0.16624747216701508, -0.112286277115345, -0.19170185923576355, 0.054956067353487015, 0.016548341140151024, -0.002082239370793104, 0.014128723181784153));
	r += mul(s0_1, float4x4(0.013603556901216507, -0.10229533165693283, -0.18132363259792328, 0.1237400695681572, -0.3369150757789612, -0.09783409535884857, -0.10235869139432907, -0.14463157951831818, -0.5189835429191589, 0.44311290979385376, 0.5573816895484924, -0.125845268368721, 0.042860548943281174, 0.033894456923007965, -0.13216538727283478, -0.13468942046165466));
	r += mul(s0_2, float4x4(0.023204058408737183, -0.09745777398347855, 0.2794744670391083, -0.045119185000658035, 0.1459013670682907, 0.07780890166759491, 0.07102228701114655, 0.022718006744980812, -0.10831097513437271, 0.3824945390224457, -0.016416987404227257, 0.46068668365478516, 0.040009744465351105, 0.020222729071974754, -0.04534072056412697, -0.16644234955310822));
	r += mul(s0_3, float4x4(0.12363824993371964, -0.02805432491004467, 0.43947890400886536, -0.03655722364783287, -0.2913972735404968, 0.23866157233715057, -0.19320844113826752, 0.10012058168649673, -0.42444851994514465, 0.13064037263393402, -1.040616750717163, 0.24269413948059082, -0.07568193972110748, -0.08753827214241028, -0.0009896709816530347, -0.13799463212490082));
	r += mul(s0_4, float4x4(0.2280290275812149, 0.011844005435705185, -0.19642433524131775, -0.2607259154319763, 0.4911033511161804, -0.2689327001571655, 0.39075392484664917, -0.1231866106390953, 0.9433248043060303, 1.001080870628357, 0.5732983946800232, 0.27291998267173767, -0.046789269894361496, -0.4058273732662201, -0.021628769114613533, -0.17794863879680634));
	r += mul(s0_5, float4x4(-0.346954345703125, 0.059107955545186996, 0.37139368057250977, -0.22914238274097443, 0.13652649521827698, 0.023115092888474464, 0.05448314547538757, -0.05520553141832352, 0.18568728864192963, -0.8640578389167786, 0.16434617340564728, -0.8542271256446838, 0.17139118909835815, -0.2954810559749603, -0.08340159803628922, -0.3411791920661926));
	r += mul(s0_6, float4x4(-0.0016787088243290782, -0.047938913106918335, -0.06005451828241348, -0.09458897262811661, -0.028252672404050827, 0.0689864531159401, 0.0018440556013956666, -0.12450060248374939, -0.1517617106437683, 0.08274675905704498, -0.3458394408226013, 0.11744812875986099, 0.11630406230688095, -0.1338907927274704, 0.11207281798124313, -0.1727762073278427));
	r += mul(s0_7, float4x4(-0.2627931237220764, -0.30897802114486694, -0.14555315673351288, -0.09791449457406998, -0.00997135043144226, 0.058838557451963425, 0.05625147372484207, -0.24449113011360168, 0.09021642059087753, -0.5726358890533447, 0.10879123210906982, -0.2563774883747101, -0.12278591841459274, 0.3364069163799286, -0.05465322360396385, 0.009954522363841534));
	r += mul(s0_8, float4x4(-0.16273145377635956, -0.03622185066342354, -0.2793796956539154, -0.059779293835163116, 0.006108440924435854, 0.023924877867102623, 0.10963306576013565, 0.05500132590532303, 0.6290575861930847, -0.5818228721618652, 0.07160180062055588, -0.6812103390693665, -0.3824428617954254, 0.20882008969783783, -0.11364327371120453, 0.13574935495853424));
	r += mul(s1_0, float4x4(0.21644239127635956, 0.3269978165626526, -0.2089572250843048, 0.17009535431861877, 0.09194160997867584, -0.09935605525970459, 0.02436850592494011, -0.0027484905440360308, 0.0814199447631836, -0.001954751554876566, 0.2121242731809616, -0.03294536471366882, 0.009213725104928017, -0.06319344788789749, 0.021288802847266197, 0.06677350401878357));
	r += mul(s1_1, float4x4(-0.07690483331680298, -0.10481729358434677, -0.29565274715423584, 0.03137766197323799, 0.33703410625457764, -0.02437812276184559, -0.2338019609451294, -0.17157509922981262, -0.3830420970916748, -0.031392596662044525, -0.1741994172334671, -0.1536029577255249, 0.004014200996607542, 0.01065379660576582, -0.05967636778950691, 0.03158248960971832));
	r += mul(s1_2, float4x4(0.04147139564156532, -0.0245848149061203, -0.02448291890323162, -0.009279021061956882, 0.07245022803544998, 0.08586469292640686, 0.037845220416784286, 0.14571547508239746, -0.11356037110090256, -0.06135696917772293, -0.15085667371749878, -0.285580575466156, -0.037581413984298706, -0.037963490933179855, 0.01890064962208271, -0.029329707846045494));
	r += mul(s1_3, float4x4(-0.2685618996620178, -0.18215060234069824, -0.28263288736343384, -0.018613122403621674, 0.17810413241386414, -0.16142155230045319, 0.08762907981872559, 0.07754195481538773, -0.022981412708759308, 0.0009537414298392832, 0.29290100932121277, 0.05163011699914932, -0.05578882247209549, -0.012187372893095016, 0.004338960628956556, -0.009717055596411228));
	r += mul(s1_4, float4x4(0.36230069398880005, -0.0703500360250473, -0.3169676959514618, 0.16231374442577362, -0.012123300693929195, 0.18106324970722198, -0.3026497960090637, 0.040143053978681564, 0.20855781435966492, -0.09520075470209122, -0.09703987091779709, -0.1129361242055893, 0.006041082087904215, 0.010421372018754482, 0.03849243000149727, 0.08985643088817596));
	r += mul(s1_5, float4x4(0.013911507092416286, 0.02877119742333889, 0.011780787259340286, -0.12817266583442688, -0.2273377627134323, 0.015071308240294456, 0.4448448121547699, 0.24536313116550446, -0.03261149674654007, 0.25128641724586487, -0.4211883544921875, -0.15649303793907166, -0.0658668801188469, 0.010552608408033848, 0.04013289138674736, 0.08718755841255188));
	r += mul(s1_6, float4x4(0.020594894886016846, -0.06483582407236099, -0.18278107047080994, -0.1209985539317131, 0.034062325954437256, 0.1258716583251953, 0.015363194048404694, 0.12049511075019836, 0.01911216229200363, -0.055714018642902374, -0.12267035990953445, -0.04167037084698677, -0.005903886165469885, -0.06294441223144531, 0.008932518772780895, -0.04315895587205887));
	r += mul(s1_7, float4x4(0.004161537159234285, 0.003248506225645542, 0.6108844876289368, -0.053934503346681595, -0.15914742648601532, 0.2800407409667969, -0.6794201731681824, -0.3487590253353119, 0.1226024180650711, -0.07739020884037018, 0.3759778141975403, -0.0976860374212265, -0.010745826177299023, -0.05045836418867111, 0.04983031004667282, 0.11128731817007065));
	r += mul(s1_8, float4x4(0.07853946089744568, 0.09896154701709747, -0.25057777762413025, 0.03962623327970505, -0.04169277846813202, 0.07232210785150528, -0.14150936901569366, 0.1389225423336029, -0.016135068610310555, 0.04379947856068611, -0.18075360357761383, 0.031162498518824577, 0.010825379751622677, 0.026365840807557106, -0.012805724516510963, -0.016276542097330093));
	r += mul(s2_0, float4x4(0.05231302231550217, 0.11179951578378677, -0.27050745487213135, -0.11892353743314743, -0.07049436867237091, -0.0907132551074028, 0.25968000292778015, -0.06841979175806046, -0.08709687739610672, -0.13229168951511383, 0.011522607877850533, 0.012672575190663338, -0.11835585534572601, -0.09695535153150558, -0.2127496898174286, -0.14131751656532288));
	r += mul(s2_1, float4x4(-0.08492725342512131, 0.09472515434026718, 0.30990222096443176, -0.21254771947860718, 0.07631842792034149, -0.11698699742555618, -0.5970631837844849, -0.12000831961631775, 0.054318372160196304, -0.07372605800628662, 0.034741852432489395, 0.1518877148628235, -0.23848165571689606, -0.07593187689781189, 0.27050501108169556, -0.0932750254869461));
	r += mul(s2_2, float4x4(-0.017250383272767067, 0.17493292689323425, -0.43633022904396057, -0.09084214270114899, 0.12530517578125, -0.14169177412986755, 0.29581591486930847, -0.2878628373146057, -0.08027515560388565, -0.054190561175346375, 0.11669410020112991, -0.36415109038352966, -0.026246951892971992, -0.0437631718814373, 0.015906400978565216, -0.0353328213095665));
	r += mul(s2_3, float4x4(-0.1953667551279068, 0.1871332824230194, -0.4039335250854492, -0.15181852877140045, 0.13596311211585999, -0.10249397903680801, -0.01733221486210823, -0.02560613863170147, 0.09752289205789566, -0.16290201246738434, -0.043688710778951645, -0.233949676156044, 0.1831178218126297, 0.07114709168672562, -0.14728178083896637, 0.029966438189148903));
	r += mul(s2_4, float4x4(-0.07446648925542831, 0.8859624862670898, 0.1036987230181694, -0.3757551312446594, 0.2067631036043167, -0.25683167576789856, -0.36065810918807983, 0.08966205269098282, 0.09233413636684418, 0.017294377088546753, 0.31262174248695374, -0.31753867864608765, 0.11938511580228806, -0.2520841658115387, 0.19794213771820068, -0.14382998645305634));
	r += mul(s2_5, float4x4(0.10417342185974121, 0.059599991887807846, -0.6652187705039978, -0.25052860379219055, -0.016456911340355873, 0.049846842885017395, -0.009438388049602509, -0.03986852243542671, -0.14524398744106293, 0.06620676070451736, 0.09544745832681656, -0.3940414786338806, -0.20248079299926758, 0.06017933040857315, 0.04963742196559906, 0.08795767277479172));
	r += mul(s2_6, float4x4(-0.20588605105876923, -0.10318949818611145, -0.3251078128814697, -0.08174139261245728, 0.045520033687353134, 0.04023096337914467, 0.008617265149950981, 0.08226839452981949, 0.14347662031650543, -0.004282099660485983, 0.21813632547855377, -0.10219219326972961, -0.061609745025634766, -0.007419874891638756, 0.0953250601887703, 0.042101964354515076));
	r += mul(s2_7, float4x4(0.4506651759147644, -0.19056572020053864, 0.08892557770013809, -0.0968591645359993, -0.14785978198051453, 0.04739537835121155, 0.11762747913599014, 0.08240249752998352, 0.04449182003736496, -0.23556426167488098, -0.14256659150123596, -0.04918298125267029, -0.08618729561567307, -0.02183961309492588, -0.6310290694236755, -0.09596355259418488));
	r += mul(s2_8, float4x4(0.6508656144142151, -0.6540851593017578, 0.4615841507911682, -0.05209947004914284, -0.21924693882465363, 0.03416232019662857, -0.09445033222436905, 0.011600744910538197, -0.18792103230953217, 0.03969071805477142, 0.16366247832775116, 0.015082428231835365, -0.05741207301616669, -0.14600783586502075, 0.14810457825660706, -0.03623209893703461));
	r += mul(s3_0, float4x4(-0.03368702530860901, 0.06322330236434937, -0.15854805707931519, -0.00552008580416441, 0.004655909724533558, -0.017082152888178825, 0.14340008795261383, -0.085347980260849, -0.0049371677450835705, -0.11447873711585999, 0.1870231181383133, -0.018160957843065262, -0.20555967092514038, -0.10794095695018768, -0.43669456243515015, -0.12092659622430801));
	r += mul(s3_1, float4x4(0.09500035643577576, 0.01874793879687786, 0.01212683692574501, -0.02476109191775322, -0.05870850384235382, 0.02179539017379284, 0.11156139522790909, -0.00798338558524847, 0.06568513810634613, 0.011065923608839512, -0.12750869989395142, -0.04075861722230911, 0.10068007558584213, -0.05475534126162529, 0.019645459949970245, -0.19818508625030518));
	r += mul(s3_2, float4x4(0.0014258738374337554, -0.01812039315700531, -0.1786211133003235, -0.0019427641527727246, -0.00036066118627786636, 0.037693433463573456, -0.0425880029797554, -0.08705092966556549, -0.34550967812538147, -0.08071419596672058, 0.2644577622413635, 0.06502151489257812, -0.25613901019096375, -0.0478241965174675, 0.05998843163251877, -0.06671859323978424));
	r += mul(s3_3, float4x4(-0.06312437355518341, 0.12083283066749573, -0.14949771761894226, -0.19342784583568573, 0.12847383320331573, 0.1331271082162857, -0.06540002673864365, -0.18321308493614197, 0.37396445870399475, 0.02887262962758541, 0.7830419540405273, -0.16336114704608917, -0.03059636428952217, 0.15541468560695648, 0.1221332848072052, -0.08213051408529282));
	r += mul(s3_4, float4x4(-0.35491934418678284, -0.014739589765667915, -1.0814862251281738, -0.11548411846160889, 0.15631572902202606, 0.02588045410811901, 0.27981939911842346, -0.320361852645874, -0.38355156779289246, -0.23976455628871918, 0.005803768057376146, -0.1702771633863449, -0.0548076294362545, -0.23005445301532745, -0.22900916635990143, -0.10719466954469681));
	r += mul(s3_5, float4x4(0.1428057849407196, -0.0637110248208046, 0.0822659581899643, 0.22070226073265076, 0.0428948812186718, 0.021561743691563606, -0.1616281419992447, 0.10238051414489746, 0.278636634349823, 0.3525793254375458, -0.23297202587127686, -0.4281949996948242, 0.03296578302979469, 0.009869754314422607, -0.07187201827764511, 0.2302817702293396));
	r += mul(s3_6, float4x4(-0.06402640044689178, 0.04308009892702103, -0.12317703664302826, 0.10933110862970352, -1.0078370571136475, 0.020737728103995323, -0.08308358490467072, 0.02695528417825699, -0.042804934084415436, 0.04801008477807045, 0.07904226332902908, -0.0038478714413940907, 0.02098374255001545, -0.03913537785410881, 0.013513702899217606, -0.03328651189804077));
	r += mul(s3_7, float4x4(-0.011954772286117077, 0.32909828424453735, -0.20549795031547546, -0.012376652099192142, 0.5764207243919373, 0.6072984337806702, 0.49709612131118774, 0.12854717671871185, -0.035732291638851166, 0.13617776334285736, -0.14422503113746643, 0.13668382167816162, 0.054616425186395645, 0.03818442299962044, -0.13636235892772675, 0.007032314781099558));
	r += mul(s3_8, float4x4(0.08151182532310486, -0.14403244853019714, -0.12645158171653748, -0.14313536882400513, 0.14794084429740906, -0.011228923685848713, -0.19073571264743805, -0.2083219438791275, -0.1478700041770935, 0.24447396397590637, -0.008897627703845501, 0.3986624777317047, 0.09384062886238098, -0.10346917808055878, 0.23124922811985016, 0.0358433797955513));
	r += float4(0.00220483192242682, 0.0050545488484203815, -0.009173320606350899, -0.08438082039356232);
	return max(r, 0.0);
}
void Pass3(uint2 blockStart, uint3 tid) {
	float2 pt = float2(GetInputPt());
	uint2 gxy = Rmp8x8(tid.x) + blockStart;
	uint2 size = GetInputSize();
	if (gxy.x >= size.x || gxy.y >= size.y) {
		return;
	}
	float2 pos = (gxy + 0.5) * pt;
	float4 s0_0 = l0(-1.0, -1.0);
	float4 s0_1 = l0(0.0, -1.0);
	float4 s0_2 = l0(1.0, -1.0);
	float4 s0_3 = l0(-1.0, 0.0);
	float4 s0_4 = l0(0.0, 0.0);
	float4 s0_5 = l0(1.0, 0.0);
	float4 s0_6 = l0(-1.0, 1.0);
	float4 s0_7 = l0(0.0, 1.0);
	float4 s0_8 = l0(1.0, 1.0);
	float4 s1_0 = l1(-1.0, -1.0);
	float4 s1_1 = l1(0.0, -1.0);
	float4 s1_2 = l1(1.0, -1.0);
	float4 s1_3 = l1(-1.0, 0.0);
	float4 s1_4 = l1(0.0, 0.0);
	float4 s1_5 = l1(1.0, 0.0);
	float4 s1_6 = l1(-1.0, 1.0);
	float4 s1_7 = l1(0.0, 1.0);
	float4 s1_8 = l1(1.0, 1.0);
	float4 s2_0 = l2(-1.0, -1.0);
	float4 s2_1 = l2(0.0, -1.0);
	float4 s2_2 = l2(1.0, -1.0);
	float4 s2_3 = l2(-1.0, 0.0);
	float4 s2_4 = l2(0.0, 0.0);
	float4 s2_5 = l2(1.0, 0.0);
	float4 s2_6 = l2(-1.0, 1.0);
	float4 s2_7 = l2(0.0, 1.0);
	float4 s2_8 = l2(1.0, 1.0);
	float4 s3_0 = l3(-1.0, -1.0);
	float4 s3_1 = l3(0.0, -1.0);
	float4 s3_2 = l3(1.0, -1.0);
	float4 s3_3 = l3(-1.0, 0.0);
	float4 s3_4 = l3(0.0, 0.0);
	float4 s3_5 = l3(1.0, 0.0);
	float4 s3_6 = l3(-1.0, 1.0);
	float4 s3_7 = l3(0.0, 1.0);
	float4 s3_8 = l3(1.0, 1.0);
	conv1_0[gxy] = f0(pt, pos, s0_0, s0_1, s0_2, s0_3, s0_4, s0_5, s0_6, s0_7, s0_8, s1_0, s1_1, s1_2, s1_3, s1_4, s1_5, s1_6, s1_7, s1_8, s2_0, s2_1, s2_2, s2_3, s2_4, s2_5, s2_6, s2_7, s2_8, s3_0, s3_1, s3_2, s3_3, s3_4, s3_5, s3_6, s3_7, s3_8);
	conv1_1[gxy] = f1(pt, pos, s0_0, s0_1, s0_2, s0_3, s0_4, s0_5, s0_6, s0_7, s0_8, s1_0, s1_1, s1_2, s1_3, s1_4, s1_5, s1_6, s1_7, s1_8, s2_0, s2_1, s2_2, s2_3, s2_4, s2_5, s2_6, s2_7, s2_8, s3_0, s3_1, s3_2, s3_3, s3_4, s3_5, s3_6, s3_7, s3_8);
	conv1_2[gxy] = f2(pt, pos, s0_0, s0_1, s0_2, s0_3, s0_4, s0_5, s0_6, s0_7, s0_8, s1_0, s1_1, s1_2, s1_3, s1_4, s1_5, s1_6, s1_7, s1_8, s2_0, s2_1, s2_2, s2_3, s2_4, s2_5, s2_6, s2_7, s2_8, s3_0, s3_1, s3_2, s3_3, s3_4, s3_5, s3_6, s3_7, s3_8);
	conv1_3[gxy] = f3(pt, pos, s0_0, s0_1, s0_2, s0_3, s0_4, s0_5, s0_6, s0_7, s0_8, s1_0, s1_1, s1_2, s1_3, s1_4, s1_5, s1_6, s1_7, s1_8, s2_0, s2_1, s2_2, s2_3, s2_4, s2_5, s2_6, s2_7, s2_8, s3_0, s3_1, s3_2, s3_3, s3_4, s3_5, s3_6, s3_7, s3_8);
}
//!PASS 4
//!DESC CuNNy-1x16-NVL-down
//!BLOCK_SIZE 8
//!NUM_THREADS 64
//!IN conv1_0, conv1_1, conv1_2, conv1_3
//!OUT down
#define O(t, p) t.SampleLevel(SP, pos + p * pt, 0)
#define l0(x, y) O(conv1_0, float2(x, y))
#define l1(x, y) O(conv1_1, float2(x, y))
#define l2(x, y) O(conv1_2, float2(x, y))
#define l3(x, y) O(conv1_3, float2(x, y))
float4 f0(float2 pt, float2 pos, float4 s0_0, float4 s0_1, float4 s0_2, float4 s0_3, float4 s0_4, float4 s0_5, float4 s0_6, float4 s0_7, float4 s0_8, float4 s1_0, float4 s1_1, float4 s1_2, float4 s1_3, float4 s1_4, float4 s1_5, float4 s1_6, float4 s1_7, float4 s1_8, float4 s2_0, float4 s2_1, float4 s2_2, float4 s2_3, float4 s2_4, float4 s2_5, float4 s2_6, float4 s2_7, float4 s2_8, float4 s3_0, float4 s3_1, float4 s3_2, float4 s3_3, float4 s3_4, float4 s3_5, float4 s3_6, float4 s3_7, float4 s3_8) {
	float4 r = 0.0;
	r += mul(s0_0, float4x4(-0.022390643134713173, -0.0009009336936287582, -0.0021087871864438057, 0.001997664337977767, -0.001210107235237956, 0.0017386784311383963, -0.0010312017984688282, -0.0014601746806874871, -0.8759870529174805, 0.7242971658706665, 0.05084982141852379, 0.35282617807388306, 0.017996113747358322, -0.0037473696283996105, 0.004247657023370266, 0.006923362612724304));
	r += mul(s0_1, float4x4(-0.06380891054868698, -0.0380142480134964, 0.0744820162653923, 0.02249906025826931, 0.009060713462531567, -0.040152665227651596, 0.0117949228733778, 0.004414346534758806, -0.19097907841205597, 0.415578693151474, -0.11992698907852173, 0.058623697608709335, -0.03427974134683609, 0.021410338580608368, 0.008763856254518032, 0.010026349686086178));
	r += mul(s0_2, float4x4(-0.005746842827647924, 0.018153265118598938, -0.00639291713014245, -0.05442143604159355, 0.00044724135659635067, 0.015321850776672363, -0.0015810367185622454, 0.0002998564450535923, -0.002934277057647705, -0.02275160141289234, 0.0066838511265814304, -0.014206953346729279, 0.021910585463047028, 0.11694075912237167, -0.031344763934612274, -0.04402729123830795));
	r += mul(s0_3, float4x4(0.0614047646522522, 0.007049097213894129, -0.003071970073506236, -0.023853112012147903, 0.008657648228108883, -0.005176055710762739, 0.011287367902696133, -0.002957314718514681, 0.054669372737407684, 0.16673876345157623, -0.8887326717376709, 0.741609513759613, -0.041626982390880585, 0.007279189303517342, -0.01872115582227707, 0.017256388440728188));
	r += mul(s0_4, float4x4(-0.13349752128124237, 0.3955122232437134, -0.6409155130386353, -0.06907468289136887, 0.14453649520874023, 0.0925559252500534, -0.023857351392507553, -0.05489835888147354, 0.43624216318130493, -0.7051478624343872, 0.23975765705108643, 0.058956827968358994, 0.1066889539361, -0.16162097454071045, 0.16789792478084564, -0.09400458633899689));
	r += mul(s0_5, float4x4(0.044859379529953, -0.10301784425973892, 0.06420635432004929, -0.007486904039978981, 0.024363722652196884, -0.07405152171850204, 0.012975371442735195, 0.009064586833119392, -0.08036791533231735, 0.08230263739824295, -0.01742185465991497, -0.06952446699142456, -0.07175587117671967, 0.32910215854644775, 0.02181256376206875, 0.5722656846046448));
	r += mul(s0_6, float4x4(0.0036953913513571024, -0.0023738357704132795, 0.0012505390914157033, 0.0023725812789052725, -0.04182615503668785, -0.007531854324042797, -0.01660306565463543, 0.011821108870208263, -0.04834624379873276, -0.048277270048856735, 0.2824917733669281, -0.03981013968586922, -0.0022545529063791037, 0.006667639594525099, 0.00018607052334118634, 0.0005223362240940332));
	r += mul(s0_7, float4x4(-0.02021649107336998, -0.004048640374094248, 0.00013024668442085385, 0.026558401063084602, 0.06785131990909576, -0.27806973457336426, 0.7065082788467407, 0.05356477200984955, -0.047762706875801086, 0.21953316032886505, -0.07044766843318939, -0.12130537629127502, 0.008054178208112717, -0.004200668539851904, 0.001370513578876853, -0.016300683841109276));
	r += mul(s0_8, float4x4(0.013226768001914024, -0.0019994766917079687, -0.0007889288826845586, -0.023746753111481667, -0.0835704430937767, 0.06468699872493744, -0.07893837243318558, 0.23150208592414856, 0.0073900786228477955, -0.04603205621242523, -0.024114789441227913, 0.13197162747383118, -0.005352097563445568, -0.003703546244651079, -0.0016936591127887368, 0.013844477012753487));
	r += mul(s1_0, float4x4(0.0901232585310936, 0.0042282291688025, 0.021848164498806, 0.05167122557759285, -3.9227583329193294e-05, 0.015582067891955376, -0.0345863401889801, 0.0033902134746313095, 0.017721204087138176, 0.0106238704174757, -0.02142277918756008, 0.044171933084726334, 0.09713345021009445, -0.07300496101379395, -0.06687891483306885, -0.029206009581685066));
	r += mul(s1_1, float4x4(0.08759499341249466, 0.1909971833229065, -0.04301813989877701, -0.14586007595062256, -0.004035062622278929, 0.03381530940532684, -0.004851724021136761, -0.023987911641597748, -0.034408193081617355, -0.03419368341565132, -0.10143084079027176, 0.11437614262104034, -0.14214670658111572, 0.017003268003463745, -0.13646414875984192, 0.21466891467571259));
	r += mul(s1_2, float4x4(0.008931770920753479, -0.009119747206568718, 0.007883107289671898, 0.03535499423742294, 0.0011212293757125735, 0.0005711062694899738, 0.0020982164423912764, 0.0001137801373261027, -0.0408431813120842, 0.23311156034469604, -0.05298394709825516, 0.10234840959310532, -0.05408136174082756, 0.29416200518608093, -0.003218136029317975, -0.06540174037218094));
	r += mul(s1_3, float4x4(-0.20783738791942596, -0.0635688528418541, 0.12077085673809052, 0.13803906738758087, -0.525615394115448, 0.09339818358421326, 0.161631777882576, 0.12254874408245087, -0.09950647503137589, 0.12535971403121948, 0.0916900560259819, 0.02745489962399006, -0.061714086681604385, 0.11455424129962921, 0.321296751499176, -0.10183247923851013));
	r += mul(s1_4, float4x4(-1.1250053644180298, -0.6594316959381104, 1.2874906063079834, 0.5421750545501709, 0.10962235927581787, -0.5567936897277832, 0.05092170834541321, 0.11851410567760468, 0.4805977940559387, -0.4472881257534027, 0.25720304250717163, -0.36923766136169434, 1.193880558013916, -0.88181072473526, 0.5122570395469666, -0.7646469473838806));
	r += mul(s1_5, float4x4(-0.07295216619968414, -0.6723060011863708, 0.026793185621500015, 0.7349205613136292, -0.0045042517594993114, -0.0010495380265638232, 0.0028413464315235615, -0.0018378790700808167, -0.04610341787338257, 0.11027957499027252, -0.04870591312646866, 0.20554135739803314, -0.08329280465841293, -0.009009215049445629, -0.15754680335521698, 0.2591707110404968));
	r += mul(s1_6, float4x4(-0.01309281587600708, -0.02171766757965088, -0.07166992127895355, -0.04383736476302147, 0.02738734893500805, 0.13958337903022766, -0.2026388943195343, 0.06960991024971008, -0.1224948987364769, 0.06671687960624695, -0.2767057418823242, 0.14941291511058807, -0.2510873079299927, 0.24102866649627686, -0.47950008511543274, 0.3882501721382141));
	r += mul(s1_7, float4x4(-0.07334905117750168, -0.08586766570806503, 0.05305561050772667, 0.19883057475090027, 0.0024954183027148247, -0.003911327105015516, 0.01884307898581028, -0.11708350479602814, -0.12563204765319824, 0.15163415670394897, 0.13991810381412506, -0.06119801849126816, -0.05928392708301544, 0.054453544318675995, 0.4251098930835724, -0.22641970217227936));
	r += mul(s1_8, float4x4(0.1398470103740692, 0.2039538323879242, -0.21018683910369873, -0.32431265711784363, -0.0026609532069414854, -0.0019036673475056887, 0.0010499509517103434, -0.00011481675755931064, -0.011748623102903366, 0.07520753145217896, -0.003873651148751378, 0.057186760008335114, 0.0022862369660288095, 0.0020711191464215517, -0.021181615069508553, -0.0527937225997448));
	r += mul(s2_0, float4x4(0.033974651247262955, 0.018991699442267418, 0.000883356377016753, -0.0031383605673909187, 0.017046164721250534, 0.0002917298988904804, -0.013999255374073982, 0.0047103469260036945, -0.00488427234813571, 0.004778704140335321, -0.010206231847405434, -0.0026171570643782616, -0.21423986554145813, -0.18978768587112427, 0.1343374103307724, 0.16456037759780884));
	r += mul(s2_1, float4x4(-0.015208004042506218, 0.05624762922525406, -0.02218949981033802, 0.03130196034908295, -0.0309456717222929, 0.18805988132953644, 0.16083621978759766, -0.08428528904914856, -0.001409193268045783, -0.04925215244293213, 0.020080380141735077, -0.0005343458615243435, 0.01631554402410984, 0.0755566954612732, -0.052121054381132126, -0.053799789398908615));
	r += mul(s2_2, float4x4(0.06518781930208206, -0.11949743330478668, 0.019387340173125267, -0.014384354464709759, -0.37793296575546265, -0.46369391679763794, 0.38996422290802, 0.5617203116416931, 0.0010843649506568909, -0.017632482573390007, -0.000302224128972739, 0.013321476988494396, -0.037218689918518066, -0.08870529383420944, 0.006688312627375126, 0.032744262367486954));
	r += mul(s2_3, float4x4(0.12942902743816376, -0.05059575289487839, 0.07446099817752838, -0.029812907800078392, -0.10408685356378555, -0.08079542964696884, 0.026868008077144623, 0.033703625202178955, 0.031365443021059036, 0.032939452677965164, -0.002974984236061573, -0.02288745902478695, 0.8597297668457031, 0.1382445991039276, -0.824271023273468, -0.16594788432121277));
	r += mul(s2_4, float4x4(-0.8200638294219971, 0.9501063227653503, -0.3243553936481476, 0.21027930080890656, 0.9850946664810181, 0.25991013646125793, -0.8855107426643372, -0.3299657702445984, 0.8211194276809692, 0.3339621424674988, -0.1737155020236969, -0.23098352551460266, 0.5995225310325623, 1.3109519481658936, -0.7847517728805542, -1.2629306316375732));
	r += mul(s2_5, float4x4(0.013925675302743912, -0.046631913632154465, 0.06909387558698654, -0.11344768106937408, -0.0840127170085907, 0.5277249813079834, 0.12015238404273987, -0.38182005286216736, -0.09487651288509369, 0.236951544880867, -0.0362880565226078, -0.06664963066577911, 0.13538730144500732, 0.22012004256248474, -0.11175216734409332, -0.2580202519893646));
	r += mul(s2_6, float4x4(0.0862247496843338, -0.03293641284108162, 0.0775974914431572, -0.05795915052294731, -0.012197582982480526, -0.007620346732437611, 0.1419757455587387, -0.0442010797560215, 0.020521221682429314, -0.026749510318040848, 0.024449901655316353, 0.006107706110924482, -0.01077344361692667, 0.014892199076712132, -0.003561531426385045, 0.03998376056551933));
	r += mul(s2_7, float4x4(-0.26426252722740173, 0.13085214793682098, -0.7461650371551514, 0.9227038025856018, -0.07104537636041641, -0.13393634557724, -0.031372230499982834, 0.21050246059894562, -0.10702977329492569, -0.1430664211511612, 0.14989788830280304, 0.08837101608514786, -0.018891096115112305, -0.029895436018705368, 0.1914568543434143, 0.028072096407413483));
	r += mul(s2_8, float4x4(0.015062875114381313, -0.1022162213921547, 0.005458196625113487, -0.04972933977842331, 0.01837042346596718, -0.010768464766442776, 0.015381387434899807, -0.018519427627325058, 0.004100095946341753, 0.04064815118908882, 0.002953900024294853, -0.02343551069498062, 0.005788540001958609, 0.006947649642825127, -0.00545146781951189, 0.1597692221403122));
	r += mul(s3_0, float4x4(0.04771638289093971, 0.021497000008821487, 0.040035273879766464, 0.0036552557721734047, 0.002008266979828477, -0.002557750791311264, 0.0016816884744912386, 0.002280639950186014, -0.3059017062187195, 0.14196160435676575, -0.14891023933887482, 0.10770273953676224, 0.022476721554994583, -0.0017065952997654676, 0.03240088000893593, 0.028031514957547188));
	r += mul(s3_1, float4x4(-0.03630095720291138, -0.04039837792515755, 0.0015541843604296446, 0.09839286655187607, -0.004918100778013468, 0.03722330182790756, -0.013255453668534756, -0.005057529080659151, 0.4072900116443634, -0.33920231461524963, -0.01100160926580429, 0.059510115534067154, 0.09562133997678757, 0.034479834139347076, -0.06312578171491623, -0.026667341589927673));
	r += mul(s3_2, float4x4(-0.0035733741242438555, -0.0018359975656494498, 0.0020394260063767433, -0.001103629358112812, 2.129364656866528e-05, -0.010322371497750282, 0.005229840520769358, -0.00035380199551582336, -0.0021994600538164377, -0.05144335329532623, 0.0173946600407362, 0.03281017392873764, 0.007533847354352474, 0.09204023331403732, -0.038164932280778885, -0.05326201766729355));
	r += mul(s3_3, float4x4(0.04431139677762985, 0.007867952808737755, -0.07730017602443695, 0.05966367945075035, -0.03642769157886505, 0.0031804360914975405, 0.005367973353713751, 0.008881877176463604, 0.2744466960430145, -0.10279237478971481, 0.130497008562088, -0.10325321555137634, 0.060689929872751236, 0.11640792340040207, 0.10424491763114929, -0.09913381189107895));
	r += mul(s3_4, float4x4(0.05564777925610542, -0.22610630095005035, 0.012304764240980148, -0.5923098921775818, -0.5537790060043335, -0.4752044975757599, -0.004778641741722822, 0.17111508548259735, 0.5187802910804749, -0.6456891298294067, 0.8818111419677734, -1.0580742359161377, -0.5327861905097961, -0.34610986709594727, 0.22945888340473175, 0.6150423884391785));
	r += mul(s3_5, float4x4(0.005155880935490131, -0.0006732644396834075, -0.006110744085162878, 0.0011910924222320318, 0.07684540748596191, 0.03550906479358673, 0.004720882046967745, -0.10060174018144608, -0.011165926232933998, 0.03958053141832352, -0.03185027092695236, -0.10197094827890396, 0.00747785484418273, -0.10546493530273438, 0.005325287114828825, -0.06741230934858322));
	r += mul(s3_6, float4x4(0.004504368174821138, 0.007733845617622137, 0.0026625776663422585, -0.03527944162487984, -0.003854072652757168, 0.0037889378145337105, -0.009557422250509262, -0.009942462667822838, -0.018250038847327232, -0.005408899858593941, -0.036548200994729996, -0.00320741580799222, 0.37150394916534424, 0.03612958639860153, -0.4721309244632721, -0.06989327818155289));
	r += mul(s3_7, float4x4(-0.0028751620557159185, -0.0030761417001485825, -0.003593549132347107, 0.02386353351175785, 0.047849733382463455, 0.09418308734893799, -0.14982841908931732, -0.07188384234905243, 0.08134431391954422, -0.08654985576868057, 0.15098334848880768, -0.1690026819705963, -0.015010650269687176, 0.2883768677711487, 0.1107277050614357, -0.28646570444107056));
	r += mul(s3_8, float4x4(0.0009352695196866989, 0.002603520406410098, 0.0008854684419929981, -9.735047933645546e-05, 0.00155258912127465, 0.0003032879903912544, -0.006905087269842625, 0.00901007279753685, -0.015711378306150436, 0.05741218477487564, -0.028565609827637672, 0.04444563016295433, -0.03156047686934471, -0.04447479918599129, 0.0005867204745300114, 0.11467928439378738));
	r += float4(-1.408291439020104e-08, -1.4393732428175099e-08, -1.4110688617563483e-08, -1.2125273229912636e-08);
	return tanh(r);
}
void Pass4(uint2 blockStart, uint3 tid) {
	float2 pt = float2(GetInputPt());
	uint2 gxy = Rmp8x8(tid.x) + blockStart;
	uint2 size = GetInputSize();
	if (gxy.x >= size.x || gxy.y >= size.y) {
		return;
	}
	float2 pos = (gxy + 0.5) * pt;
	float4 s0_0 = l0(-1.0, -1.0);
	float4 s0_1 = l0(0.0, -1.0);
	float4 s0_2 = l0(1.0, -1.0);
	float4 s0_3 = l0(-1.0, 0.0);
	float4 s0_4 = l0(0.0, 0.0);
	float4 s0_5 = l0(1.0, 0.0);
	float4 s0_6 = l0(-1.0, 1.0);
	float4 s0_7 = l0(0.0, 1.0);
	float4 s0_8 = l0(1.0, 1.0);
	float4 s1_0 = l1(-1.0, -1.0);
	float4 s1_1 = l1(0.0, -1.0);
	float4 s1_2 = l1(1.0, -1.0);
	float4 s1_3 = l1(-1.0, 0.0);
	float4 s1_4 = l1(0.0, 0.0);
	float4 s1_5 = l1(1.0, 0.0);
	float4 s1_6 = l1(-1.0, 1.0);
	float4 s1_7 = l1(0.0, 1.0);
	float4 s1_8 = l1(1.0, 1.0);
	float4 s2_0 = l2(-1.0, -1.0);
	float4 s2_1 = l2(0.0, -1.0);
	float4 s2_2 = l2(1.0, -1.0);
	float4 s2_3 = l2(-1.0, 0.0);
	float4 s2_4 = l2(0.0, 0.0);
	float4 s2_5 = l2(1.0, 0.0);
	float4 s2_6 = l2(-1.0, 1.0);
	float4 s2_7 = l2(0.0, 1.0);
	float4 s2_8 = l2(1.0, 1.0);
	float4 s3_0 = l3(-1.0, -1.0);
	float4 s3_1 = l3(0.0, -1.0);
	float4 s3_2 = l3(1.0, -1.0);
	float4 s3_3 = l3(-1.0, 0.0);
	float4 s3_4 = l3(0.0, 0.0);
	float4 s3_5 = l3(1.0, 0.0);
	float4 s3_6 = l3(-1.0, 1.0);
	float4 s3_7 = l3(0.0, 1.0);
	float4 s3_8 = l3(1.0, 1.0);
	down[gxy] = f0(pt, pos, s0_0, s0_1, s0_2, s0_3, s0_4, s0_5, s0_6, s0_7, s0_8, s1_0, s1_1, s1_2, s1_3, s1_4, s1_5, s1_6, s1_7, s1_8, s2_0, s2_1, s2_2, s2_3, s2_4, s2_5, s2_6, s2_7, s2_8, s3_0, s3_1, s3_2, s3_3, s3_4, s3_5, s3_6, s3_7, s3_8);
}
//!PASS 5
//!DESC CuNNy-1x16-NVL-shuffle
//!STYLE PS
//!IN down, INPUT, easu
float4 Pass5(float2 pos) {
	float2 pt = float2(GetInputPt());
	const static float3x3 rgb2yuv = {0.299, 0.587, 0.114, -0.169, -0.331, 0.5, 0.5, -0.419, -0.081};
	const static float3x3 yuv2rgb = {1, -0.00093, 1.401687, 1, -0.3437, -0.71417, 1, 1.77216, 0.00099};
	float4 r = 0.0;
	float2 size = float2(GetInputSize());
	float2 f = frac(pos * size);
	float3 yuv = mul(rgb2yuv, INPUT.SampleLevel(SL, pos, 0).rgb);
	int2 i = int2(f * 2.0);
	r.r = down.SampleLevel(SP, (float2(0.5, 0.5) - f) * pt + pos, 0)[2*i.y + i.x];
	r.r += easu.SampleLevel(SP, pos, 0).r;
	r.a = 1.0;
	r.r = clamp(r, 0.0, 1.0);
	float3 px = mul(yuv2rgb, float3(r.r, yuv.yz));
	return float4(px, 1.0);
}
