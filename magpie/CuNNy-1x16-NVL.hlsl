// CuNNy 1x16 NVL
// Copyright (c) 2024 cunnyplapper

// This program is free software; you can redistribute it and/or
// modify it under the terms of the GNU Lesser General Public
// License as published by the Free Software Foundation; either
// version 3.0 of the License, or (at your option) any later version.
// 
// This program is distributed in the hope that it will be useful,
// but WITHOUT ANY WARRANTY; without even the implied warranty of
// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
// Lesser General Public License for more details.
// 
// You should have received a copy of the GNU Lesser General Public
// License along with this program.  If not, see <https://www.gnu.org/licenses/>.
/* ------------------------------------------------------------------- */

//!MAGPIE EFFECT
//!VERSION 3
//!OUTPUT_WIDTH INPUT_WIDTH * 2
//!OUTPUT_HEIGHT INPUT_HEIGHT * 2

//!TEXTURE
Texture2D INPUT;

//!TEXTURE
//!WIDTH INPUT_WIDTH * 2
//!HEIGHT INPUT_HEIGHT * 2
//!FORMAT R16_FLOAT
Texture2D easu;

//!SAMPLER
//!FILTER POINT
SamplerState SP;

//!SAMPLER
//!FILTER LINEAR
SamplerState SL;

//!TEXTURE
//!WIDTH INPUT_WIDTH
//!HEIGHT INPUT_HEIGHT
//!FORMAT R16G16B16A16_FLOAT
Texture2D up_0;

//!TEXTURE
//!WIDTH INPUT_WIDTH
//!HEIGHT INPUT_HEIGHT
//!FORMAT R16G16B16A16_FLOAT
Texture2D up_1;

//!TEXTURE
//!WIDTH INPUT_WIDTH
//!HEIGHT INPUT_HEIGHT
//!FORMAT R16G16B16A16_FLOAT
Texture2D up_2;

//!TEXTURE
//!WIDTH INPUT_WIDTH
//!HEIGHT INPUT_HEIGHT
//!FORMAT R16G16B16A16_FLOAT
Texture2D up_3;

//!TEXTURE
//!WIDTH INPUT_WIDTH
//!HEIGHT INPUT_HEIGHT
//!FORMAT R16G16B16A16_FLOAT
Texture2D conv1_0;

//!TEXTURE
//!WIDTH INPUT_WIDTH
//!HEIGHT INPUT_HEIGHT
//!FORMAT R16G16B16A16_FLOAT
Texture2D conv1_1;

//!TEXTURE
//!WIDTH INPUT_WIDTH
//!HEIGHT INPUT_HEIGHT
//!FORMAT R16G16B16A16_FLOAT
Texture2D conv1_2;

//!TEXTURE
//!WIDTH INPUT_WIDTH
//!HEIGHT INPUT_HEIGHT
//!FORMAT R16G16B16A16_FLOAT
Texture2D conv1_3;

//!TEXTURE
//!WIDTH INPUT_WIDTH
//!HEIGHT INPUT_HEIGHT
//!FORMAT R16G16B16A16_FLOAT
Texture2D down;

// FSR mpv | modified
// Copyright (c) 2021 Advanced Micro Devices, Inc. All rights reserved.
//
// Permission is hereby granted, free of charge, to any person obtaining a copy
// of this software and associated documentation files (the "Software"), to deal
// in the Software without restriction, including without limitation the rights
// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
// copies of the Software, and to permit persons to whom the Software is
// furnished to do so, subject to the following conditions:
//
// The above copyright notice and this permission notice shall be included in
// all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
// THE SOFTWARE.

// FidelityFX FSR v1.0.2 by AMD
// ported to mpv by agyild

//!PASS 1
//!STYLE PS
//!IN INPUT
//!OUT easu

float GetLuma(float3 rgb) {
	return dot(float3(0.299, 0.587, 0.114), rgb);
}

float APrxLoRcpF1(float a) {
	return asfloat(uint(0x7ef07ebb) - asuint(a));
}

float APrxLoRsqF1(float a) {
	return asfloat(uint(0x5f347d74) - (asuint(a) >> uint(1)));
}

float AMin3F1(float x, float y, float z) {

	return min(x, min(y, z));
}

float AMax3F1(float x, float y, float z) {
	return max(x, max(y, z));
}

void tap(inout float aC, inout float aW, float2 off, float2 dir, float2 len,
         float lob, float clp, float c){
	float2 v;
	v.x = (off.x * ( dir.x)) + (off.y * dir.y);
	v.y = (off.x * (-dir.y)) + (off.y * dir.x);
	v *= len;
	float d2 = v.x * v.x + v.y * v.y;
	d2 = min(d2, clp);
	float wB = float(2.0 / 5.0) * d2 + -1.0;

	float wA = lob * d2 + -1.0;
	wB *= wB;
	wA *= wA;
	wB = float(25.0 / 16.0) * wB + float(-(25.0 / 16.0 - 1.0));
	float w = wB * wA;
	aC += c * w;
	aW += w;
}

void set(inout float2 dir, inout float len, float2 pp, bool biS, bool biT,
         bool biU, bool biV, float lA, float lB, float lC, float lD, float lE){

	float w = 0.0;
	if (biS)
		w = (1.0 - pp.x) * (1.0 - pp.y);
	if (biT)
		w =        pp.x  * (1.0 - pp.y);
	if (biU)
		w = (1.0 - pp.x) *        pp.y;

	if (biV)
		w =        pp.x  *        pp.y;
	float dc = lD - lC;
	float cb = lC - lB;
	float lenX = max(abs(dc), abs(cb));
	lenX = APrxLoRcpF1(lenX);
	float dirX = lD - lB;
	lenX = clamp(abs(dirX) * lenX, 0.0, 1.0);
	lenX *= lenX;
	float ec = lE - lC;

	float ca = lC - lA;
	float lenY = max(abs(ec), abs(ca));
	lenY = APrxLoRcpF1(lenY);
	float dirY = lE - lA;
	lenY = clamp(abs(dirY) * lenY, 0.0, 1.0);
	lenY *= lenY;
	dir += float2(dirX, dirY) * w;
	len += dot(float2(w, w), float2(lenX, lenY));
}

float4 Pass1(float2 pos) {
	float2 pt = float2(GetInputPt());
	float2 size = float2(GetInputSize());
	float4 pix = float4(0.0, 0.0, 0.0, 1.0);
	float2 pp = pos * size - float2(0.5, 0.5);
	float2 fp = floor(pp);
	pp -= fp;
	float b = GetLuma(INPUT.SampleLevel(SP, float2((fp + float2(0.5, -0.5)) * pt), 0).rgb);
	float c = GetLuma(INPUT.SampleLevel(SP, float2((fp + float2(1.5, -0.5)) * pt), 0).rgb);
	float e = GetLuma(INPUT.SampleLevel(SP, float2((fp + float2(-0.5, 0.5)) * pt), 0).rgb);
	float f = GetLuma(INPUT.SampleLevel(SP, float2((fp + float2( 0.5, 0.5)) * pt), 0).rgb);
	float g = GetLuma(INPUT.SampleLevel(SP, float2((fp + float2( 1.5, 0.5)) * pt), 0).rgb);
	float h = GetLuma(INPUT.SampleLevel(SP, float2((fp + float2( 2.5, 0.5)) * pt), 0).rgb);
	float i = GetLuma(INPUT.SampleLevel(SP, float2((fp + float2(-0.5, 1.5)) * pt), 0).rgb);
	float j = GetLuma(INPUT.SampleLevel(SP, float2((fp + float2( 0.5, 1.5)) * pt), 0).rgb);
	float k = GetLuma(INPUT.SampleLevel(SP, float2((fp + float2( 1.5, 1.5)) * pt), 0).rgb);
	float l = GetLuma(INPUT.SampleLevel(SP, float2((fp + float2( 2.5, 1.5)) * pt), 0).rgb);
	float n = GetLuma(INPUT.SampleLevel(SP, float2((fp + float2(0.5, 2.5) ) * pt), 0).rgb);
	float o = GetLuma(INPUT.SampleLevel(SP, float2((fp + float2(1.5, 2.5) ) * pt), 0).rgb);
	float4 bczzL = float4(b, c, 0.0, 0.0);
	float4 ijfeL = float4(i, j, f, e);
	float4 klhgL = float4(k, l, h, g);
	float4 zzonL = float4(0.0, 0.0, o, n);
	float bL = bczzL.x;
	float cL = bczzL.y;
	float iL = ijfeL.x;
	float jL = ijfeL.y;
	float fL = ijfeL.z;
	float eL = ijfeL.w;
	float kL = klhgL.x;
	float lL = klhgL.y;
	float hL = klhgL.z;
	float gL = klhgL.w;
	float oL = zzonL.z;
	float nL = zzonL.w;
	float2 dir = float2(0.0, 0.0);
	float len = 0.0;
	set(dir, len, pp, true, false, false, false, bL, eL, fL, gL, jL);
	set(dir, len, pp, false, true, false, false, cL, fL, gL, hL, kL);
	set(dir, len, pp, false, false, true, false, fL, iL, jL, kL, nL);
	set(dir, len, pp, false, false, false, true, gL, jL, kL, lL, oL);
	float2 dir2 = dir * dir;
	float dirR = dir2.x + dir2.y;
	bool zro = dirR < float(1.0 / 32768.0);
	dirR = APrxLoRsqF1(dirR);
	dirR = zro ? 1.0 : dirR;
	dir.x = zro ? 1.0 : dir.x;
	dir *= float2(dirR, dirR);
	len = len * 0.5;
	len *= len;
	float stretch = (dir.x * dir.x + dir.y * dir.y) * APrxLoRcpF1(max(abs(dir.x), abs(dir.y)));
	float2 len2 = float2(1.0 + (stretch - 1.0) * len, 1.0 + -0.5 * len);
	float lob = 0.5 + float((1.0 / 4.0 - 0.04) - 0.5) * len;
	float clp = APrxLoRcpF1(lob);
	float aC = 0.0;
	float aW = 0.0;
	tap(aC, aW, float2( 0.0,-1.0) - pp, dir, len2, lob, clp, bL);
	tap(aC, aW, float2( 1.0,-1.0) - pp, dir, len2, lob, clp, cL);
	tap(aC, aW, float2(-1.0, 1.0) - pp, dir, len2, lob, clp, iL);
	tap(aC, aW, float2( 0.0, 1.0) - pp, dir, len2, lob, clp, jL);
	tap(aC, aW, float2( 0.0, 0.0) - pp, dir, len2, lob, clp, fL);
	tap(aC, aW, float2(-1.0, 0.0) - pp, dir, len2, lob, clp, eL);
	tap(aC, aW, float2( 1.0, 1.0) - pp, dir, len2, lob, clp, kL);
	tap(aC, aW, float2( 2.0, 1.0) - pp, dir, len2, lob, clp, lL);
	tap(aC, aW, float2( 2.0, 0.0) - pp, dir, len2, lob, clp, hL);
	tap(aC, aW, float2( 1.0, 0.0) - pp, dir, len2, lob, clp, gL);
	tap(aC, aW, float2( 1.0, 2.0) - pp, dir, len2, lob, clp, oL);
	tap(aC, aW, float2( 0.0, 2.0) - pp, dir, len2, lob, clp, nL);
	pix.r = aC / aW;
	float min1 = min(AMin3F1(fL, gL, jL), kL);
	float max1 = max(AMax3F1(fL, gL, jL), kL);
	pix.r = clamp(pix.r, min1, max1);
	pix.r = clamp(pix.r, 0.0, 1.0);
	return pix;
}

//!PASS 2
//!DESC CuNNy-1x16-NVL-up
//!BLOCK_SIZE 8
//!NUM_THREADS 64
//!IN INPUT
//!OUT up_0, up_1, up_2, up_3
#define O(t, p) t.SampleLevel(SP, pos + p * pt, 0)
#define l0(x, y) dot(float3(0.299, 0.587, 0.114), O(INPUT, float2(x, y)).rgb)
float4 f0(float2 pt, float2 pos, float s0_0, float s0_1, float s0_2, float s0_3, float s0_4, float s0_5, float s0_6, float s0_7, float s0_8) {
	float4 r = 0.0;
	r += float4(0.008702601306140423, 0.016365954652428627, 0.03283684328198433, -0.0669618770480156) * s0_0;
	r += float4(-0.09213659167289734, -0.4126738905906677, -0.01682613044977188, 0.006362367887049913) * s0_1;
	r += float4(0.20264801383018494, 0.0019568351563066244, -0.004349087830632925, 0.056450337171554565) * s0_2;
	r += float4(0.01788944937288761, -0.01678064465522766, 0.05244449898600578, -0.1655152589082718) * s0_3;
	r += float4(0.18797318637371063, 0.4040708839893341, -0.32715076208114624, 0.2787809371948242) * s0_4;
	r += float4(-0.6175962090492249, 0.005272758658975363, -0.2601769268512726, 0.2296072542667389) * s0_5;
	r += float4(-0.010054988786578178, 0.00013956533803138882, -0.08626259863376617, 0.07187584042549133) * s0_6;
	r += float4(-0.03510483354330063, 0.012127053923904896, 0.3583986461162567, -0.19581520557403564) * s0_7;
	r += float4(0.19802404940128326, -0.00845374260097742, 0.24772070348262787, -0.20985615253448486) * s0_8;
	r += float4(0.022596219554543495, -0.0028506210073828697, 0.006760660093277693, 0.0018970442470163107);
	return max(r, 0.0);
}
float4 f1(float2 pt, float2 pos, float s0_0, float s0_1, float s0_2, float s0_3, float s0_4, float s0_5, float s0_6, float s0_7, float s0_8) {
	float4 r = 0.0;
	r += float4(0.0055296337231993675, -0.1965845227241516, 0.02573859877884388, 0.01672075316309929) * s0_0;
	r += float4(-0.01207727286964655, -0.13038906455039978, -0.032225340604782104, 0.005622647702693939) * s0_1;
	r += float4(0.00761294923722744, 0.05973607301712036, 0.004782127216458321, -0.014553100802004337) * s0_2;
	r += float4(0.4306640625, -0.021667523309588432, -0.23291020095348358, -0.008451631292700768) * s0_3;
	r += float4(-0.40454113483428955, 0.36289024353027344, 0.41649699211120605, -0.40124475955963135) * s0_4;
	r += float4(-0.01973273791372776, -0.1147541031241417, -0.23183494806289673, 0.4033394455909729) * s0_5;
	r += float4(-0.011434483341872692, 0.15317541360855103, -0.04337475448846817, -0.00896399188786745) * s0_6;
	r += float4(-0.0003824727318715304, 0.02315683662891388, 0.12115229666233063, -0.03161638602614403) * s0_7;
	r += float4(0.006241488736122847, -0.1443767249584198, -0.02734861522912979, 0.03858184814453125) * s0_8;
	r += float4(-0.0011337298201397061, -0.001246647909283638, -0.0032001922372728586, -0.0007698214612901211);
	return max(r, 0.0);
}
float4 f2(float2 pt, float2 pos, float s0_0, float s0_1, float s0_2, float s0_3, float s0_4, float s0_5, float s0_6, float s0_7, float s0_8) {
	float4 r = 0.0;
	r += float4(-0.023373831063508987, 0.16062696278095245, -0.0033122196327894926, -0.012502622790634632) * s0_0;
	r += float4(-0.28508853912353516, -0.05540823936462402, -0.03430326655507088, -0.07309799641370773) * s0_1;
	r += float4(0.0007800714229233563, 0.30978041887283325, -0.00025965188979171216, 0.0889076516032219) * s0_2;
	r += float4(0.08027224242687225, 0.0004903014050796628, -0.038315992802381516, -0.0021262632217258215) * s0_3;
	r += float4(0.4145231544971466, -0.1870950311422348, 0.533203125, 0.31539440155029297) * s0_4;
	r += float4(0.1065332368016243, -0.19470642507076263, -0.027244534343481064, -0.3056641221046448) * s0_5;
	r += float4(-0.04117823392152786, 0.21144476532936096, 0.009257707744836807, 0.016937920823693275) * s0_6;
	r += float4(-0.20240232348442078, -0.19022375345230103, -0.030958693474531174, 0.2621801793575287) * s0_7;
	r += float4(-0.055120691657066345, -0.0594371035695076, -0.0006719272932969034, -0.28417953848838806) * s0_8;
	r += float4(0.008223285898566246, -0.005480624735355377, -0.4029332399368286, -0.0005714212893508375);
	return max(r, 0.0);
}
float4 f3(float2 pt, float2 pos, float s0_0, float s0_1, float s0_2, float s0_3, float s0_4, float s0_5, float s0_6, float s0_7, float s0_8) {
	float4 r = 0.0;
	r += float4(-0.07001811265945435, -0.008748111315071583, -0.14615817368030548, 0.29199203848838806) * s0_0;
	r += float4(-0.0031118495389819145, 0.022854097187519073, -0.04095162823796272, -0.27876660227775574) * s0_1;
	r += float4(0.07976613938808441, 0.031094277277588844, -0.07717636972665787, -0.11636746674776077) * s0_2;
	r += float4(-0.017956718802452087, -0.07147958129644394, 0.26656782627105713, 0.1951230764389038) * s0_3;
	r += float4(-0.3720702826976776, 0.17375604808330536, -0.08081052452325821, 0.013674959540367126) * s0_4;
	r += float4(0.021664611995220184, 0.05870857834815979, 0.2156297117471695, -0.14570394158363342) * s0_5;
	r += float4(0.0970078855752945, -5.358063697814941, -0.15447589755058289, -0.05718016251921654) * s0_6;
	r += float4(0.36961737275123596, -0.042845163494348526, 0.24471880495548248, 0.008677160367369652) * s0_7;
	r += float4(-0.10229480266571045, -0.023316336795687675, -0.19675883650779724, 0.10229382663965225) * s0_8;
	r += float4(-0.003687748685479164, 0.010405689477920532, -0.008046324364840984, -0.0008109133341349661);
	return max(r, 0.0);
}
void Pass2(uint2 blockStart, uint3 tid) {
	float2 pt = float2(GetInputPt());
	uint2 gxy = Rmp8x8(tid.x) + blockStart;
	uint2 size = GetInputSize();
	if (gxy.x >= size.x || gxy.y >= size.y) {
		return;
	}
	float2 pos = (gxy + 0.5) * pt;
	float s0_0 = l0(-1.0, -1.0);
	float s0_1 = l0(0.0, -1.0);
	float s0_2 = l0(1.0, -1.0);
	float s0_3 = l0(-1.0, 0.0);
	float s0_4 = l0(0.0, 0.0);
	float s0_5 = l0(1.0, 0.0);
	float s0_6 = l0(-1.0, 1.0);
	float s0_7 = l0(0.0, 1.0);
	float s0_8 = l0(1.0, 1.0);
	up_0[gxy] = f0(pt, pos, s0_0, s0_1, s0_2, s0_3, s0_4, s0_5, s0_6, s0_7, s0_8);
	up_1[gxy] = f1(pt, pos, s0_0, s0_1, s0_2, s0_3, s0_4, s0_5, s0_6, s0_7, s0_8);
	up_2[gxy] = f2(pt, pos, s0_0, s0_1, s0_2, s0_3, s0_4, s0_5, s0_6, s0_7, s0_8);
	up_3[gxy] = f3(pt, pos, s0_0, s0_1, s0_2, s0_3, s0_4, s0_5, s0_6, s0_7, s0_8);
}
//!PASS 3
//!DESC CuNNy-1x16-NVL-conv1
//!BLOCK_SIZE 8
//!NUM_THREADS 64
//!IN up_0, up_1, up_2, up_3
//!OUT conv1_0, conv1_1, conv1_2, conv1_3
#define O(t, p) t.SampleLevel(SP, pos + p * pt, 0)
#define l0(x, y) O(up_0, float2(x, y))
#define l1(x, y) O(up_1, float2(x, y))
#define l2(x, y) O(up_2, float2(x, y))
#define l3(x, y) O(up_3, float2(x, y))
float4 f0(float2 pt, float2 pos, float4 s0_0, float4 s0_1, float4 s0_2, float4 s0_3, float4 s0_4, float4 s0_5, float4 s0_6, float4 s0_7, float4 s0_8, float4 s1_0, float4 s1_1, float4 s1_2, float4 s1_3, float4 s1_4, float4 s1_5, float4 s1_6, float4 s1_7, float4 s1_8, float4 s2_0, float4 s2_1, float4 s2_2, float4 s2_3, float4 s2_4, float4 s2_5, float4 s2_6, float4 s2_7, float4 s2_8, float4 s3_0, float4 s3_1, float4 s3_2, float4 s3_3, float4 s3_4, float4 s3_5, float4 s3_6, float4 s3_7, float4 s3_8) {
	float4 r = 0.0;
	r += mul(s0_0, float4x4(-0.07180403918027878, 0.043998539447784424, -0.4545321464538574, 0.0022736757528036833, 0.05173025652766228, 0.016065392643213272, -0.13865892589092255, 0.1050313264131546, -0.30146706104278564, -0.12743626534938812, -0.9862545132637024, -0.02747805044054985, 0.013788839802145958, -0.13653337955474854, 0.5214362144470215, 0.08006256073713303));
	r += mul(s0_1, float4x4(0.04082224518060684, -0.02862965501844883, 0.08608964830636978, -0.11836087703704834, -0.04635735973715782, 0.02103339694440365, -0.39558666944503784, -0.06528020650148392, -0.31169405579566956, -0.16455550491809845, -0.07696762681007385, -0.025916999205946922, 0.026780525222420692, -0.3746839761734009, 0.1769731491804123, 0.05591761693358421));
	r += mul(s0_2, float4x4(-0.07138566672801971, -0.10013178735971451, -0.041510459035634995, 0.028490664437413216, -0.06184897571802139, 0.027673272415995598, -0.017957700416445732, -0.1003241166472435, -0.25433647632598877, 0.1547090858221054, 0.00965750589966774, -0.15773750841617584, -0.030670950189232826, 0.05808396637439728, 0.04234791919589043, 0.18641583621501923));
	r += mul(s0_3, float4x4(-0.04331795871257782, -0.13955582678318024, -0.16449971497058868, -0.1556278020143509, -0.03645399957895279, -0.23907078802585602, -0.3352148234844208, 0.11964096873998642, -0.4168165922164917, 0.04133564233779907, 0.0645124539732933, 0.24850162863731384, -0.16002771258354187, -0.021199766546487808, -0.22165849804878235, -0.4188500940799713));
	r += mul(s0_4, float4x4(0.014789712615311146, -1.1752887964248657, -0.011337723582983017, -0.057150572538375854, 0.023073997348546982, 0.6540632843971252, 0.06259822100400925, 0.32095879316329956, -0.3142751157283783, -0.6505504846572876, -0.02009049989283085, 0.4026661515235901, -0.019811440259218216, -0.25887531042099, -0.3476216197013855, -0.10524610430002213));
	r += mul(s0_5, float4x4(-0.04581647366285324, 0.11840545386075974, -0.042191874235868454, -0.00971105694770813, -0.013833749108016491, -0.19190633296966553, -0.12653280794620514, 0.4161851406097412, -0.17254456877708435, -0.008810486644506454, -0.06467512995004654, 0.22997918725013733, -0.05736508592963219, 0.2609529197216034, 0.13134339451789856, -0.3610893487930298));
	r += mul(s0_6, float4x4(-0.03489461913704872, 0.02715698443353176, 0.07537921518087387, -2.1991524696350098, 0.013212439604103565, -0.5604785084724426, -0.1639115810394287, -0.4961082935333252, -0.39502114057540894, -0.11960935592651367, 0.02958778291940689, -0.37648528814315796, -0.10780390352010727, 0.008148586377501488, -0.04490816220641136, 0.09503767639398575));
	r += mul(s0_7, float4x4(0.09109277278184891, 0.03254139795899391, -0.004992378875613213, -0.156198188662529, 0.033337295055389404, 0.36257413029670715, 0.24759817123413086, 0.13835479319095612, -0.23616304993629456, -0.04304903373122215, -0.13561609387397766, -0.516080915927887, 0.05125361680984497, -0.07142429798841476, -0.08882251381874084, -0.03166653588414192));
	r += mul(s0_8, float4x4(-0.0675506666302681, 0.029273802414536476, 0.030743498355150223, 0.22823379933834076, -0.07724989205598831, 1.202492117881775, 0.11480802297592163, -0.19209565222263336, -0.2726999521255493, -0.012293044477701187, -0.020769312977790833, -0.1287994086742401, 0.031104441732168198, 0.15952806174755096, -0.03593730926513672, -0.26911744475364685));
	r += mul(s1_0, float4x4(0.0571344755589962, -0.015543492510914803, -0.30611884593963623, 0.204832062125206, -0.0978950634598732, -0.08952481299638748, -0.284834086894989, -0.14518040418624878, 0.01456360798329115, 0.1562514752149582, -0.20884671807289124, 0.008793432265520096, -0.01168533693999052, 0.13672015070915222, -0.03983922302722931, 0.029940683394670486));
	r += mul(s1_1, float4x4(0.01066790521144867, 0.1470276564359665, 1.2212659120559692, 0.0944637805223465, -0.19116652011871338, -0.12554898858070374, -0.16313055157661438, -0.20982424914836884, -0.01618531160056591, 0.20557129383087158, -0.18383339047431946, 0.15814273059368134, -0.039105985313653946, -0.23487485945224762, -1.2682149410247803, -0.08600111305713654));
	r += mul(s1_2, float4x4(0.035842303186655045, 0.1302500218153, 0.3058329224586487, -0.22019609808921814, -0.011812597513198853, 0.13538485765457153, 0.15103964507579803, 0.08529530465602875, 0.007435931824147701, -0.019819745793938637, 0.0664791539311409, 0.21529170870780945, -0.11999701708555222, 0.03996234014630318, -0.06955345720052719, -0.20759426057338715));
	r += mul(s1_3, float4x4(0.05356130376458168, -0.13352885842323303, -0.02154519408941269, 0.0075322287157177925, -0.0022059574257582426, -0.1464349329471588, -0.0014091016491875052, 0.11997221410274506, 0.029610615223646164, 0.06707289069890976, -0.018088845536112785, -0.29350927472114563, -0.03553168475627899, -0.11853719502687454, 0.3428453803062439, -0.356640487909317));
	r += mul(s1_4, float4x4(0.00025073031429201365, 0.21868734061717987, 0.5354734063148499, 0.9697751998901367, -0.18794162571430206, 0.06546492129564285, 0.12774626910686493, 0.029087558388710022, -0.05392324551939964, 0.29171431064605713, -0.1415998339653015, -0.06202013045549393, 0.044120240956544876, 0.8535166382789612, 0.44926273822784424, 0.30963924527168274));
	r += mul(s1_5, float4x4(0.0227414108812809, -0.6909453868865967, -0.1997218281030655, -0.04975960776209831, -0.011792389675974846, -0.21944600343704224, -0.011248765513300896, -0.2642670273780823, 0.0018793564522638917, 0.3086082637310028, -0.09553057700395584, -0.18987451493740082, 0.04261370748281479, -0.5883854627609253, -0.007259305566549301, 0.3837863504886627));
	r += mul(s1_6, float4x4(0.02810904011130333, -0.00826598983258009, -0.0030369721353054047, -0.0847126916050911, 0.02499929629266262, -0.07991102337837219, -0.025536950677633286, -0.0477633960545063, -0.022579839453101158, -0.03873738273978233, -0.0126776909455657, 0.1599201261997223, -0.06068382039666176, -0.007915940135717392, -0.19674088060855865, 0.21331991255283356));
	r += mul(s1_7, float4x4(-0.1096375361084938, -0.013675080612301826, -0.2777751386165619, -1.0694036483764648, -0.1453930288553238, -0.12946848571300507, -0.15369465947151184, 0.15363246202468872, 0.021583151072263718, -0.0514325350522995, 0.05944130942225456, 0.14432398974895477, -0.09398175776004791, -0.1901250183582306, -0.24591833353042603, -0.41795027256011963));
	r += mul(s1_8, float4x4(-0.09082885086536407, 0.5410152077674866, 0.08559466153383255, 0.26609814167022705, -0.0317775122821331, -0.29785141348838806, -0.21415401995182037, -0.42023026943206787, 0.030892880633473396, 0.14846773445606232, 0.15189388394355774, 0.09506019949913025, -0.13843180239200592, -0.06163633614778519, 0.024271979928016663, -0.2210560292005539));
	r += mul(s2_0, float4x4(-0.12335710227489471, 0.12761831283569336, 0.5408335328102112, 0.3133281171321869, -0.255404531955719, 0.012696364894509315, 0.1439540535211563, 0.07889380306005478, -0.05073496699333191, -0.06080320477485657, 0.8156052827835083, 0.43848180770874023, -0.041415467858314514, -0.09218957275152206, -0.8535817861557007, -0.48365268111228943));
	r += mul(s2_1, float4x4(-0.051570337265729904, -0.1263297200202942, 0.42284515500068665, 0.002990166423842311, -0.12460703402757645, -0.04649371653795242, -0.27224957942962646, 0.002732970518991351, -0.012207048013806343, 0.17115524411201477, 0.8754120469093323, -0.12019083648920059, 0.02647353522479534, 0.3779292404651642, 0.22020183503627777, 0.010951959528028965));
	r += mul(s2_2, float4x4(0.07317288964986801, -0.1821015328168869, 0.06709609180688858, 0.20059670507907867, -0.15615493059158325, 0.028798121958971024, -0.09856081008911133, 0.011249753646552563, -0.03297773003578186, 0.1719711571931839, -0.045895159244537354, 0.11875475198030472, -0.12933817505836487, -0.10222529619932175, 0.025955265387892723, -0.1928711235523224));
	r += mul(s2_3, float4x4(-0.07662524282932281, 0.20656795799732208, 0.15465965867042542, -0.18703454732894897, -0.12738074362277985, -0.014878938905894756, -0.2386663258075714, -0.1704329252243042, -0.1292838305234909, -0.313024640083313, 0.28969693183898926, 0.5491433143615723, -0.0685117319226265, 0.04514085128903389, 0.20565862953662872, 0.17486581206321716));
	r += mul(s2_4, float4x4(0.00858526211231947, -0.10788137465715408, 0.4141918420791626, -0.4873061180114746, -0.21708175539970398, -0.35456424951553345, -0.1417190581560135, -0.22877457737922668, 0.0651683434844017, -3.048354387283325, -0.4707164764404297, -1.6920380592346191, -0.05109228938817978, -0.3915647268295288, -0.10206575691699982, -0.35276830196380615));
	r += mul(s2_5, float4x4(-0.19376404583454132, 0.044372010976076126, 0.0398838110268116, -0.029658185318112373, -0.24922941625118256, -0.17836369574069977, -0.0032344579230993986, -0.021684549748897552, -0.04150550812482834, 1.227783203125, 0.1350652128458023, -0.6390575766563416, -0.0643756091594696, 0.048058297485113144, -0.07931762933731079, -0.03669687360525131));
	r += mul(s2_6, float4x4(-0.1358087956905365, 0.04882015660405159, -0.08029951900243759, 0.10581182688474655, -0.15112096071243286, 0.023658638820052147, -0.004111595451831818, -0.02244349755346775, -0.03109392710030079, 0.030753284692764282, -0.3069928288459778, -0.38407352566719055, -0.018528690561652184, 0.09052588045597076, 0.12212307006120682, 0.20142608880996704));
	r += mul(s2_7, float4x4(0.014557133428752422, -0.1859043389558792, 0.12050943076610565, -0.1741187870502472, -0.13927441835403442, 0.0643753930926323, -0.07301440089941025, -0.15784066915512085, -0.10831029713153839, 0.24345427751541138, 0.09166935086250305, 1.2404872179031372, 0.023368610069155693, 0.16357311606407166, 0.14697284996509552, 0.44069281220436096));
	r += mul(s2_8, float4x4(-0.05606250464916229, 0.049479201436042786, 0.02908347360789776, 0.05526144430041313, -0.14074108004570007, -0.27219176292419434, -0.08525075763463974, -0.25067204236984253, -0.029411422088742256, 0.46516621112823486, -0.05458902195096016, 0.833614706993103, -0.017277179285883904, 0.061454351991415024, 0.03225960582494736, 0.33105719089508057));
	r += mul(s3_0, float4x4(-0.24276742339134216, 0.1959439367055893, 0.01354424748569727, 0.09016887098550797, -0.052058491855859756, -0.07206244021654129, 0.017396105453372, 0.01274227723479271, -0.009014800190925598, 0.08357392251491547, -0.1635725498199463, 0.06647609174251556, -0.023828497156500816, -0.022123321890830994, 0.07328232377767563, 0.012209131382405758));
	r += mul(s3_1, float4x4(-0.3461694121360779, -0.02636525221168995, 0.47981536388397217, 0.1704767793416977, 0.02088441513478756, 0.3778989315032959, 0.5253961682319641, 0.15919484198093414, 0.015391107648611069, -0.04830043017864227, -0.28783100843429565, -0.30349403619766235, -0.050615131855010986, 0.007710149511694908, 0.01962864026427269, -0.0006912150420248508));
	r += mul(s3_2, float4x4(0.016874738037586212, -0.15013647079467773, -0.05938064679503441, 0.016391484066843987, 0.09332629293203354, 0.06974969804286957, 0.44662564992904663, -0.9121884703636169, 0.0033034170046448708, 0.12144603580236435, 0.1447136402130127, -0.04321055859327316, -0.020574556663632393, -0.043184857815504074, -0.0841374471783638, 0.030422521755099297));
	r += mul(s3_3, float4x4(-0.3410196304321289, 0.2461913675069809, 0.09769594669342041, 0.1840675175189972, 0.11677666008472443, -0.028642119839787483, -0.015945835039019585, 0.27130475640296936, 0.015664583072066307, 0.04897907003760338, 0.10260061919689178, 0.07682278752326965, 0.040467068552970886, 0.03191273286938667, -0.26168468594551086, -0.32125452160835266));
	r += mul(s3_4, float4x4(-0.0008935775840654969, 0.5874898433685303, -0.20930762588977814, -0.18822698295116425, -0.00613392423838377, -0.12216956168413162, 0.10836810618638992, -0.09983185678720474, 0.03343595564365387, -0.19542258977890015, -0.07522295415401459, -0.2946634292602539, -0.01820887252688408, -0.18282286822795868, -0.4420664310455322, -0.017000174149870872));
	r += mul(s3_5, float4x4(-0.21759939193725586, -0.6131671667098999, 0.14394067227840424, 0.29035457968711853, 0.031379036605358124, 0.06705069541931152, -0.25827890634536743, -0.23021136224269867, 0.03941313922405243, -0.09206610918045044, -0.0028249467723071575, 0.03068159706890583, -0.08455084264278412, -0.16215907037258148, 0.10495457798242569, 0.09909287840127945));
	r += mul(s3_6, float4x4(-0.32860633730888367, -0.02017022669315338, -0.04401746764779091, -0.06957387924194336, -0.10029153525829315, 0.09410548955202103, 0.05756857991218567, -0.07834726572036743, 0.05660069361329079, -0.006725332699716091, -0.024548660963773727, 0.18522150814533234, -0.031212789937853813, 0.12211225926876068, 0.20051491260528564, 0.22152762115001678));
	r += mul(s3_7, float4x4(-0.10654445737600327, 0.2933117747306824, -0.001956878462806344, -0.16188791394233704, -0.0036718568298965693, -0.15180324018001556, -0.11273268610239029, -0.19523940980434418, 0.028270389884710312, -0.03561999276280403, 0.09330984205007553, -0.08844392746686935, -0.05066663399338722, 0.060092661529779434, 0.17329388856887817, -0.2853785455226898));
	r += mul(s3_8, float4x4(-0.11974167823791504, -0.06639592349529266, 0.10359813272953033, 0.2574010491371155, 0.03381616249680519, 0.08045244216918945, 0.14309725165367126, 0.390327125787735, -0.04334213212132454, -0.14408597350120544, 0.06857941299676895, -0.07289637625217438, 0.01893417164683342, -0.2919127345085144, -0.09349074959754944, -0.14113277196884155));
	r += float4(-0.01745115965604782, -0.0005252680275589228, -0.015594868920743465, -0.00040947896195575595);
	return max(r, 0.0);
}
float4 f1(float2 pt, float2 pos, float4 s0_0, float4 s0_1, float4 s0_2, float4 s0_3, float4 s0_4, float4 s0_5, float4 s0_6, float4 s0_7, float4 s0_8, float4 s1_0, float4 s1_1, float4 s1_2, float4 s1_3, float4 s1_4, float4 s1_5, float4 s1_6, float4 s1_7, float4 s1_8, float4 s2_0, float4 s2_1, float4 s2_2, float4 s2_3, float4 s2_4, float4 s2_5, float4 s2_6, float4 s2_7, float4 s2_8, float4 s3_0, float4 s3_1, float4 s3_2, float4 s3_3, float4 s3_4, float4 s3_5, float4 s3_6, float4 s3_7, float4 s3_8) {
	float4 r = 0.0;
	r += mul(s0_0, float4x4(0.04082128778100014, -0.04544861614704132, 0.15885944664478302, 0.00896543450653553, -0.3544837534427643, -0.08123427629470825, -0.46385839581489563, 0.02413073368370533, -0.24159236252307892, -0.10723038762807846, -0.5409488081932068, -0.05945225805044174, -0.012583838775753975, -0.13426262140274048, -0.2548406422138214, -0.05322035029530525));
	r += mul(s0_1, float4x4(-0.19781020283699036, 0.11208153516054153, -0.046925533562898636, -0.018591254949569702, -0.4939349889755249, -0.08654246479272842, -0.10769801586866379, 0.026506533846259117, -0.2645186185836792, -0.15560536086559296, -0.175711989402771, -0.10107257217168808, 0.03433987870812416, 0.09748043864965439, -0.40133222937583923, -0.07145703583955765));
	r += mul(s0_2, float4x4(-0.00498811574652791, 0.007793817203491926, -0.07478039711713791, 0.08980072289705276, -0.11813221871852875, -0.029792608693242073, 0.010514245368540287, 0.09835473448038101, 0.028093913570046425, 0.26967689394950867, 0.07673516124486923, 0.01477717887610197, 0.12683041393756866, 0.15873661637306213, -0.04067820683121681, 0.07228031009435654));
	r += mul(s0_3, float4x4(-0.14663466811180115, -0.364490807056427, -0.19203054904937744, -0.010066473856568336, 0.3095719516277313, 0.0663151815533638, -0.4413270652294159, -0.026776665821671486, 0.34922656416893005, -0.6709545850753784, -1.0303665399551392, -0.14292165637016296, -0.19178256392478943, -0.2150835394859314, 0.1428930014371872, -0.12802040576934814));
	r += mul(s0_4, float4x4(0.07443591952323914, -0.304126113653183, -0.020026037469506264, -0.10810627043247223, 0.34805044531822205, 0.302550733089447, 0.19001078605651855, -0.06305906176567078, 0.5659547448158264, -0.24362628161907196, 0.035050228238105774, -0.26601508259773254, 0.35862842202186584, -0.06016159802675247, -0.41660988330841064, -0.03582651540637016));
	r += mul(s0_5, float4x4(-0.011102814227342606, 0.14892995357513428, -0.014376724138855934, 0.026055950671434402, -0.08378750830888748, -0.014431674033403397, 0.014070854522287846, -0.09083402901887894, -0.13137765228748322, 0.40885210037231445, -0.16109716892242432, 0.2359301596879959, -0.011152957566082478, 0.23992925882339478, 0.04446876794099808, 0.003590236883610487));
	r += mul(s0_6, float4x4(0.21157105267047882, 0.023580048233270645, 0.035843271762132645, 0.023526426404714584, 0.06962145119905472, 0.061961427330970764, 1.386717677116394, 0.04220320284366608, -0.3954390287399292, -0.22245319187641144, -0.0023027281276881695, 0.010064869187772274, 0.038898859173059464, -0.15488576889038086, 0.11268428713083267, -0.10755956172943115));
	r += mul(s0_7, float4x4(-0.10133375227451324, 0.05049176514148712, -0.15181870758533478, -0.044398922473192215, 0.012292318977415562, 0.4794640839099884, 1.1558295488357544, 0.06858476996421814, -0.276440292596817, 0.48800987005233765, 0.3660695254802704, -0.030962808057665825, -0.2657126188278198, -0.3087523877620697, -0.024938400834798813, 0.02307010069489479));
	r += mul(s0_8, float4x4(0.06198131665587425, -0.036674730479717255, 0.10546727478504181, 0.09023743867874146, -0.14967375993728638, -0.5342482924461365, 0.08310180902481079, 0.016273129731416702, 0.06633765995502472, -0.00039098551496863365, -0.09932614117860794, -0.0011376674519851804, -0.09669255465269089, 0.03815436735749245, -0.02690742164850235, 0.07424429059028625));
	r += mul(s1_0, float4x4(-0.08151542395353317, -0.042289864271879196, -0.1300254762172699, 0.012317106127738953, -0.072944775223732, -0.13456138968467712, 0.15713053941726685, -0.05932002142071724, 0.22900201380252838, 0.35015544295310974, -0.09946747869253159, 0.004237313289195299, -0.0038193415384739637, 0.3506530225276947, 0.6742122173309326, -0.0349557027220726));
	r += mul(s1_1, float4x4(-0.9706801176071167, 0.08352302014827728, -0.5978811383247375, 0.027674280107021332, 0.37987402081489563, -0.05650480464100838, 0.6305325627326965, -0.027302851900458336, 0.12830650806427002, -0.24865016341209412, 0.01242672186344862, -0.03394779935479164, -0.13512767851352692, -0.04269558936357498, -0.033476267009973526, -0.02920394018292427));
	r += mul(s1_2, float4x4(-0.16693583130836487, 0.1397927701473236, 0.2101408839225769, -0.05722282454371452, 0.10260643064975739, 0.17257557809352875, -0.022964870557188988, -0.020065879449248314, -0.22929899394512177, -0.008902600966393948, 0.024073997512459755, 0.05301060155034065, -0.029666876420378685, -0.16513173282146454, -0.05194391682744026, -0.09824270755052567));
	r += mul(s1_3, float4x4(0.1587231308221817, -0.11348090320825577, -0.6358234286308289, -0.032574400305747986, -0.03876807913184166, -0.11460254341363907, -0.043945785611867905, -0.09443245083093643, -0.16196425259113312, -0.25098028779029846, -0.03206518664956093, -0.06184753030538559, -0.4502861201763153, 0.22976407408714294, -4.2433881759643555, -0.03270652890205383));
	r += mul(s1_4, float4x4(0.5565153360366821, 0.6308614611625671, 0.5723649859428406, -0.048696260899305344, -0.17190231382846832, -0.4150387644767761, 0.40976157784461975, -0.12603993713855743, -0.35839760303497314, -1.0066347122192383, -0.6490697264671326, -0.13380251824855804, 0.30726316571235657, 0.2344953864812851, 0.14913032948970795, 0.19636255502700806));
	r += mul(s1_5, float4x4(-0.30747854709625244, -1.6266329288482666, -0.14905469119548798, -0.16324734687805176, -0.006436408031731844, 0.07037649303674698, 0.009367062710225582, -0.029439162462949753, -0.14445434510707855, -0.32859665155410767, -0.15327899158000946, 0.002787239383906126, -0.01523126196116209, -1.411259412765503, -0.07638697326183319, -0.06935611367225647));
	r += mul(s1_6, float4x4(-0.10122331231832504, -0.03022475726902485, 0.22704799473285675, -0.007948143407702446, -0.08529839664697647, -0.0681876465678215, 0.16736726462841034, -0.024470409378409386, -0.01370951533317566, 0.28568121790885925, -0.07621842622756958, -0.037259817123413086, 0.23185037076473236, 0.39389535784721375, 0.13854128122329712, 0.09012264013290405));
	r += mul(s1_7, float4x4(0.8424491286277771, 0.03140109404921532, -0.1912686973810196, -0.015687178820371628, 0.04819878935813904, 0.3594600260257721, 0.2873966693878174, -0.07108722627162933, 0.13075819611549377, -0.09103922545909882, -0.16940836608409882, -0.03294235095381737, -0.05475389584898949, -0.12530165910720825, 0.07117022573947906, -0.010907096788287163));
	r += mul(s1_8, float4x4(0.3569270074367523, -0.06547116488218307, 0.000793056096881628, -0.10401298105716705, -0.33640313148498535, -0.010609406046569347, 0.22179032862186432, -0.10314317047595978, -0.09825485199689865, 0.07486502081155777, -0.37401363253593445, 0.02786725014448166, -0.07181116938591003, -0.6116787791252136, 0.09002058207988739, 0.012228417210280895));
	r += mul(s2_0, float4x4(0.11479487270116806, 0.3544921278953552, 0.0018858021358028054, -0.005904742516577244, -0.039605893194675446, 0.06540810316801071, -0.011610266752541065, -0.09576724469661713, -0.24698716402053833, 0.3683987557888031, 0.13645724952220917, -0.005911108106374741, 0.40610477328300476, 0.18132320046424866, 0.09155990928411484, -0.04445413500070572));
	r += mul(s2_1, float4x4(0.43270617723464966, 0.0051019019447267056, -0.1862475574016571, -0.06560010462999344, 0.1562889665365219, -0.009199720807373524, -0.051893848925828934, -0.030672535300254822, 0.30249860882759094, -0.05779315531253815, -0.011387993581593037, 0.04016697034239769, 0.15826211869716644, -0.14870348572731018, -0.20369574427604675, -0.1678639054298401));
	r += mul(s2_2, float4x4(0.020511120557785034, 0.021047452464699745, -0.018291302025318146, -0.026345297694206238, -0.06573057174682617, -0.045097436755895615, -0.025217631831765175, -0.09418173134326935, -0.9094135165214539, -0.015000151470303535, -0.11906968802213669, 0.0018130834214389324, 0.12841719388961792, -0.036860495805740356, 0.0894833579659462, -0.008242383599281311));
	r += mul(s2_3, float4x4(-0.22593775391578674, -0.0788414478302002, -0.1335299015045166, -0.01296150591224432, -0.18712075054645538, -0.03983317315578461, -0.2684589922428131, -0.028132662177085876, -0.4962027370929718, -0.6789341568946838, 0.8388521671295166, -0.022812291979789734, -0.865314245223999, 0.24693934619426727, 0.3617933988571167, -0.016675231978297234));
	r += mul(s2_4, float4x4(-0.33518925309181213, 0.4119798243045807, 0.08796905726194382, 0.12973527610301971, -0.23418767750263214, -0.4831194579601288, 0.1874486804008484, -0.18198378384113312, -5.973873138427734, -5.056997299194336, -5.764758110046387, -0.04093799740076065, -0.5711362957954407, 0.5255870819091797, 0.07051224261522293, -0.1599275916814804));
	r += mul(s2_5, float4x4(0.06776279956102371, -0.1292800009250641, 0.048336293548345566, 0.11898719519376755, -0.2103642076253891, -0.2260245382785797, -0.03970010206103325, 0.06362687796354294, -0.2422495037317276, 0.6320395469665527, 0.5457669496536255, 0.02386646158993244, 0.09923574328422546, 0.26434746384620667, 0.14599481225013733, 0.039301060140132904));
	r += mul(s2_6, float4x4(-0.01457599364221096, -0.008514046669006348, -0.08624870330095291, -0.04078007861971855, -0.103464774787426, -0.01167979184538126, -0.0605313740670681, -0.021006250753998756, 0.5487931966781616, 0.24120448529720306, -0.14978858828544617, -0.06169859319925308, -0.05350271984934807, 0.17370659112930298, -0.012708799913525581, 0.022214187309145927));
	r += mul(s2_7, float4x4(0.10716158151626587, 0.13330285251140594, -0.12210296094417572, -0.09565754979848862, -0.12115846574306488, -0.18155567348003387, -0.10047492384910583, 0.003765711560845375, 1.132174015045166, 0.0974351167678833, -0.9857380390167236, -0.004137399606406689, 0.3737086057662964, 0.008483008481562138, -0.034524548798799515, -0.0071956501342356205));
	r += mul(s2_8, float4x4(0.30787473917007446, 0.18221229314804077, 0.05190237611532211, 0.042145371437072754, -0.16015857458114624, -0.1765773594379425, -0.08318261057138443, -0.051035188138484955, 0.9415415525436401, 0.08312239497900009, -0.12522000074386597, 0.082593634724617, 0.16840088367462158, -0.13252490758895874, -0.021731793880462646, 0.010346781462430954));
	r += mul(s3_0, float4x4(-0.1906326860189438, 0.12540777027606964, 0.10150235891342163, -0.08597368746995926, -0.04299718514084816, 0.11668610572814941, 0.09325456619262695, -0.021815501153469086, 0.07938087731599808, 0.08845753222703934, -0.06990278512239456, -0.07357087731361389, 0.03939270228147507, 0.026614854112267494, 0.04305608943104744, -0.022854231297969818));
	r += mul(s3_1, float4x4(-0.49425047636032104, -0.2821398377418518, 0.19917260110378265, -0.24639731645584106, -0.42285192012786865, 0.03696124255657196, 0.4367210566997528, -0.05501473695039749, 0.15117241442203522, -0.2592354118824005, 0.10496661812067032, -0.09357745200395584, 0.09318562597036362, -0.004383321851491928, 0.011796359904110432, -0.025884248316287994));
	r += mul(s3_2, float4x4(-0.04984990507364273, -0.14877966046333313, -0.04828989505767822, 0.05792801454663277, 0.8937454223632812, -1.396594762802124, 0.06952977925539017, 0.02323305606842041, 0.049471817910671234, 0.050879232585430145, 0.26378682255744934, 0.06111903861165047, 0.08556926995515823, -0.06756819039583206, -0.06272755563259125, -0.07695671916007996));
	r += mul(s3_3, float4x4(-0.04555324465036392, 0.27832505106925964, -0.43977469205856323, -0.036398403346538544, 0.27437344193458557, -0.055246371775865555, -0.16643039882183075, -0.11812494695186615, 0.12003079056739807, -0.034247711300849915, -0.06357148289680481, -0.1251114308834076, -0.044198665767908096, 0.09954673796892166, 0.21052829921245575, -0.051316943019628525));
	r += mul(s3_4, float4x4(0.49166369438171387, -0.14112526178359985, -0.9181705117225647, 0.0581996813416481, 0.16673165559768677, 0.18087820708751678, 0.44639909267425537, -0.023698674514889717, -0.45552510023117065, -0.1821146309375763, 0.0037334186490625143, -0.2138475626707077, 0.4171609878540039, -0.3935794532299042, -0.18052542209625244, -0.18382583558559418));
	r += mul(s3_5, float4x4(-0.09673614054918289, -0.6885008811950684, 0.00174449582118541, -0.011731843464076519, -1.617845058441162, -0.3522396683692932, -0.05082366615533829, 0.026783231645822525, 0.08606388419866562, 0.10926725715398788, -0.03153588995337486, -0.02580665796995163, -0.15208934247493744, -0.31536728143692017, -0.12863357365131378, -0.04754605144262314));
	r += mul(s3_6, float4x4(-0.051570504903793335, 0.14111363887786865, -0.03450639173388481, 0.008700803853571415, -0.21153035759925842, -0.0343501940369606, 0.17386779189109802, 0.022110186517238617, 0.027807272970676422, -0.017569562420248985, -0.09888856112957001, -0.01877685636281967, 0.02066066302359104, 0.021030012518167496, -0.1441120207309723, -0.0746726393699646));
	r += mul(s3_7, float4x4(-0.0033438398968428373, -0.1854206919670105, -0.4041268825531006, 0.045946910977363586, 0.308230459690094, 0.10761911422014236, -0.163579523563385, 0.08454664796590805, -0.3994523286819458, 0.1056145653128624, -0.01437861006706953, -0.07062769681215286, -0.2537204325199127, -0.3731737732887268, 0.15576978027820587, -0.039470646530389786));
	r += mul(s3_8, float4x4(0.1208564043045044, -0.41113346815109253, -0.17696233093738556, 0.07671153545379639, -0.22914524376392365, -0.011823936365544796, 0.1428554505109787, 0.029897063970565796, 0.0031898110173642635, 0.30482056736946106, -0.04591169208288193, -0.08252466470003128, -0.24719607830047607, -0.1632935106754303, -0.09344419091939926, -0.08281265944242477));
	r += float4(-0.008618890307843685, -0.009675842709839344, -0.0008566875476390123, -0.21710877120494843);
	return max(r, 0.0);
}
float4 f2(float2 pt, float2 pos, float4 s0_0, float4 s0_1, float4 s0_2, float4 s0_3, float4 s0_4, float4 s0_5, float4 s0_6, float4 s0_7, float4 s0_8, float4 s1_0, float4 s1_1, float4 s1_2, float4 s1_3, float4 s1_4, float4 s1_5, float4 s1_6, float4 s1_7, float4 s1_8, float4 s2_0, float4 s2_1, float4 s2_2, float4 s2_3, float4 s2_4, float4 s2_5, float4 s2_6, float4 s2_7, float4 s2_8, float4 s3_0, float4 s3_1, float4 s3_2, float4 s3_3, float4 s3_4, float4 s3_5, float4 s3_6, float4 s3_7, float4 s3_8) {
	float4 r = 0.0;
	r += mul(s0_0, float4x4(-0.029957523569464684, -1.012373447418213, -0.10876978188753128, 0.21427369117736816, -0.07815411686897278, -0.4659568667411804, -0.3160545825958252, 0.15140555799007416, 0.19901368021965027, -7.2963948249816895, -0.5426434278488159, -0.24897879362106323, 0.020114336162805557, -0.17548197507858276, -0.14638912677764893, -0.20973525941371918));
	r += mul(s0_1, float4x4(-0.10588628053665161, 0.01961149089038372, 0.041110798716545105, -0.022200757637619972, 0.002835678169503808, -0.19138500094413757, 0.017476685345172882, 0.5875542759895325, -0.6206610202789307, -0.5080156922340393, -0.3900928497314453, 0.7240132689476013, -0.4820362627506256, 0.3879910111427307, -0.5539219379425049, -0.0028874757699668407));
	r += mul(s0_2, float4x4(-0.08062685281038284, 0.03344203159213066, -0.0015462577575817704, -0.019636185839772224, 0.04993387684226036, -0.1753731369972229, 0.009887823835015297, -0.17607548832893372, 0.08646335452795029, -0.17067717015743256, 0.2554115056991577, -0.13307996094226837, 0.02661398984491825, 0.06280092149972916, 0.09658659249544144, 0.14384470880031586));
	r += mul(s0_3, float4x4(-0.0417468398809433, -0.39920860528945923, -0.44797268509864807, -0.13815201818943024, -0.771476686000824, 0.3191838264465332, -0.04581214860081673, 0.39394277334213257, 0.2353297770023346, 0.38021740317344666, -0.15702392160892487, 0.06702230870723724, 0.13217765092849731, 0.021593179553747177, 0.033578887581825256, -0.014270665124058723));
	r += mul(s0_4, float4x4(-0.0407571904361248, 0.1392846703529358, 0.24142085015773773, 0.07676611095666885, 0.5448853373527527, -8.817983627319336, -0.016170892864465714, 0.12417517602443695, -0.5137131810188293, -0.23986481130123138, 0.10588310658931732, -0.047641925513744354, -0.4422624707221985, -0.11213129758834839, -1.459549069404602, 0.03846590220928192));
	r += mul(s0_5, float4x4(-0.04927225038409233, -0.007193964906036854, -0.0223044753074646, -0.04365774244070053, 0.6110156178474426, -0.10258867591619492, -0.31888753175735474, -0.34923580288887024, 0.01565375365316868, -0.4611307680606842, 0.10561598837375641, 0.00940778013318777, 0.29180341958999634, 0.4776531457901001, 0.13897569477558136, 0.0313151478767395));
	r += mul(s0_6, float4x4(0.036117177456617355, 0.13217678666114807, -0.11337453126907349, -0.001512895687483251, -0.6508979201316833, 0.5022798776626587, -0.44226959347724915, 0.14071060717105865, 0.00900784321129322, 0.19232529401779175, -0.20901748538017273, -0.04997103288769722, -0.05777963995933533, -0.3040910065174103, -0.04944737255573273, -0.0783049538731575));
	r += mul(s0_7, float4x4(0.03309958428144455, -0.012880963273346424, 0.06523896008729935, -0.018243886530399323, -0.02516564168035984, -0.09785186499357224, 0.642989993095398, 0.2531473636627197, 0.0042198775336146355, -0.056521132588386536, 0.14199699461460114, -0.028630511835217476, -0.14936035871505737, -0.540105938911438, -0.3713605999946594, -0.04720792546868324));
	r += mul(s0_8, float4x4(-0.014963794499635696, 0.0578010231256485, -0.04452209919691086, -0.0330045185983181, 1.1524488925933838, 0.1624325066804886, -0.24333003163337708, -0.1537804901599884, -0.009441968984901905, 0.04687560722231865, 0.07723536342382431, -0.03566491976380348, -0.019191551953554153, -0.027330948039889336, 0.0005345851532183588, 0.03576748073101044));
	r += mul(s1_0, float4x4(-0.24244390428066254, 0.045798737555742264, -0.6480734348297119, 0.1436414271593094, 0.025093307718634605, -0.11589213460683823, -0.19384248554706573, 0.1937159299850464, -0.06855573505163193, 0.45012301206588745, 0.13794659078121185, 0.3847438395023346, 0.08818875998258591, -0.5879718661308289, 0.5717363357543945, -1.0381333827972412));
	r += mul(s1_1, float4x4(-0.024318646639585495, 0.35794201493263245, 0.14156432449817657, 0.6563442945480347, 0.05550181493163109, 0.2646564543247223, 0.2255980372428894, -0.6308589577674866, -0.46741995215415955, 0.8515926003456116, -0.46954065561294556, 0.07951260358095169, 0.42481115460395813, -0.49880436062812805, -0.23721520602703094, 0.39134684205055237));
	r += mul(s1_2, float4x4(0.00025872618425637484, -0.07005302608013153, 0.5214788317680359, -0.8873318433761597, 0.13808108866214752, -0.08211058378219604, 0.031021911650896072, 0.02730575203895569, 0.22375021874904633, 0.17919982969760895, 0.0626976266503334, 0.12783217430114746, 0.16058771312236786, -0.1875668317079544, 0.18643057346343994, -0.21355997025966644));
	r += mul(s1_3, float4x4(-0.23557837307453156, 0.12851391732692719, -1.0484795570373535, 0.002801581984385848, -0.09986589848995209, -0.03866889700293541, -0.22411435842514038, -0.1980438232421875, 0.20749956369400024, 0.203997403383255, 0.048744842410087585, 0.1274559497833252, -0.5721863508224487, -0.37566083669662476, -14.736784934997559, -0.18098339438438416));
	r += mul(s1_4, float4x4(0.2936091721057892, 0.1076824739575386, 0.017198415473103523, 0.12075598537921906, -0.015310756862163544, -0.6222167611122131, -0.2890511155128479, -0.13447965681552887, -0.46088263392448425, 0.058414146304130554, -0.8152613639831543, -0.14413699507713318, 0.30572187900543213, -0.3321363627910614, 0.005358146037906408, -0.05558241903781891));
	r += mul(s1_5, float4x4(-0.5253911018371582, 0.32295799255371094, -0.09325140714645386, -0.6438071727752686, -0.3036344647407532, -0.26805830001831055, -0.12923772633075714, -0.007576839532703161, 0.6076838374137878, 0.09185400605201721, 0.10474016517400742, -0.16556289792060852, -0.35603389143943787, -0.19092178344726562, -0.14616619050502777, 0.031215662136673927));
	r += mul(s1_6, float4x4(-0.1865740716457367, 0.12275713682174683, -0.633709728717804, 0.24760065972805023, 0.05969968065619469, 0.01552506722509861, 0.12222220003604889, -0.017975255846977234, -0.19304350018501282, -0.32227250933647156, 0.0652960017323494, -0.08681855350732803, -0.1546461135149002, 0.2932273745536804, -0.2220006287097931, -0.022839350625872612));
	r += mul(s1_7, float4x4(0.1883510798215866, -0.41181808710098267, 0.2773401737213135, 0.16494400799274445, -0.10122116655111313, -0.14669431746006012, 0.057021427899599075, -0.04594758152961731, 0.021433928981423378, -0.12849074602127075, 0.12457598000764847, 0.011232339777052402, -0.34408140182495117, 0.6191474199295044, 0.13609278202056885, 0.11704613268375397));
	r += mul(s1_8, float4x4(0.23445437848567963, -0.06215057149529457, 0.5924164056777954, -0.07970325648784637, 0.157541424036026, 0.08739546686410904, -0.025683719664812088, -0.0570724792778492, 0.023762425407767296, -0.1253453493118286, 0.2821463644504547, -0.13106271624565125, 0.1209714263677597, 0.2646230161190033, -0.09426447749137878, 0.017791271209716797));
	r += mul(s2_0, float4x4(0.08837271481752396, 0.415825217962265, 0.45987045764923096, 0.5016380548477173, 0.10148061811923981, -0.10754811018705368, 0.08464870601892471, 0.0509980171918869, -0.057741113007068634, 0.17988431453704834, -0.016447629779577255, -0.0697716623544693, 0.16390223801136017, -0.35425373911857605, -0.10632810741662979, 0.025612210854887962));
	r += mul(s2_1, float4x4(-0.10576579719781876, -0.015260092914104462, -0.21651597321033478, -0.6439818143844604, -0.10958332568407059, -0.23658238351345062, -0.18137580156326294, 0.12211526185274124, -0.18761920928955078, 0.46953463554382324, 0.17642036080360413, -2.5485856533050537, 0.17836421728134155, -0.23480984568595886, -0.2697550058364868, 0.1300298124551773));
	r += mul(s2_2, float4x4(-0.1440342664718628, 0.153614804148674, 0.21641002595424652, 0.13038744032382965, -0.0753268152475357, -0.05367371067404747, 0.1087828278541565, 0.0026836320757865906, 0.025419430807232857, -0.23367047309875488, -2.275580883026123, -0.6212674379348755, -0.25656238198280334, 0.11672189086675644, -0.19096234440803528, 0.1974284052848816));
	r += mul(s2_3, float4x4(0.29214295744895935, -0.22802484035491943, 0.15455570816993713, -0.08618667721748352, 0.45590174198150635, -0.3573993444442749, -0.5583551526069641, -0.5068784952163696, 0.537041425704956, -0.2765413522720337, 0.0933971032500267, -0.007717594970017672, -0.12868689000606537, -0.10163640230894089, 0.24998615682125092, -0.07729307562112808));
	r += mul(s2_4, float4x4(-0.40663644671440125, -1.038845181465149, 0.6561005115509033, -0.06115507706999779, -0.33171936869621277, -0.3427092730998993, -0.40322527289390564, -0.292004257440567, -4.944024085998535, -5.498743534088135, -5.522735118865967, -0.9503755569458008, 0.23599228262901306, -0.10553544014692307, 0.23612384498119354, 0.09009019285440445));
	r += mul(s2_5, float4x4(-0.06312417984008789, 0.056700918823480606, 0.21153008937835693, -0.002224941737949848, -0.2041509449481964, 0.05107933655381203, -0.18926800787448883, 0.05902634188532829, 0.6523715853691101, 0.3599419593811035, -0.6963109374046326, -0.6683722734451294, 0.1012955754995346, 0.02628241293132305, 0.1205047219991684, -0.004968942608684301));
	r += mul(s2_6, float4x4(-0.08006269484758377, 0.3045251667499542, 0.16660767793655396, 0.00407669460400939, -0.12643304467201233, 0.24160164594650269, -0.050555236637592316, 0.08613456040620804, -0.5180157423019409, -0.136600062251091, 0.19525252282619476, -0.06285206228494644, 0.09797470271587372, 0.07236923277378082, 0.026157844811677933, 0.003275599330663681));
	r += mul(s2_7, float4x4(0.21043652296066284, -0.1001572459936142, -0.03993513435125351, 0.07013087719678879, -0.03973495587706566, 0.2579493224620819, -0.03240285813808441, 0.043235231190919876, 0.19355331361293793, -2.971628189086914, -0.8050957918167114, 0.09060781449079514, 0.13325028121471405, 0.03618374094367027, 0.0745144635438919, -0.011987966485321522));
	r += mul(s2_8, float4x4(0.02781907096505165, 0.18425032496452332, 0.0508163645863533, 0.01247505471110344, -0.1789586842060089, 0.07271107286214828, -0.05481744185090065, -0.05101075768470764, 0.2782139778137207, 0.5345103740692139, 0.05082948878407478, -0.03826199844479561, 0.008331505581736565, -0.07449112087488174, -0.010058966465294361, -0.02205413021147251));
	r += mul(s3_0, float4x4(-0.041481517255306244, -0.22798219323158264, 0.3959404528141022, 0.022023526951670647, -0.025894207879900932, -0.20811136066913605, 0.020072977989912033, -0.249127596616745, -0.005430147051811218, 0.11016354709863663, 0.08082278072834015, -0.21095390617847443, -0.04788873344659805, 0.11945497989654541, -0.0851612314581871, -0.07362858206033707));
	r += mul(s3_1, float4x4(0.20553737878799438, -7.845931053161621, 0.8416515588760376, -0.3345833718776703, 0.08454538881778717, -1.4498379230499268, -3.1631126403808594, 0.2525644600391388, -0.011142617091536522, 0.22203312814235687, -0.25964197516441345, 0.04281412437558174, 0.13339971005916595, 0.17305314540863037, 0.13066153228282928, -0.08902732282876968));
	r += mul(s3_2, float4x4(0.12840208411216736, 0.10770950466394424, -0.22199082374572754, -0.12378961592912674, 0.44124066829681396, -0.6786261796951294, -1.8495748043060303, 2.749434471130371, -0.009020554833114147, 0.036761973053216934, 0.0766671746969223, -0.17438481748104095, -0.06525492668151855, 0.02851060964167118, -0.13902556896209717, -0.07753780484199524));
	r += mul(s3_3, float4x4(0.06373875588178635, -0.05691603943705559, 0.35084882378578186, -0.13526272773742676, -0.1087312251329422, -0.10014370828866959, 0.014140650629997253, 0.1396273821592331, 0.20818647742271423, -0.011547009460628033, 0.04574167728424072, -0.030459940433502197, 0.09141794592142105, -0.2586635947227478, 0.28974631428718567, -0.0646987035870552));
	r += mul(s3_4, float4x4(0.3968365788459778, 0.04811360687017441, -0.9433135390281677, -0.29256388545036316, 0.27255716919898987, 0.4444473087787628, 0.1992085874080658, -0.1889563351869583, 0.012550456449389458, -0.022768499329686165, -0.06463127583265305, 0.09268420934677124, -0.24349309504032135, -0.5449253916740417, -0.04992034658789635, -0.03228447586297989));
	r += mul(s3_5, float4x4(-0.9981595873832703, 0.0078266067430377, -0.8938314318656921, 0.12293481826782227, -0.03688229247927666, 0.09533518552780151, -1.57148015499115, 0.07687431573867798, -0.2309563159942627, -0.13536661863327026, -0.09401349723339081, 0.21520665287971497, -0.369529664516449, 0.1046653613448143, -0.07437381893396378, -0.15006184577941895));
	r += mul(s3_6, float4x4(-0.05876803398132324, -0.15771885216236115, 0.026611261069774628, -0.03319346159696579, 0.10407374054193497, 0.3020726442337036, -0.15200689435005188, -0.09404692053794861, 0.08269412070512772, 0.003441773122176528, 0.22875306010246277, 0.0057457913644611835, 0.1190953403711319, -0.005060024093836546, 0.10115671157836914, -0.05785541608929634));
	r += mul(s3_7, float4x4(-0.006148995831608772, -0.07291313260793686, 0.17626062035560608, 0.12085659056901932, -0.18271063268184662, 0.1860520988702774, 0.2726151943206787, 0.1233893483877182, 0.028136109933257103, -0.17706334590911865, 0.1066059097647667, 0.0005603579338639975, -0.08311718702316284, -0.21254631876945496, -0.22921699285507202, 0.08917205035686493));
	r += mul(s3_8, float4x4(-0.12975767254829407, 0.039421334862709045, -0.17562556266784668, 0.08590341359376907, 0.1770462691783905, 0.2912836968898773, 0.0789947360754013, -0.07058212161064148, -0.1132000982761383, -0.14154066145420074, 0.0790703073143959, 0.08025722950696945, -0.3227521777153015, -0.16365483403205872, -0.08837993443012238, 0.07201751321554184));
	r += float4(0.001075132517144084, -0.007229240145534277, -0.01357935182750225, -0.004460019525140524);
	return max(r, 0.0);
}
float4 f3(float2 pt, float2 pos, float4 s0_0, float4 s0_1, float4 s0_2, float4 s0_3, float4 s0_4, float4 s0_5, float4 s0_6, float4 s0_7, float4 s0_8, float4 s1_0, float4 s1_1, float4 s1_2, float4 s1_3, float4 s1_4, float4 s1_5, float4 s1_6, float4 s1_7, float4 s1_8, float4 s2_0, float4 s2_1, float4 s2_2, float4 s2_3, float4 s2_4, float4 s2_5, float4 s2_6, float4 s2_7, float4 s2_8, float4 s3_0, float4 s3_1, float4 s3_2, float4 s3_3, float4 s3_4, float4 s3_5, float4 s3_6, float4 s3_7, float4 s3_8) {
	float4 r = 0.0;
	r += mul(s0_0, float4x4(-0.08021218329668045, 0.08965766429901123, -0.08503800630569458, -0.07948978990316391, 0.10585692524909973, 0.048823900520801544, 0.07699889689683914, -0.4529917538166046, -0.4931046962738037, -0.04292134940624237, -0.16114619374275208, 0.29171982407569885, -0.26143261790275574, 0.08884856849908829, 0.2550992965698242, -0.16165027022361755));
	r += mul(s0_1, float4x4(0.027869367972016335, -0.3299713730812073, -0.049726419150829315, 0.17325431108474731, 0.09314585477113724, 0.03463559225201607, -0.07374922186136246, -0.9399166107177734, 0.3246934711933136, -0.160194993019104, -0.028708714991807938, 0.06388844549655914, 0.19677697122097015, -0.16540764272212982, 0.14066046476364136, -0.38669702410697937));
	r += mul(s0_2, float4x4(0.027317646890878677, 0.04449231177568436, -0.06502914428710938, 0.17101368308067322, -0.02732660435140133, -0.31829285621643066, -0.10195015370845795, -0.18098939955234528, -0.058219313621520996, -1.8268582820892334, -0.1422726958990097, -0.128740593791008, 0.10543201118707657, 0.4300467073917389, 0.13543838262557983, -0.046099595725536346));
	r += mul(s0_3, float4x4(-0.1470261961221695, 0.10440725833177567, -0.040100689977407455, -0.7882363200187683, 0.5374252796173096, 0.0838618353009224, 0.2506812810897827, -0.04081006720662117, -0.3835369050502777, 0.10166583210229874, 0.3828534781932831, 0.1544075310230255, -0.14800582826137543, -0.19947265088558197, -0.18217696249485016, 0.02710689976811409));
	r += mul(s0_4, float4x4(0.1506188064813614, -0.3072419762611389, -0.13945482671260834, 0.21539972722530365, -0.0385667122900486, -0.14941096305847168, 0.6189353466033936, 0.6036592125892639, 0.15897242724895477, -0.06739938259124756, 0.09173084050416946, -0.2037501484155655, 0.010123210027813911, 0.11645384877920151, -0.4791174530982971, 0.2884887158870697));
	r += mul(s0_5, float4x4(-0.02417730540037155, 0.06579449027776718, -0.05261406674981117, -0.01010830607265234, -0.1553175449371338, -0.28853362798690796, 0.21173857152462006, 0.05472540110349655, 0.08283450454473495, 0.4419138431549072, 0.20165671408176422, -0.2765245735645294, 0.11601506173610687, -0.1308908313512802, -0.04437084123492241, 0.4003300964832306));
	r += mul(s0_6, float4x4(-0.01966334693133831, -0.160533145070076, 0.11583798378705978, -0.3697793185710907, -1.6323317289352417, -0.18127909302711487, -0.26395201683044434, -0.06587691605091095, 0.017629507929086685, 0.24192588031291962, -0.2110939770936966, 0.3058517575263977, -0.06944132596254349, -0.04122849553823471, -0.00446218391880393, -0.08850045502185822));
	r += mul(s0_7, float4x4(0.12328598648309708, -0.010100915096700191, -0.03956705331802368, 0.11305589973926544, 0.45425519347190857, 0.07312288135290146, -0.34701216220855713, 0.29859668016433716, -0.11546598374843597, 0.28028756380081177, -0.4388422667980194, -0.42741119861602783, -0.15546216070652008, -0.09603624790906906, -0.06717889755964279, 0.0201828982681036));
	r += mul(s0_8, float4x4(-0.04094494506716728, 0.023044224828481674, 0.02995356172323227, 0.023794349282979965, -0.18059498071670532, -0.31648483872413635, -0.13110442459583282, 0.1900627464056015, 0.045754723250865936, 0.03948488086462021, -0.1029570922255516, 0.07690399885177612, 0.07443977147340775, -0.002112816320732236, -0.07435695081949234, -0.017925722524523735));
	r += mul(s1_0, float4x4(-0.2299669086933136, 0.1270841658115387, 0.2587374746799469, -0.11891099810600281, -0.1623511165380478, -0.06165531277656555, -0.02125098742544651, 0.06688086688518524, 0.34860023856163025, -0.17999161779880524, -0.10326797515153885, 0.15920545160770416, -0.06497601419687271, -0.13129352033138275, 0.32198986411094666, -0.5365771651268005));
	r += mul(s1_1, float4x4(0.10387831181287766, -0.06991957128047943, 0.7354885339736938, -0.15180009603500366, -0.1587246209383011, -0.08227113634347916, -0.5410148501396179, -0.07464082539081573, 0.30762097239494324, -0.23308035731315613, 0.15789127349853516, 0.21329763531684875, -0.1264900118112564, -0.894877552986145, -0.3895087242126465, -0.5058602690696716));
	r += mul(s1_2, float4x4(0.08657579869031906, -0.2059774547815323, 0.3175499439239502, 0.7513397336006165, -0.008961927145719528, -0.11791527271270752, -0.10289055854082108, 0.2377840280532837, 0.11102350801229477, 0.8295161724090576, 0.10949607193470001, 0.10316608846187592, -0.03591284528374672, -0.4856008291244507, -0.07590587437152863, 0.0440153032541275));
	r += mul(s1_3, float4x4(-1.1204321384429932, -0.0316336490213871, -0.3017433285713196, 0.07055217027664185, -0.16560353338718414, 0.07937692850828171, -0.18598949909210205, 0.12050282210111618, 0.0505073219537735, 0.10203111916780472, 0.12980803847312927, -0.023135259747505188, -0.21428845822811127, -0.39408090710639954, -0.2445170283317566, 0.03696206584572792));
	r += mul(s1_4, float4x4(0.5740014314651489, -0.3776476979255676, 0.3184394836425781, 0.6466420888900757, -0.5001042485237122, 0.3538523316383362, -0.5295971632003784, -0.2509663999080658, 0.2040063589811325, -0.16856960952281952, -0.49416786432266235, 0.2276415377855301, -0.03746240213513374, -9.14015007019043, 0.6295088529586792, 0.22547191381454468));
	r += mul(s1_5, float4x4(0.166177436709404, 0.5029050707817078, -0.9025757908821106, 0.4665280878543854, 0.13718274235725403, 0.0007604759884998202, -0.12413650751113892, -0.42694801092147827, -0.016762107610702515, -0.7172378897666931, -0.14825013279914856, 0.3729781210422516, 0.056944891810417175, -0.030133692547678947, 0.0775538831949234, -0.36034902930259705));
	r += mul(s1_6, float4x4(-0.043674442917108536, 0.10963106900453568, 0.004589179530739784, 0.04362282156944275, -0.16450946033000946, 0.095562644302845, 0.06229811906814575, -0.12169869244098663, 0.06558821350336075, -0.04725373908877373, 0.029236631467938423, 0.09854605048894882, 0.04660623148083687, 0.031202705577015877, -0.11860043555498123, 0.005052965134382248));
	r += mul(s1_7, float4x4(0.05220123752951622, 0.7279914021492004, -0.5779975056648254, 1.1055904626846313, -0.15836389362812042, -0.004951389506459236, -0.002375349635258317, -0.15583902597427368, 0.0001622208656044677, 0.018566112965345383, 0.29467469453811646, -7.980928785400465e-05, -0.04671021178364754, 0.2473091334104538, -0.456976056098938, -0.09192435443401337));
	r += mul(s1_8, float4x4(0.11768428236246109, 0.3452066481113434, -0.11583956331014633, 0.4704112708568573, -0.08792168647050858, 0.0001135731436079368, -0.132794588804245, -0.01931147836148739, 0.1928933709859848, 0.15814171731472015, 0.25487056374549866, -0.053452249616384506, -0.039377909153699875, -0.277683824300766, -0.040821850299835205, 0.1743181198835373));
	r += mul(s2_0, float4x4(-0.008381260558962822, -0.05121218040585518, 0.4821987748146057, 0.2580859959125519, 0.04287688806653023, 0.09398259967565536, 0.042379215359687805, 0.06763307005167007, 0.2739277780056, -0.14110462367534637, 0.3144168555736542, 0.3854570984840393, 0.23320236802101135, 0.3778045177459717, -0.697266161441803, 0.41280144453048706));
	r += mul(s2_1, float4x4(-0.017151586711406708, -0.37207865715026855, 0.4808101952075958, -1.1567262411117554, -0.05977264791727066, 0.030938219279050827, 0.03294137865304947, -0.06873998790979385, 0.23159176111221313, -0.3148718476295471, -0.2479274868965149, -5.489396095275879, -0.008990542031824589, 0.4950448274612427, 0.04610629752278328, -0.4275592267513275));
	r += mul(s2_2, float4x4(0.08672590553760529, 0.5848226547241211, 0.33442917466163635, 0.17405492067337036, -0.009545429609715939, -0.021452173590660095, -0.041426677256822586, -0.16726738214492798, 0.01995566301047802, 0.3814880847930908, 0.17569144070148468, 0.3611850142478943, 0.014171067625284195, -0.15310469269752502, 0.12843000888824463, -0.07147624343633652));
	r += mul(s2_3, float4x4(-0.12253714352846146, 0.05830339342355728, -0.3661610186100006, 0.015242110937833786, -0.09953631460666656, -0.1806219518184662, -0.20285336673259735, -0.15245136618614197, 1.1117513179779053, -0.17505896091461182, -0.018213313072919846, -0.19883231818675995, 0.2665784955024719, -0.18572309613227844, 0.32346993684768677, -1.162468671798706));
	r += mul(s2_4, float4x4(0.2324882298707962, 0.10207656025886536, -0.3598056733608246, -0.18742609024047852, -0.26925697922706604, -0.21177347004413605, -0.23967532813549042, -0.6594983339309692, -0.624702513217926, 0.6489325761795044, -3.6360697746276855, -3.503026247024536, 0.02582608349621296, -0.673896312713623, 0.19248448312282562, -0.6319348216056824));
	r += mul(s2_5, float4x4(-0.11686589568853378, 0.030259840190410614, -0.28816109895706177, -0.2843833267688751, 0.02181895822286606, -0.11454162746667862, -0.10126185417175293, -0.13001160323619843, -0.17470210790634155, -1.0755048990249634, 0.024305472150444984, 0.9149715304374695, -0.0644151121377945, -0.12068334966897964, -0.1315470188856125, -0.025641992688179016));
	r += mul(s2_6, float4x4(-0.014294354245066643, -0.0827634334564209, -0.035245321691036224, 0.15673324465751648, -0.0031967328395694494, -0.012360423803329468, 0.021312978118658066, 0.08277159184217453, 0.4343867301940918, 0.20361046493053436, -0.10031519830226898, 0.5711984038352966, -0.09613071382045746, -0.4631635248661041, 0.12950503826141357, -0.031653400510549545));
	r += mul(s2_7, float4x4(0.2890734374523163, -0.05019440874457359, 0.22969092428684235, -0.06031510606408119, 0.09322725981473923, 0.12119393795728683, -0.000296616432024166, -0.06546454131603241, 0.3182319402694702, -2.777566432952881, 0.43601536750793457, 0.6431490778923035, 0.14373080432415009, -0.1360120177268982, 0.0627715066075325, 0.1867247074842453));
	r += mul(s2_8, float4x4(-0.10772967338562012, -0.04529670625925064, 0.019782306626439095, 0.2876591384410858, -0.1043921485543251, -0.22561101615428925, -0.02447585202753544, -0.05962607264518738, 0.15190044045448303, -0.7745247483253479, -0.20323848724365234, -0.014376915991306305, -0.043907664716243744, 0.25878944993019104, 0.03698306158185005, 0.03703180328011513));
	r += mul(s3_0, float4x4(0.2514946460723877, -0.19687220454216003, 0.30997735261917114, 0.02978680469095707, -0.12535105645656586, -0.0005967093165963888, -0.12076762318611145, 0.08034499734640121, 0.2252746820449829, -0.019693173468112946, -0.2339268922805786, -0.17720094323158264, 0.07659203559160233, -0.04186772182583809, -0.10039269179105759, 0.0008749912376515567));
	r += mul(s3_1, float4x4(-0.013518483377993107, -0.13592517375946045, 0.4466550052165985, 0.2612139582633972, -0.5332125425338745, -0.11527986079454422, 0.48766639828681946, -0.271957665681839, -0.18800115585327148, 0.24717341363430023, -0.40181586146354675, -0.2197428047657013, -0.1289704442024231, -0.05213131755590439, 0.0003097703156527132, 0.06382806599140167));
	r += mul(s3_2, float4x4(-0.08025921881198883, -0.4588431119918823, 0.06988073885440826, 0.07923717051744461, -0.07405709475278854, 0.007695781998336315, 0.893831193447113, -0.41677871346473694, -0.1117783933877945, 0.22905564308166504, -0.0534709095954895, 0.15724241733551025, 0.017022551968693733, -0.09031042456626892, -0.011432339437305927, -0.005380525253713131));
	r += mul(s3_3, float4x4(0.32993313670158386, 0.0725770816206932, -0.1697489470243454, 0.04863981157541275, -0.10445020347833633, 0.23193249106407166, 0.12604910135269165, -0.07457285374403, -0.005701866000890732, 0.1579066962003708, -0.07954439520835876, -0.0003008173662237823, 0.15662150084972382, -0.037875834852457047, -0.23962457478046417, 0.09630132466554642));
	r += mul(s3_4, float4x4(-0.006673937663435936, 0.5809317231178284, -0.4035578668117523, 0.4080938994884491, 0.04593031480908394, -0.024967243894934654, 0.16462133824825287, -0.1485777497291565, -0.06798990815877914, 0.14220717549324036, 0.13841508328914642, -0.32274484634399414, -0.09959082305431366, 0.104751817882061, -0.4456695020198822, -0.21155764162540436));
	r += mul(s3_5, float4x4(-0.17988009750843048, -0.5159447193145752, 0.09666767716407776, -0.024847688153386116, 0.0330287329852581, -0.026785055175423622, 0.037481579929590225, 0.09971505403518677, 0.05330339074134827, -0.3567614257335663, 0.12713830173015594, -0.22662761807441711, -0.1161741390824318, -0.12526825070381165, 0.008096743375062943, -0.20606546103954315));
	r += mul(s3_6, float4x4(-0.10327735543251038, 0.12728889286518097, -0.03004998154938221, -0.0106813358142972, -0.04586152732372284, -0.10864295065402985, -0.06280212849378586, -0.1089273989200592, -0.12420667707920074, -0.03568614646792412, 0.0570143461227417, -0.12417099624872208, 0.13978753983974457, -0.09678009897470474, 0.45752212405204773, -0.12595590949058533));
	r += mul(s3_7, float4x4(0.09569621086120605, -0.29412898421287537, 0.27246353030204773, -0.9090929627418518, 0.08080681413412094, 0.40615391731262207, -0.10574255138635635, 0.12944680452346802, -0.07843854278326035, 0.028855130076408386, -0.028879478573799133, -0.3268871009349823, -0.33156147599220276, -0.5176774859428406, 0.4708879292011261, -0.32200324535369873));
	r += mul(s3_8, float4x4(0.07972026616334915, -0.47217318415641785, 0.46594512462615967, -0.006813323590904474, -0.032870158553123474, 0.1357681155204773, 0.17331141233444214, -0.3104371130466461, 0.004471408203244209, -0.07762027531862259, -0.10799171030521393, 0.01763128489255905, -0.07516589760780334, 0.026462944224476814, 0.04804934933781624, -0.13932755589485168));
	r += float4(-0.004090841859579086, -0.010406946763396263, -0.008959073573350906, -0.0027546484488993883);
	return max(r, 0.0);
}
void Pass3(uint2 blockStart, uint3 tid) {
	float2 pt = float2(GetInputPt());
	uint2 gxy = Rmp8x8(tid.x) + blockStart;
	uint2 size = GetInputSize();
	if (gxy.x >= size.x || gxy.y >= size.y) {
		return;
	}
	float2 pos = (gxy + 0.5) * pt;
	float4 s0_0 = l0(-1.0, -1.0);
	float4 s0_1 = l0(0.0, -1.0);
	float4 s0_2 = l0(1.0, -1.0);
	float4 s0_3 = l0(-1.0, 0.0);
	float4 s0_4 = l0(0.0, 0.0);
	float4 s0_5 = l0(1.0, 0.0);
	float4 s0_6 = l0(-1.0, 1.0);
	float4 s0_7 = l0(0.0, 1.0);
	float4 s0_8 = l0(1.0, 1.0);
	float4 s1_0 = l1(-1.0, -1.0);
	float4 s1_1 = l1(0.0, -1.0);
	float4 s1_2 = l1(1.0, -1.0);
	float4 s1_3 = l1(-1.0, 0.0);
	float4 s1_4 = l1(0.0, 0.0);
	float4 s1_5 = l1(1.0, 0.0);
	float4 s1_6 = l1(-1.0, 1.0);
	float4 s1_7 = l1(0.0, 1.0);
	float4 s1_8 = l1(1.0, 1.0);
	float4 s2_0 = l2(-1.0, -1.0);
	float4 s2_1 = l2(0.0, -1.0);
	float4 s2_2 = l2(1.0, -1.0);
	float4 s2_3 = l2(-1.0, 0.0);
	float4 s2_4 = l2(0.0, 0.0);
	float4 s2_5 = l2(1.0, 0.0);
	float4 s2_6 = l2(-1.0, 1.0);
	float4 s2_7 = l2(0.0, 1.0);
	float4 s2_8 = l2(1.0, 1.0);
	float4 s3_0 = l3(-1.0, -1.0);
	float4 s3_1 = l3(0.0, -1.0);
	float4 s3_2 = l3(1.0, -1.0);
	float4 s3_3 = l3(-1.0, 0.0);
	float4 s3_4 = l3(0.0, 0.0);
	float4 s3_5 = l3(1.0, 0.0);
	float4 s3_6 = l3(-1.0, 1.0);
	float4 s3_7 = l3(0.0, 1.0);
	float4 s3_8 = l3(1.0, 1.0);
	conv1_0[gxy] = f0(pt, pos, s0_0, s0_1, s0_2, s0_3, s0_4, s0_5, s0_6, s0_7, s0_8, s1_0, s1_1, s1_2, s1_3, s1_4, s1_5, s1_6, s1_7, s1_8, s2_0, s2_1, s2_2, s2_3, s2_4, s2_5, s2_6, s2_7, s2_8, s3_0, s3_1, s3_2, s3_3, s3_4, s3_5, s3_6, s3_7, s3_8);
	conv1_1[gxy] = f1(pt, pos, s0_0, s0_1, s0_2, s0_3, s0_4, s0_5, s0_6, s0_7, s0_8, s1_0, s1_1, s1_2, s1_3, s1_4, s1_5, s1_6, s1_7, s1_8, s2_0, s2_1, s2_2, s2_3, s2_4, s2_5, s2_6, s2_7, s2_8, s3_0, s3_1, s3_2, s3_3, s3_4, s3_5, s3_6, s3_7, s3_8);
	conv1_2[gxy] = f2(pt, pos, s0_0, s0_1, s0_2, s0_3, s0_4, s0_5, s0_6, s0_7, s0_8, s1_0, s1_1, s1_2, s1_3, s1_4, s1_5, s1_6, s1_7, s1_8, s2_0, s2_1, s2_2, s2_3, s2_4, s2_5, s2_6, s2_7, s2_8, s3_0, s3_1, s3_2, s3_3, s3_4, s3_5, s3_6, s3_7, s3_8);
	conv1_3[gxy] = f3(pt, pos, s0_0, s0_1, s0_2, s0_3, s0_4, s0_5, s0_6, s0_7, s0_8, s1_0, s1_1, s1_2, s1_3, s1_4, s1_5, s1_6, s1_7, s1_8, s2_0, s2_1, s2_2, s2_3, s2_4, s2_5, s2_6, s2_7, s2_8, s3_0, s3_1, s3_2, s3_3, s3_4, s3_5, s3_6, s3_7, s3_8);
}
//!PASS 4
//!DESC CuNNy-1x16-NVL-down
//!BLOCK_SIZE 8
//!NUM_THREADS 64
//!IN conv1_0, conv1_1, conv1_2, conv1_3
//!OUT down
#define O(t, p) t.SampleLevel(SP, pos + p * pt, 0)
#define l0(x, y) O(conv1_0, float2(x, y))
#define l1(x, y) O(conv1_1, float2(x, y))
#define l2(x, y) O(conv1_2, float2(x, y))
#define l3(x, y) O(conv1_3, float2(x, y))
float4 f0(float2 pt, float2 pos, float4 s0_0, float4 s0_1, float4 s0_2, float4 s0_3, float4 s0_4, float4 s0_5, float4 s0_6, float4 s0_7, float4 s0_8, float4 s1_0, float4 s1_1, float4 s1_2, float4 s1_3, float4 s1_4, float4 s1_5, float4 s1_6, float4 s1_7, float4 s1_8, float4 s2_0, float4 s2_1, float4 s2_2, float4 s2_3, float4 s2_4, float4 s2_5, float4 s2_6, float4 s2_7, float4 s2_8, float4 s3_0, float4 s3_1, float4 s3_2, float4 s3_3, float4 s3_4, float4 s3_5, float4 s3_6, float4 s3_7, float4 s3_8) {
	float4 r = 0.0;
	r += mul(s0_0, float4x4(0.028093937784433365, 0.024236032739281654, -0.05331466346979141, -0.10005155205726624, 0.25821661949157715, 0.06323768198490143, -0.15017332136631012, 0.009768318384885788, -0.017805306240916252, -0.008723167702555656, 0.014151348732411861, -0.0014393742894753814, 0.23679256439208984, -0.10416411608457565, 0.0009853041265159845, -0.008343731053173542));
	r += mul(s0_1, float4x4(0.0721931904554367, -0.04233323037624359, 0.12973104417324066, -0.1288713961839676, 0.019040843471884727, -0.2099248319864273, 0.057483918964862823, 0.06537432968616486, -0.011804959736764431, -0.018558386713266373, -0.0018266463885083795, 0.043337397277355194, 0.07012663781642914, 0.4503200948238373, -0.006543702911585569, -0.014860494993627071));
	r += mul(s0_2, float4x4(0.03299481049180031, 0.05936860665678978, -0.04678468406200409, -0.042834993451833725, -0.00623937277123332, 0.020942291244864464, 0.004993403796106577, -0.018720310181379318, -0.02166050300002098, -0.020405691117048264, 0.0065125348046422005, 0.0017947540618479252, -0.022316617891192436, -0.04845750704407692, 0.0024106730706989765, -0.0001725979382172227));
	r += mul(s0_3, float4x4(-0.026697678491473198, 0.07636474072933197, 0.027399472892284393, -0.053931064903736115, 0.2785111963748932, -0.08395019173622131, 0.7278679013252258, -0.09252935647964478, 0.06999118626117706, -0.013626715168356895, 0.0592617429792881, -0.024382635951042175, -0.29050329327583313, -0.11072678118944168, 0.27838537096977234, 0.10911477357149124));
	r += mul(s0_4, float4x4(0.04659964144229889, 0.11454770714044571, 0.1092197522521019, -0.0029078933876007795, -0.31890788674354553, 0.5811170935630798, -0.2352907806634903, -0.2607417106628418, 0.009174918755888939, 0.2251681089401245, -0.249744713306427, -0.03157658129930496, -0.25920408964157104, -0.4409066140651703, 0.5052192807197571, 0.43691590428352356));
	r += mul(s0_5, float4x4(-0.06251295655965805, -0.04544926807284355, 0.1316923052072525, -0.020898260176181793, 0.034551218152046204, -0.11742860823869705, -0.00014991089119575918, 0.06140568479895592, 0.10815432667732239, -0.15443618595600128, -0.01371672935783863, -0.13344010710716248, -0.0035811031702905893, -0.012996360659599304, -0.02190673165023327, 0.13103748857975006));
	r += mul(s0_6, float4x4(0.08907224237918854, -0.0753597691655159, 0.004605447873473167, -0.034055426716804504, -0.029746443033218384, 0.0017031925963237882, -0.0007684882148168981, -0.017767155542969704, -0.01110855396836996, -0.012641270644962788, -0.03796333074569702, 0.009774104692041874, -0.005450212396681309, -0.0019538828637450933, -0.0075151207856833935, -0.005339167546480894));
	r += mul(s0_7, float4x4(-0.05058470368385315, 0.025363069027662277, -0.016815030947327614, -0.05162319168448448, -0.07397743314504623, -0.0856926217675209, -0.13525725901126862, 0.31518521904945374, -0.13001565635204315, -0.04582863301038742, 0.8083310127258301, 0.07347925007343292, 0.026040667667984962, -0.006186874117702246, -0.10672807693481445, 0.0008723577484488487));
	r += mul(s0_8, float4x4(-0.10771049559116364, -0.03114258125424385, -0.04645635560154915, 0.013948973268270493, 0.016415638849139214, 0.020578376948833466, 0.006574920378625393, -0.10609621554613113, -0.0888274610042572, -0.15429280698299408, 0.049698274582624435, 0.7492350339889526, -0.007460783701390028, 0.0013344218023121357, 0.019062170758843422, -0.08169886469841003));
	r += mul(s1_0, float4x4(-0.021802660077810287, 0.03536897897720337, 0.020802639424800873, -0.013364900834858418, 0.0072829523123800755, -0.05212729424238205, 0.08765795081853867, -0.030051110312342644, 0.10082652419805527, -0.03305210918188095, 0.026026377454400063, -0.017391227185726166, 0.2170102894306183, 0.02686024270951748, 0.010172574780881405, -0.08783762156963348));
	r += mul(s1_1, float4x4(0.25293445587158203, 0.08878985792398453, 0.009288163855671883, 0.026559023186564445, -0.5071458220481873, 0.5565831661224365, -0.11413642019033432, 0.06549444794654846, -0.6488534212112427, 0.37755125761032104, -0.023554310202598572, 0.14294086396694183, -0.14852307736873627, -0.005391404032707214, -0.09283361583948135, -0.04165782034397125));
	r += mul(s1_2, float4x4(-0.022440019994974136, 0.05952667072415352, -0.028632542118430138, -0.0003609835112001747, 0.029930422082543373, -0.12539206445217133, 0.032840531319379807, -0.038111306726932526, 0.20379771292209625, 0.05965561792254448, 0.1863574981689453, -0.37629225850105286, -0.057100892066955566, 0.005764097906649113, -0.06572957336902618, -0.022993795573711395));
	r += mul(s1_3, float4x4(0.024030059576034546, -0.009537529200315475, -0.02393816038966179, 0.03704710304737091, 0.2284480482339859, -0.037918515503406525, 0.02225935086607933, -0.02224664017558098, 0.050893478095531464, -0.03312254324555397, 0.17085014283657074, -0.06190963834524155, 0.495531290769577, 0.11410965025424957, 0.6583033800125122, 0.29163289070129395));
	r += mul(s1_4, float4x4(0.2705076336860657, 0.26462700963020325, -0.7069627642631531, -0.5257790088653564, -0.5371096730232239, 0.4915778636932373, -0.825778603553772, 1.0674324035644531, 0.6814150810241699, -0.3434109687805176, -0.5260742902755737, 0.22094477713108063, -0.17267835140228271, 0.24259774386882782, -0.10894616693258286, 0.23424138128757477));
	r += mul(s1_5, float4x4(0.00981729943305254, 0.01665898784995079, 0.038381949067115784, -0.18093396723270416, 0.04692303389310837, -0.05291010066866875, 0.010566158220171928, -0.10240119695663452, -0.16556693613529205, 0.21847152709960938, -0.09262010455131531, 0.5856764316558838, -0.021756945177912712, 0.0027142097242176533, -0.000832577352412045, 0.03211984783411026));
	r += mul(s1_6, float4x4(0.0007439634064212441, 0.006095122545957565, -0.02122020162642002, 0.0006329914904199541, -0.04343464970588684, 0.0009662860538810492, 0.06040075048804283, -0.015325766988098621, -0.04768139123916626, 0.10151215642690659, -0.0910751149058342, 0.04779840633273125, 0.05947727710008621, -0.024401195347309113, 0.13286738097667694, -0.028310922905802727));
	r += mul(s1_7, float4x4(-0.01478540524840355, -0.0027408674359321594, 0.08054553717374802, 0.008953381329774857, 0.008676381781697273, 0.048742759972810745, -0.08916421234607697, 0.00994090549647808, -0.014404316432774067, 0.0028724048752337694, 0.3656054139137268, -0.26665738224983215, 0.0341094434261322, -0.029521485790610313, -0.1483502835035324, -0.021082734689116478));
	r += mul(s1_8, float4x4(0.006737893912941217, 0.0004835074651055038, -0.003653883235529065, 0.038704968988895416, 0.002485360251739621, -0.02498316392302513, 0.05582991987466812, -0.08101031929254532, 0.0011263479245826602, -0.003983643837273121, -0.060930218547582626, -0.06670130789279938, -0.003013192443177104, 0.019124835729599, -0.08245681971311569, -0.09403771907091141));
	r += mul(s2_0, float4x4(-0.1499074250459671, -0.01416117511689663, -0.005210241302847862, 0.006204945035278797, -0.28813639283180237, -0.09888463467359543, 0.16156639158725739, 0.05127188190817833, -0.09024332463741302, -0.0007266180473379791, -0.07155720144510269, -0.01985868252813816, -0.004137058276683092, -0.00020300864707678556, -1.0169024733386323e-07, 4.8041205445770174e-05));
	r += mul(s2_1, float4x4(-0.029877450317144394, 0.18543118238449097, -0.026001378893852234, -0.005172328092157841, -0.08857586234807968, -0.21685275435447693, -0.032366786152124405, 0.12839214503765106, 0.3955242335796356, -0.2956250011920929, 0.007844469510018826, -0.03258165344595909, -0.0013313798699527979, 0.006001753732562065, 1.7973626142975263e-07, 9.831532224779949e-05));
	r += mul(s2_2, float4x4(0.003056861460208893, 0.00030821331893093884, 0.00293345027603209, 0.02145594358444214, -0.05880671739578247, -0.11737758666276932, 0.01716570369899273, -0.08414099365472794, -0.0691179484128952, 0.032189156860113144, -0.05313738062977791, 0.04363580793142319, 5.40895030098909e-07, -0.011994488537311554, 9.616449005989125e-07, -0.0006088332156650722));
	r += mul(s2_3, float4x4(0.10207751393318176, 0.04294738918542862, -0.07510150969028473, 0.053332556039094925, 0.25941163301467896, 0.03072883002460003, -0.3112104833126068, -0.08335835486650467, -0.009975551627576351, 0.05768884718418121, 0.051701147109270096, 0.015648050233721733, 0.016416585072875023, -0.011526237241923809, -0.0015956772258505225, -0.002953598275780678));
	r += mul(s2_4, float4x4(0.5262481570243835, -1.0117220878601074, 0.3906001150608063, -0.2803099751472473, 1.1071844100952148, 0.7258045077323914, -1.0337282419204712, -0.7590429782867432, 0.9167520403862, -0.8556953072547913, 0.9370492696762085, -0.8503493666648865, -0.029329881072044373, 0.011450950987637043, -0.015550726093351841, -0.007182987406849861));
	r += mul(s2_5, float4x4(-0.06105852127075195, 0.12640061974525452, -0.03284857049584389, -0.026729973033070564, 0.20513421297073364, 0.8792654871940613, -0.2070913463830948, -0.7578746676445007, -0.0008100468548946083, 0.04639272391796112, -0.0022846944630146027, 0.010767989791929722, -0.007621482014656067, -0.0837416797876358, -9.12329851416871e-05, -0.03796810284256935));
	r += mul(s2_6, float4x4(-0.09737461060285568, 0.015398799441754818, -0.11898183077573776, 0.04715757071971893, -0.005087619181722403, 0.003529373789206147, 0.09588205069303513, -0.007000340148806572, -0.11060931533575058, 0.11928639560937881, -0.18703515827655792, 0.13457868993282318, -0.006095185410231352, 0.00998718198388815, 0.012344916351139545, 0.002974672708660364));
	r += mul(s2_7, float4x4(0.05734528228640556, 0.10898630321025848, 0.13113637268543243, -0.31235697865486145, 0.05334405601024628, 0.0014253313420340419, 0.007136059924960136, 0.09308778494596481, 0.062319565564394, -0.1926625669002533, 0.4371890127658844, -0.450145959854126, -0.38183826208114624, -0.04627881571650505, -0.37808242440223694, -0.0006122015765868127));
	r += mul(s2_8, float4x4(-0.016039280220866203, -0.0077550048008561134, -0.013751938939094543, 0.09954071044921875, -0.07586970180273056, -0.017780886963009834, 0.11153532564640045, 0.12128964811563492, -0.013202532194554806, 0.04706168174743652, -0.07398328930139542, 0.08540578186511993, 0.07864440232515335, -0.02085043489933014, 0.04157792776823044, -0.005156632512807846));
	r += mul(s3_0, float4x4(-0.056989602744579315, 0.025084061548113823, -0.012164398096501827, 0.015070035122334957, -0.4547172784805298, 0.19815371930599213, 0.40237316489219666, -0.03454470634460449, 0.009513521566987038, 0.019104626029729843, -0.02400238998234272, 0.0020253139082342386, 0.04167328402400017, -0.012378483079373837, -0.011781850829720497, 0.022139431908726692));
	r += mul(s3_1, float4x4(0.22607582807540894, -0.14501892030239105, 0.00495184725150466, 0.011991196312010288, -0.057888615876436234, -0.9317353963851929, 0.2415977418422699, 0.6325358748435974, 0.05279058218002319, 0.05563469976186752, -0.004983515944331884, -0.061800822615623474, 0.38965970277786255, 0.12230698764324188, -0.12744207680225372, -0.13625632226467133));
	r += mul(s3_2, float4x4(-0.005179878324270248, 0.014033660292625427, -0.0026556840166449547, -0.01741229183971882, -0.01965389773249626, -0.05242199823260307, 0.027540970593690872, 0.14613327383995056, 0.016170036047697067, 0.02020731009542942, -0.003709623124450445, 0.009341291151940823, -0.0636243224143982, 0.17349863052368164, -0.022663962095975876, 0.024664081633090973));
	r += mul(s3_3, float4x4(0.02183886431157589, -0.020903948694467545, -0.03389962390065193, 0.011362308636307716, 0.7057583928108215, 0.7719659209251404, -0.7133054733276367, -1.0249396562576294, 0.0020112707279622555, 0.03164736554026604, -0.06369329243898392, 0.030478624626994133, 0.06062789633870125, -0.0675211176276207, 0.26625505089759827, -0.09555839002132416));
	r += mul(s3_4, float4x4(-0.08708447962999344, -0.05665892735123634, 0.3943059742450714, -0.25683537125587463, -0.03914128243923187, 0.046354394406080246, 0.14757497608661652, 0.15161611139774323, -0.6675850749015808, -0.5060723423957825, 0.3825373351573944, 0.08980277180671692, -0.7530983090400696, -0.39354491233825684, 0.3038920760154724, 0.9969726800918579));
	r += mul(s3_5, float4x4(-0.0620807409286499, 0.5771343111991882, -0.06066805124282837, 0.34082144498825073, -0.013521990738809109, -0.00243890262208879, 1.2570324088301277e-06, -0.05412419140338898, 0.04084712639451027, -0.053839605301618576, -0.034334082156419754, 0.08259901404380798, 0.08223479241132736, -0.11202157288789749, 0.08545186370611191, -0.10288777202367783));
	r += mul(s3_6, float4x4(0.008056903257966042, -0.006365759763866663, 0.028590641915798187, -0.014309503138065338, -0.01764615997672081, -0.07234035432338715, 0.03274654969573021, 0.08937147259712219, 0.053789958357810974, 0.006793288979679346, -0.20902740955352783, -0.05134529247879982, -0.03632434085011482, -0.007651470135897398, -0.09003206342458725, 0.09144875407218933));
	r += mul(s3_7, float4x4(0.07983475178480148, 0.08553580939769745, -0.162085622549057, 0.07748963683843613, 0.0015028652269393206, -0.00035031113657169044, -0.02790611796081066, -0.06207423284649849, 0.2231944352388382, 0.15384425222873688, -0.39911073446273804, -0.12109160423278809, 0.033543601632118225, 0.04432522878050804, -0.0027402094565331936, -0.3155219554901123));
	r += mul(s3_8, float4x4(-0.005674986634403467, -0.08959800750017166, 0.03758697956800461, 0.13770635426044464, 2.1518974335776875e-07, 3.358209426096437e-07, -5.456063831843494e-07, -0.003883355762809515, 0.07925347983837128, 0.16891281306743622, -0.030652735382318497, -0.47200360894203186, -0.002220196183770895, -0.0059012738056480885, -0.00011853102478198707, 0.05918966978788376));
	r += float4(-9.35337496343891e-09, -7.949634728277033e-09, -1.0739594991093782e-08, -1.0098201386199435e-08);
	return tanh(r);
}
void Pass4(uint2 blockStart, uint3 tid) {
	float2 pt = float2(GetInputPt());
	uint2 gxy = Rmp8x8(tid.x) + blockStart;
	uint2 size = GetInputSize();
	if (gxy.x >= size.x || gxy.y >= size.y) {
		return;
	}
	float2 pos = (gxy + 0.5) * pt;
	float4 s0_0 = l0(-1.0, -1.0);
	float4 s0_1 = l0(0.0, -1.0);
	float4 s0_2 = l0(1.0, -1.0);
	float4 s0_3 = l0(-1.0, 0.0);
	float4 s0_4 = l0(0.0, 0.0);
	float4 s0_5 = l0(1.0, 0.0);
	float4 s0_6 = l0(-1.0, 1.0);
	float4 s0_7 = l0(0.0, 1.0);
	float4 s0_8 = l0(1.0, 1.0);
	float4 s1_0 = l1(-1.0, -1.0);
	float4 s1_1 = l1(0.0, -1.0);
	float4 s1_2 = l1(1.0, -1.0);
	float4 s1_3 = l1(-1.0, 0.0);
	float4 s1_4 = l1(0.0, 0.0);
	float4 s1_5 = l1(1.0, 0.0);
	float4 s1_6 = l1(-1.0, 1.0);
	float4 s1_7 = l1(0.0, 1.0);
	float4 s1_8 = l1(1.0, 1.0);
	float4 s2_0 = l2(-1.0, -1.0);
	float4 s2_1 = l2(0.0, -1.0);
	float4 s2_2 = l2(1.0, -1.0);
	float4 s2_3 = l2(-1.0, 0.0);
	float4 s2_4 = l2(0.0, 0.0);
	float4 s2_5 = l2(1.0, 0.0);
	float4 s2_6 = l2(-1.0, 1.0);
	float4 s2_7 = l2(0.0, 1.0);
	float4 s2_8 = l2(1.0, 1.0);
	float4 s3_0 = l3(-1.0, -1.0);
	float4 s3_1 = l3(0.0, -1.0);
	float4 s3_2 = l3(1.0, -1.0);
	float4 s3_3 = l3(-1.0, 0.0);
	float4 s3_4 = l3(0.0, 0.0);
	float4 s3_5 = l3(1.0, 0.0);
	float4 s3_6 = l3(-1.0, 1.0);
	float4 s3_7 = l3(0.0, 1.0);
	float4 s3_8 = l3(1.0, 1.0);
	down[gxy] = f0(pt, pos, s0_0, s0_1, s0_2, s0_3, s0_4, s0_5, s0_6, s0_7, s0_8, s1_0, s1_1, s1_2, s1_3, s1_4, s1_5, s1_6, s1_7, s1_8, s2_0, s2_1, s2_2, s2_3, s2_4, s2_5, s2_6, s2_7, s2_8, s3_0, s3_1, s3_2, s3_3, s3_4, s3_5, s3_6, s3_7, s3_8);
}
//!PASS 5
//!DESC CuNNy-1x16-NVL-shuffle
//!STYLE PS
//!IN down, easu, INPUT
float4 Pass5(float2 pos) {
	float2 pt = float2(GetInputPt());
	const static float2x3 rgb2uv = {-0.169, -0.331, 0.5, 0.5, -0.419, -0.081};
	const static float3x3 yuv2rgb = {1, -0.00093, 1.401687, 1, -0.3437, -0.71417, 1, 1.77216, 0.00099};
	float4 r = 0.0;
	float2 size = float2(GetInputSize());
	float2 f = frac(pos * size);
	int2 i = int2(f * 2.0);
	r.r = down.SampleLevel(SP, (float2(0.5, 0.5) - f) * pt + pos, 0)[2*i.y + i.x];
	r.r += easu.SampleLevel(SP, pos, 0).r;
	r.a = 1.0;
	r.r = clamp(r, 0.0, 1.0);
	float2 uv = mul(rgb2uv, INPUT.SampleLevel(SL, pos, 0).rgb);
	float3 px = mul(yuv2rgb, float3(r.r, uv));
	return float4(px, 1.0);
}
