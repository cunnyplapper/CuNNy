// CuNNy 2x8C BILINEAR NVL SH
// Copyright (c) 2024 cunnyplapper

// This program is free software; you can redistribute it and/or
// modify it under the terms of the GNU Lesser General Public
// License as published by the Free Software Foundation; either
// version 3.0 of the License, or (at your option) any later version.
// 
// This program is distributed in the hope that it will be useful,
// but WITHOUT ANY WARRANTY; without even the implied warranty of
// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
// Lesser General Public License for more details.
// 
// You should have received a copy of the GNU Lesser General Public
// License along with this program.  If not, see <https://www.gnu.org/licenses/>.
/* ------------------------------------------------------------------- */

//!MAGPIE EFFECT
//!VERSION 3
//!OUTPUT_WIDTH INPUT_WIDTH * 2
//!OUTPUT_HEIGHT INPUT_HEIGHT * 2

//!TEXTURE
Texture2D INPUT;


//!SAMPLER
//!FILTER POINT
SamplerState SP;

//!SAMPLER
//!FILTER LINEAR
SamplerState SL;

//!TEXTURE
//!WIDTH INPUT_WIDTH
//!HEIGHT INPUT_HEIGHT
//!FORMAT R8G8B8A8_SNORM
Texture2D up_0;

//!TEXTURE
//!WIDTH INPUT_WIDTH
//!HEIGHT INPUT_HEIGHT
//!FORMAT R8G8B8A8_SNORM
Texture2D up_1;

//!TEXTURE
//!WIDTH INPUT_WIDTH
//!HEIGHT INPUT_HEIGHT
//!FORMAT R8G8B8A8_SNORM
Texture2D conv1_0;

//!TEXTURE
//!WIDTH INPUT_WIDTH
//!HEIGHT INPUT_HEIGHT
//!FORMAT R8G8B8A8_SNORM
Texture2D conv1_1;

//!TEXTURE
//!WIDTH INPUT_WIDTH
//!HEIGHT INPUT_HEIGHT
//!FORMAT R8G8B8A8_SNORM
Texture2D conv2_0;

//!TEXTURE
//!WIDTH INPUT_WIDTH
//!HEIGHT INPUT_HEIGHT
//!FORMAT R8G8B8A8_SNORM
Texture2D conv2_1;

//!TEXTURE
//!WIDTH INPUT_WIDTH
//!HEIGHT INPUT_HEIGHT
//!FORMAT R8G8B8A8_SNORM
Texture2D down;

//!PASS 1
//!DESC CuNNy-2x8C-BILINEAR-NVL-SH-up
//!BLOCK_SIZE 8
//!NUM_THREADS 64
//!IN INPUT
//!OUT up_0, up_1
#define O(t, p) t.SampleLevel(SP, pos + p * pt, 0)
#define l0(x, y) dot(float3(0.299, 0.587, 0.114), O(INPUT, float2(x, y)).rgb)
float4 f0(float2 pt, float2 pos, min16float s0_0, min16float s0_1, min16float s0_2, min16float s0_3, min16float s0_4, min16float s0_5, min16float s0_6, min16float s0_7, min16float s0_8) {
	min16float4 r = 0.0;
	r += min16float4(0.10869573056697845, 0.05310051888227463, 0.05149925500154495, -0.024968713521957397) * s0_0;
	r += min16float4(0.019812608137726784, -0.008573350496590137, -0.03698442876338959, 0.07739422470331192) * s0_1;
	r += min16float4(-0.12760917842388153, -0.042125776410102844, -0.014154555276036263, 0.02643747813999653) * s0_2;
	r += min16float4(0.00879907887428999, -0.1725052297115326, -0.3623046875, 0.0013967865379527211) * s0_3;
	r += min16float4(-0.2783203423023224, 0.1243903860449791, 0.3478225767612457, 0.06037082523107529) * s0_4;
	r += min16float4(0.12677249312400818, 0.06080598011612892, 0.01474790833890438, 0.1577148586511612) * s0_5;
	r += min16float4(-0.13004562258720398, -0.2763671576976776, 0.02650049887597561, 0.026205413043498993) * s0_6;
	r += min16float4(0.15383635461330414, 0.2401725947856903, -0.025884419679641724, -0.1342787891626358) * s0_7;
	r += min16float4(0.11832556873559952, 0.020690176635980606, -0.00028865961940027773, -0.1899053007364273) * s0_8;
	r += float4(-0.002535838633775711, -0.003415592946112156, -4.4939370127394795e-06, -0.0031679815147072077);
	return r;
}
float4 f1(float2 pt, float2 pos, min16float s0_0, min16float s0_1, min16float s0_2, min16float s0_3, min16float s0_4, min16float s0_5, min16float s0_6, min16float s0_7, min16float s0_8) {
	min16float4 r = 0.0;
	r += min16float4(0.0006890316144563258, -0.13726244866847992, 0.04439578950405121, -0.00584401236847043) * s0_0;
	r += min16float4(0.06860418617725372, 0.08556738495826721, -0.2937684655189514, 0.0013445463264361024) * s0_1;
	r += min16float4(0.025847336277365685, -0.09850257635116577, -0.024931836873292923, 0.004644667264074087) * s0_2;
	r += min16float4(0.07452669739723206, 0.10119546949863434, 0.050671812146902084, -0.011023841798305511) * s0_3;
	r += min16float4(-0.4210610091686249, 0.013298849575221539, 0.3250507414340973, 0.3837890923023224) * s0_4;
	r += min16float4(0.081287682056427, 0.026113351806998253, -0.09643561393022537, -0.034038443118333817) * s0_5;
	r += min16float4(0.030260171741247177, -0.05261271074414253, -0.0676269605755806, 0.01779821515083313) * s0_6;
	r += min16float4(0.08150625228881836, 0.07804284989833832, 0.05107561871409416, -0.38680675625801086) * s0_7;
	r += min16float4(-0.008632449433207512, -0.0736822634935379, 0.011179990135133266, 0.030607692897319794) * s0_8;
	r += float4(0.004383000545203686, 0.058922622352838516, -0.0019041257910430431, -0.0021533609833568335);
	return r;
}
void Pass1(uint2 blockStart, uint3 tid) {
	float2 pt = float2(GetInputPt());
	uint2 gxy = Rmp8x8(tid.x) + blockStart;
	uint2 size = GetInputSize();
	if (gxy.x >= size.x || gxy.y >= size.y) {
		return;
	}
	float2 pos = (gxy + 0.5) * pt;
	min16float s0_0 = l0(-1.0, -1.0);
	min16float s0_1 = l0(0.0, -1.0);
	min16float s0_2 = l0(1.0, -1.0);
	min16float s0_3 = l0(-1.0, 0.0);
	min16float s0_4 = l0(0.0, 0.0);
	min16float s0_5 = l0(1.0, 0.0);
	min16float s0_6 = l0(-1.0, 1.0);
	min16float s0_7 = l0(0.0, 1.0);
	min16float s0_8 = l0(1.0, 1.0);
	up_0[gxy] = f0(pt, pos, s0_0, s0_1, s0_2, s0_3, s0_4, s0_5, s0_6, s0_7, s0_8);
	up_1[gxy] = f1(pt, pos, s0_0, s0_1, s0_2, s0_3, s0_4, s0_5, s0_6, s0_7, s0_8);
}
//!PASS 2
//!DESC CuNNy-2x8C-BILINEAR-NVL-SH-conv1
//!BLOCK_SIZE 8
//!NUM_THREADS 64
//!IN up_0, up_1
//!OUT conv1_0, conv1_1
#define O(t, p) t.SampleLevel(SP, pos + p * pt, 0)
#define l0(x, y) O(up_0, float2(x, y))
#define l1(x, y) O(up_1, float2(x, y))
float4 f0(float2 pt, float2 pos, min16float4 s0_0, min16float4 s0_1, min16float4 s0_2, min16float4 s0_3, min16float4 s0_4, min16float4 s0_5, min16float4 s0_6, min16float4 s0_7, min16float4 s0_8, min16float4 s1_0, min16float4 s1_1, min16float4 s1_2, min16float4 s1_3, min16float4 s1_4, min16float4 s1_5, min16float4 s1_6, min16float4 s1_7, min16float4 s1_8, min16float4 s2_0, min16float4 s2_1, min16float4 s2_2, min16float4 s2_3, min16float4 s2_4, min16float4 s2_5, min16float4 s2_6, min16float4 s2_7, min16float4 s2_8, min16float4 s3_0, min16float4 s3_1, min16float4 s3_2, min16float4 s3_3, min16float4 s3_4, min16float4 s3_5, min16float4 s3_6, min16float4 s3_7, min16float4 s3_8) {
	min16float4 r = 0.0;
	r += mul(s0_0, min16float4x4(-0.1276298314332962, 0.005358370020985603, 0.2814582884311676, 0.37968817353248596, -0.21916984021663666, 0.06556390225887299, 0.08154301345348358, 0.16683462262153625, 0.2899976372718811, -0.16710719466209412, 0.0232994481921196, 0.07317763566970825, -0.6299176812171936, -0.01959805190563202, 0.3614327013492584, 0.3942846357822418));
	r += mul(s0_1, min16float4x4(0.14196589589118958, 0.29053011536598206, 0.18213102221488953, 0.38387855887413025, -0.07499881833791733, 0.21565337479114532, -0.057263731956481934, -0.2110677808523178, 0.2329094260931015, 0.5690274238586426, 0.10021868348121643, 0.28016355633735657, 0.39155563712120056, -0.005743918474763632, -0.41783657670021057, 0.3097885847091675));
	r += mul(s0_2, min16float4x4(-0.04465271905064583, -0.04365312308073044, 0.08161528408527374, 0.08869397640228271, 0.20285028219223022, 0.24715262651443481, 0.14209240674972534, 0.05479328706860542, -0.3887074589729309, -0.3049035668373108, -0.18916283547878265, -0.3074847161769867, 0.02600199729204178, 0.11798054724931717, -0.06108005344867706, 0.15008582174777985));
	r += mul(s0_3, min16float4x4(0.2570980489253998, 0.05879879370331764, 0.2591213881969452, 0.12537814676761627, 0.032193973660469055, 0.03002197854220867, 0.05496605113148689, -0.06252945959568024, 0.026836911216378212, 0.04050055891275406, -0.18879830837249756, -0.05556417629122734, -0.11758182942867279, 0.041142743080854416, 0.016124840825796127, 0.08857009559869766));
	r += mul(s0_4, min16float4x4(-0.17897525429725647, 0.32498034834861755, 0.8929243683815002, 0.7743476033210754, 0.268109530210495, -0.3682529926300049, 0.31894752383232117, -0.004070959985256195, 0.23073948919773102, -0.29531651735305786, 0.003177326638251543, 0.08849605917930603, 0.275629460811615, -0.4171483814716339, -0.311542809009552, 0.08859724551439285));
	r += mul(s0_5, min16float4x4(0.22900593280792236, 0.19337904453277588, 0.14423193037509918, -0.004729548003524542, 0.040947698056697845, -0.08650407940149307, -0.29400691390037537, 0.13394780457019806, -1.3404462337493896, -0.2754950225353241, 0.6430908441543579, 0.24063490331172943, 0.14013738930225372, 0.09977815300226212, -0.08660938590765, -0.047630783170461655));
	r += mul(s0_6, min16float4x4(-0.03332170844078064, -0.09967094659805298, 0.2659597098827362, 0.35295289754867554, -0.006888774689286947, 0.09106474369764328, -0.14601659774780273, -0.03649770841002464, 0.039918094873428345, -0.15890654921531677, 0.03940041735768318, 0.018129274249076843, 0.01884416863322258, 0.04147870093584061, 0.23682130873203278, -0.044792380183935165));
	r += mul(s0_7, min16float4x4(-0.1231069564819336, -0.02710275538265705, 0.6508309841156006, 0.01968786120414734, 0.18067607283592224, -0.18119938671588898, 0.013292629271745682, -0.035290539264678955, 0.05748274549841881, 0.26608407497406006, -0.1312398910522461, 0.04508008807897568, 0.21923834085464478, -0.2787936329841614, 0.09686513990163803, 0.022030681371688843));
	r += mul(s0_8, min16float4x4(-0.1188880205154419, -0.10591064393520355, 0.3381316363811493, 0.2154056429862976, -0.04821955785155296, -0.04509834200143814, -0.05929087474942207, -0.04898076504468918, 0.021884048357605934, 0.05294836312532425, -0.7597538828849792, -0.19223792850971222, -0.05555160343647003, 0.03666405379772186, -0.03857780620455742, -0.07997756451368332));
	r += mul(s1_0, min16float4x4(0.03248489275574684, 0.17582198977470398, 0.14497607946395874, 0.08413980901241302, 0.008701199665665627, -0.07345899194478989, 0.04620864614844322, -0.04068754240870476, -0.10342587530612946, 0.19741453230381012, -0.0854463055729866, 0.09097757935523987, -0.05051308870315552, 0.28260061144828796, -0.0534202866256237, -0.2880859971046448));
	r += mul(s1_1, min16float4x4(-0.11659861356019974, 0.018391180783510208, 0.20556621253490448, 0.44629403948783875, -0.44485676288604736, 0.3449046313762665, 0.015293658711016178, 0.020520487800240517, 0.11077577620744705, -0.27447596192359924, -0.13633714616298676, -0.41312795877456665, -0.03496759012341499, 0.19470088183879852, -0.0869833379983902, 0.005178953055292368));
	r += mul(s1_2, min16float4x4(-0.010810832493007183, -0.14128676056861877, 0.08802192658185959, -0.11114951223134995, 0.14122897386550903, 0.3708845376968384, -0.36310869455337524, -0.09399594366550446, -0.11248145252466202, -0.37583282589912415, 0.28536930680274963, 0.22501464188098907, 0.01628139615058899, -0.06005500629544258, 0.05101551488041878, -0.1777096688747406));
	r += mul(s1_3, min16float4x4(-0.49316415190696716, 0.29111000895500183, 0.2420903444290161, -0.021460771560668945, -0.10275526344776154, 0.043626632541418076, 0.04013757407665253, 0.07733231782913208, 0.2216058224439621, -0.16903755068778992, -0.029725732281804085, 0.2592521905899048, -0.036620043218135834, 0.14217953383922577, 0.47011640667915344, 0.411749005317688));
	r += mul(s1_4, min16float4x4(0.14759384095668793, 0.1744598001241684, -0.007057672366499901, 0.03914521634578705, -0.25794199109077454, -0.25670045614242554, 0.13665224611759186, -0.038143519312143326, -0.8562013506889343, -0.1738787740468979, -0.4619133472442627, -0.3076173663139343, 0.16317306458950043, 0.23403388261795044, 0.11734231561422348, 0.21904048323631287));
	r += mul(s1_5, min16float4x4(-0.17484067380428314, 0.0694512128829956, 0.11957943439483643, 0.1463569700717926, 0.16851095855236053, -0.13523045182228088, 0.2005126178264618, 0.100837342441082, 0.06861557066440582, -0.12185794115066528, -0.04799893870949745, -0.08863142132759094, 0.007337586954236031, -0.12401199340820312, -0.14209945499897003, -0.11289479583501816));
	r += mul(s1_6, min16float4x4(-0.058033715933561325, -0.03254648670554161, 0.08288568258285522, 0.04434981197118759, 0.09773344546556473, -0.08296205848455429, 0.06277167797088623, -0.04818490147590637, 0.12441898137331009, 0.04695301130414009, 0.035230934619903564, 0.2587067186832428, -0.0044806767255067825, -0.23136816918849945, -0.09028743207454681, -0.3001458942890167));
	r += mul(s1_7, min16float4x4(-0.15820761024951935, -0.28337186574935913, 0.17446129024028778, -0.009478294290602207, -0.1907740980386734, 0.12874002754688263, -0.07626130431890488, -0.012047015130519867, 0.02684848941862583, 0.4075787365436554, -0.3070891797542572, 0.40156638622283936, -0.06361386924982071, -0.0023246309719979763, 0.005411045625805855, 0.04253482073545456));
	r += mul(s1_8, min16float4x4(0.0461079366505146, 0.0016418828163295984, 0.04337063804268837, 0.018523111939430237, 0.026415469124913216, -0.010322308167815208, 0.01557102333754301, -0.027873406186699867, -0.2373826801776886, 0.1552433967590332, 0.1943926364183426, -0.16957101225852966, 0.08641188591718674, 0.031828396022319794, -0.08331538736820221, -0.00210448051802814));
	r += mul(s2_0, min16float4x4(-0.08160708844661713, 0.17744624614715576, -0.15969382226467133, -0.17378868162631989, 0.009595354087650776, -0.04891350120306015, 0.08239348977804184, 0.23832827806472778, 0.0396743007004261, -0.06814020127058029, 0.0818154439330101, -0.045387785881757736, -0.19073650240898132, -0.018815895542502403, -0.009286786429584026, -0.19694170355796814));
	r += mul(s2_1, min16float4x4(0.15169622004032135, 0.838820219039917, 0.01717597432434559, -0.04634641483426094, -0.014463008381426334, -0.01607968658208847, -0.12220726907253265, -0.1353260576725006, 0.04286593943834305, -0.019661547616124153, 0.07656670361757278, 0.05489674583077431, 0.22095592319965363, -0.6449570655822754, 0.6216750741004944, 0.7287195324897766));
	r += mul(s2_2, min16float4x4(0.02773035690188408, 0.18319030106067657, -0.097554512321949, 0.28067493438720703, -0.004478646907955408, -0.06125253066420555, 0.0357431098818779, -0.037414904683828354, -0.053555820137262344, 0.097932368516922, -0.029957938939332962, 0.18700842559337616, -0.3774722218513489, 0.17499342560768127, 0.6111903786659241, 0.5072870850563049));
	r += mul(s2_3, min16float4x4(-0.3657991290092468, 0.07535412162542343, -0.45216497778892517, 0.15893779695034027, 0.06287915259599686, -0.07125867158174515, 0.06731490045785904, -0.12250829488039017, -0.25098085403442383, -0.16342629492282867, 0.2921944260597229, 0.18897198140621185, -0.14880312979221344, 0.0424349419772625, -0.13521285355091095, 0.021958759054541588));
	r += mul(s2_4, min16float4x4(-0.4605621099472046, -0.12888124585151672, 0.30979034304618835, 0.7110847234725952, -0.15653648972511292, 0.01639208011329174, -0.011153076775372028, -0.058891233056783676, 0.24169713258743286, 0.03701817989349365, -0.43834659457206726, -0.2280476689338684, 0.14599604904651642, -0.08418888598680496, 0.19238141179084778, -0.323294997215271));
	r += mul(s2_5, min16float4x4(0.23734715580940247, 0.13326136767864227, -0.09643861651420593, -0.1312228888273239, 0.08983545005321503, 0.026672599837183952, -0.048256661742925644, -0.05634906142950058, -0.023988895118236542, -0.034689761698246, -0.07628195732831955, -0.11814457923173904, -0.06157113239169121, 0.09456704556941986, 0.08226741850376129, 0.10081558674573898));
	r += mul(s2_6, min16float4x4(0.1805250495672226, -0.18622250854969025, -0.2623860538005829, 0.03998870775103569, -0.060179151594638824, 0.07823437452316284, -0.06313037872314453, -0.08019566535949707, 0.36231380701065063, -0.16523589193820953, -0.040076352655887604, -0.21153709292411804, -0.08268214762210846, 0.03188270330429077, -0.08508308231830597, 0.057366274297237396));
	r += mul(s2_7, min16float4x4(0.16634640097618103, -0.2575691044330597, 0.6455679535865784, 0.01750366762280464, 0.04132525995373726, -0.0250898115336895, 0.060282789170742035, -0.20173735916614532, -0.06569314002990723, 0.036910321563482285, 0.5397318005561829, 0.20853491127490997, 0.07751370966434479, 0.16851644217967987, -0.25085222721099854, 0.09448391944169998));
	r += mul(s2_8, min16float4x4(-0.07267031818628311, -0.09971877932548523, 0.048977043479681015, 0.03427562117576599, -0.05657094717025757, -0.03162844106554985, -0.008235788904130459, 0.22947509586811066, -0.08787958323955536, 0.14588676393032074, -0.07509452104568481, -0.38763293623924255, -0.06539677828550339, 0.16455085575580597, -0.0499262809753418, 0.006610146723687649));
	r += mul(s3_0, min16float4x4(-0.013331192545592785, -0.04411323368549347, 0.0641745924949646, -0.13987892866134644, 0.14240030944347382, -0.362587034702301, -0.07026849687099457, -0.34779706597328186, -0.0029443439561873674, 0.5104703903198242, -0.105819471180439, 0.09773145616054535, 0.3390023410320282, 2.3462111949920654, -0.23387645184993744, 0.24116292595863342));
	r += mul(s3_1, min16float4x4(0.040107376873493195, 0.02884870395064354, -0.3031776547431946, 0.09199865907430649, 0.0045495955273509026, -0.0027371924370527267, 0.15140484273433685, -0.29880088567733765, -0.02146850898861885, 0.14859671890735626, -0.0428340844810009, 0.10429885238409042, -0.1745682954788208, -0.17877401411533356, -0.12210994958877563, -0.6626010537147522));
	r += mul(s3_2, min16float4x4(-0.024300431832671165, -0.11604955047369003, -0.006876696832478046, -0.134275883436203, -0.05395088717341423, -0.3211021423339844, 0.0930887833237648, 0.07299309223890305, 0.029959451407194138, -0.15397633612155914, 0.04228470101952553, -0.11562319099903107, -0.08886197954416275, -0.05276891216635704, 0.09183596074581146, 0.000829849042929709));
	r += mul(s3_3, min16float4x4(-0.23450681567192078, 0.08243870735168457, 0.287941038608551, -0.020064180716872215, 0.058576107025146484, -0.2495907098054886, 0.12947428226470947, 0.6078705787658691, 0.4638713002204895, -0.5422999262809753, -0.4892517626285553, -0.23846513032913208, 0.3470296263694763, -0.12237396091222763, 0.06442566215991974, 0.6226933598518372));
	r += mul(s3_4, min16float4x4(0.14492258429527283, 0.07809335738420486, -0.14518187940120697, 0.15931308269500732, 0.22275640070438385, -0.12925437092781067, 0.05968734994530678, 0.20918148756027222, -0.1405664086341858, -0.17830154299736023, -0.2125275880098343, 0.41204196214675903, -0.47344785928726196, -0.19875183701515198, 0.3714376986026764, -0.4763452112674713));
	r += mul(s3_5, min16float4x4(0.08995576202869415, 0.05535018444061279, 0.01688995398581028, 0.06929804384708405, 0.07003946602344513, -0.05174589529633522, 0.25256282091140747, -0.06082509085536003, 0.09966898709535599, -0.08568022400140762, -0.22148694097995758, -0.4451286196708679, -0.2919992208480835, -0.20136792957782745, 0.3097115755081177, 0.12887898087501526));
	r += mul(s3_6, min16float4x4(-0.1107725128531456, 0.0012998386519029737, 0.13225503265857697, -0.17277108132839203, -0.019446805119514465, -0.0751289427280426, -0.004953852389007807, 0.667607307434082, -0.15404324233531952, 0.4050583839416504, -0.251331627368927, -0.27054908871650696, -0.027287188917398453, 0.11150379478931427, 0.017828842625021935, 0.0016177509678527713));
	r += mul(s3_7, min16float4x4(0.05159363895654678, -0.07391837984323502, -0.033012114465236664, -0.18519140779972076, -0.3324660658836365, -0.2592926025390625, -0.02280530333518982, -0.5807186961174011, 0.23401154577732086, 0.685576856136322, -0.315147340297699, 0.17220079898834229, 0.005307994782924652, 0.2931044101715088, -0.18036715686321259, -0.020023707300424576));
	r += mul(s3_8, min16float4x4(-0.011087965220212936, -0.07735342532396317, -0.03601658716797829, 0.11366423964500427, 0.0032261169981211424, 0.39840152859687805, -0.39968395233154297, 0.07764660567045212, -0.01486079953610897, 0.08910360932350159, -0.04608028009533882, 0.060679905116558075, 0.02672131545841694, 0.0645739808678627, -0.18526211380958557, -0.10779095441102982));
	r += float4(0.0030787053983658552, 0.0034803790040314198, 0.0069312434643507, 0.01763850823044777);
	return r;
}
float4 f1(float2 pt, float2 pos, min16float4 s0_0, min16float4 s0_1, min16float4 s0_2, min16float4 s0_3, min16float4 s0_4, min16float4 s0_5, min16float4 s0_6, min16float4 s0_7, min16float4 s0_8, min16float4 s1_0, min16float4 s1_1, min16float4 s1_2, min16float4 s1_3, min16float4 s1_4, min16float4 s1_5, min16float4 s1_6, min16float4 s1_7, min16float4 s1_8, min16float4 s2_0, min16float4 s2_1, min16float4 s2_2, min16float4 s2_3, min16float4 s2_4, min16float4 s2_5, min16float4 s2_6, min16float4 s2_7, min16float4 s2_8, min16float4 s3_0, min16float4 s3_1, min16float4 s3_2, min16float4 s3_3, min16float4 s3_4, min16float4 s3_5, min16float4 s3_6, min16float4 s3_7, min16float4 s3_8) {
	min16float4 r = 0.0;
	r += mul(s0_0, min16float4x4(0.1645166277885437, -0.24250902235507965, -0.06439169496297836, 0.01336976233869791, -0.0817883238196373, 0.043895844370126724, -0.28614768385887146, -0.2724808156490326, 0.022913699969649315, -0.04115600511431694, 0.022815093398094177, 0.22233252227306366, -0.18593846261501312, -0.2806093096733093, -0.09181485325098038, -0.17975187301635742));
	r += mul(s0_1, min16float4x4(0.04865236580371857, 0.07386460155248642, -0.19759142398834229, 0.0897890254855156, -0.10286716371774673, 0.04489438235759735, -0.30492880940437317, -0.27536827325820923, -0.023263193666934967, 0.1273060292005539, 0.16300784051418304, 0.0602564699947834, 0.3857404589653015, -0.1360931396484375, -0.05426448583602905, 0.010070220567286015));
	r += mul(s0_2, min16float4x4(-0.019763246178627014, 0.07493691891431808, -0.014918874949216843, -0.10965430736541748, -0.07692971080541611, -0.4365142583847046, -0.37484607100486755, -0.10956654697656631, 0.16233913600444794, 0.6310582160949707, 0.4193083941936493, 0.07639187574386597, 0.03516204655170441, -0.03131980076432228, -0.02047821320593357, 0.02827521041035652));
	r += mul(s0_3, min16float4x4(-0.12477193027734756, 0.22206878662109375, -0.38994982838630676, -0.22766196727752686, -0.2739269733428955, 0.08774077892303467, 0.31051960587501526, 0.29394951462745667, 0.15297560393810272, 0.012057291343808174, -0.024721650406718254, 0.04161560535430908, -0.26569247245788574, 0.26906728744506836, 0.4931999742984772, 0.08482804894447327));
	r += mul(s0_4, min16float4x4(0.6311861276626587, -0.19587107002735138, -0.31594017148017883, -0.07605098187923431, -0.07946512848138809, 0.07205276191234589, 0.20093928277492523, 0.31692278385162354, -0.26973772048950195, -0.23231422901153564, 0.3705994188785553, 0.03221156448125839, 0.2598811984062195, -0.06590821593999863, 0.34622207283973694, 0.11995649337768555));
	r += mul(s0_5, min16float4x4(-0.09008276462554932, -0.1750984936952591, 0.02182874269783497, -0.22900433838367462, -0.14138023555278778, 0.2534017860889435, 0.13257911801338196, 0.515137255191803, 0.18491879105567932, -0.13210545480251312, -0.2548714578151703, -0.18327637016773224, -0.11441681534051895, -0.18237513303756714, 0.04005400463938713, -0.027127105742692947));
	r += mul(s0_6, min16float4x4(-0.0803525522351265, 0.08873400837182999, 0.05382899194955826, 0.153756245970726, 0.011452587321400642, 0.024661928415298462, -0.1413872241973877, -0.09667982906103134, 0.18131884932518005, -0.07049449533224106, 0.18625858426094055, -0.07665394246578217, 0.06832074373960495, 0.09304565191268921, 0.19697396457195282, 0.2494318038225174));
	r += mul(s0_7, min16float4x4(-0.07006247341632843, 0.0645427331328392, 0.09921066462993622, -0.05493604391813278, -0.11850321292877197, 0.031372133642435074, 0.11938341706991196, 0.20940950512886047, 0.002271320903673768, -0.25024598836898804, -0.4633593261241913, -0.278298944234848, 0.2924109697341919, 0.16645045578479767, 0.3479851186275482, 0.1368204653263092));
	r += mul(s0_8, min16float4x4(-0.002398077631369233, 0.053165361285209656, -0.250288724899292, 0.2184055894613266, -0.002855574944987893, -0.07544498145580292, 0.05143171548843384, -0.024809954687952995, -0.15187831223011017, -0.16380992531776428, -0.13316750526428223, -0.5216265916824341, -0.03244525194168091, -0.0775749534368515, 0.07915586233139038, -0.11055964231491089));
	r += mul(s1_0, min16float4x4(0.03541890159249306, 0.2234562188386917, -0.04079831764101982, -0.08592355996370316, -0.02154717966914177, -0.07047869265079498, -0.1862911581993103, -0.12290549278259277, 0.02102193422615528, 0.017361590638756752, 0.2377496063709259, 0.10727483034133911, -0.2831583619117737, 0.15128180384635925, -0.06622711569070816, -0.1296389102935791));
	r += mul(s1_1, min16float4x4(-0.03936054930090904, -0.22734607756137848, -0.12292148172855377, -0.0516616553068161, 0.08936108648777008, -0.25684380531311035, -0.1818414032459259, -0.13600106537342072, 0.02003052830696106, 0.19930718839168549, 0.31093963980674744, 0.4269738495349884, 0.10829881578683853, 0.11843204498291016, 0.0750138908624649, -0.11771530658006668));
	r += mul(s1_2, min16float4x4(0.058017827570438385, -0.015280956402420998, -0.14217180013656616, -0.006922593340277672, -0.19214478135108948, -0.22336240112781525, 0.252788245677948, -0.008644172921776772, 0.03870613873004913, -0.1706811636686325, -0.12694181501865387, -0.06774675846099854, 0.036931369453668594, 0.08263864368200302, 0.07005512714385986, -0.020075611770153046));
	r += mul(s1_3, min16float4x4(0.3918801546096802, -0.13971057534217834, 0.07440119981765747, -0.2330208420753479, -0.14502444863319397, 0.20468874275684357, -0.18720096349716187, 0.1654071807861328, 0.11526807397603989, -0.013100758194923401, 0.2985917329788208, 0.8607525825500488, -0.2783283591270447, -0.14748358726501465, -0.17881782352924347, 0.22773009538650513));
	r += mul(s1_4, min16float4x4(-0.13607823848724365, 0.21179994940757751, 0.020215770229697227, -0.1804819405078888, 0.10372905433177948, 0.31351810693740845, 0.2173273116350174, 0.06629298627376556, 0.29024937748908997, -0.6104812026023865, 0.12443874031305313, 0.05332043394446373, 0.19488021731376648, -0.21555517613887787, -0.08592712879180908, 0.038861386477947235));
	r += mul(s1_5, min16float4x4(0.1430947482585907, -0.05485820397734642, -0.11414188146591187, -0.0965363159775734, 0.0132994893938303, -0.058177400380373, -0.025350982323288918, 0.35165682435035706, -0.9991182088851929, 0.3337837755680084, 0.7319417595863342, -0.09921586513519287, 0.1392313539981842, 0.14162595570087433, -0.008296255953609943, 0.054493602365255356));
	r += mul(s1_6, min16float4x4(0.1517554223537445, -0.05538091063499451, -0.05824076011776924, 0.01436994131654501, -0.03749993443489075, 0.004076133482158184, 0.15534843504428864, 0.2455982118844986, 0.303935706615448, -0.31953105330467224, -0.2254079282283783, -0.34145745635032654, -0.2826841473579407, 0.19970840215682983, 0.5955978631973267, 0.2943561375141144));
	r += mul(s1_7, min16float4x4(-0.03184851258993149, -0.06700217723846436, -0.21192105114459991, 0.2426425814628601, 0.12005370110273361, 0.020151695236563683, 0.09156160056591034, -0.1254740208387375, -0.26635026931762695, -0.3026457726955414, -0.6713833808898926, -0.4266914427280426, 0.07521548122167587, 0.09983782470226288, 0.05078841373324394, -0.0006657408666796982));
	r += mul(s1_8, min16float4x4(0.05596747249364853, 0.0648823231458664, -0.07305922359228134, -0.040398143231868744, -0.04422880336642265, 0.11648056656122208, 0.1518590748310089, 0.056206438690423965, -0.12842492759227753, -0.26076406240463257, -0.15188242495059967, -0.4585461914539337, 0.0069060903042554855, 0.002905774163082242, 0.03477771207690239, -0.132430762052536));
	r += mul(s2_0, min16float4x4(-0.17130252718925476, 0.0839637890458107, 0.042783223092556, -0.09798648953437805, 0.031150011345744133, -0.04108741879463196, -0.1803133636713028, -0.0071352217346429825, -0.021313227713108063, 0.15638507902622223, 0.16256846487522125, 0.11348322033882141, 0.43504059314727783, -0.3134971261024475, -0.008870095945894718, 0.4868926703929901));
	r += mul(s2_1, min16float4x4(0.09511443227529526, -0.3463481068611145, -0.20722563564777374, -0.2267504334449768, -0.00181379949208349, 0.07539196312427521, -0.02345196157693863, -0.11550953984260559, 0.022061197087168694, -0.07112721353769302, -0.01045795064419508, 0.05371918901801109, 0.4091258943080902, -1.1321598291397095, -0.4252878725528717, 0.4189664125442505));
	r += mul(s2_2, min16float4x4(-0.143005833029747, -0.1398807317018509, -0.10368102043867111, -0.0837305411696434, 0.04466938227415085, -0.1340542435646057, 0.0241941399872303, -0.03537963330745697, -0.02603575401008129, -0.10521445423364639, -0.06468372046947479, 0.10742509365081787, -0.02891652099788189, 0.029254240915179253, -0.15828102827072144, -0.17994807660579681));
	r += mul(s2_3, min16float4x4(-0.5904349684715271, 0.3817938566207886, -0.189690962433815, 0.0438883937895298, -0.1625981479883194, 0.012958885170519352, 0.1727503538131714, 0.09883735328912735, 0.3173006474971771, -0.2939455807209015, -0.2282733917236328, -0.03907576575875282, 0.39520183205604553, -0.22160392999649048, 0.09126663953065872, 0.1843075454235077));
	r += mul(s2_4, min16float4x4(0.17744210362434387, -0.2265608310699463, 0.025782199576497078, 0.24136941134929657, 0.12401808053255081, -0.12271668761968613, -0.16447708010673523, 0.15332254767417908, -0.3268330991268158, 0.3127909004688263, 0.24075567722320557, -0.17627473175525665, -0.3397670388221741, -0.1482831984758377, -0.6799670457839966, -0.2818244397640228));
	r += mul(s2_5, min16float4x4(0.4670180082321167, 0.11160702258348465, -0.2700846791267395, 0.05547728389501572, 0.007439261768013239, 0.17865464091300964, 0.02960257977247238, -0.004498380236327648, -0.08189526200294495, 0.026781829074025154, 0.1788739264011383, -0.03984230384230614, -0.23211084306240082, 0.2003338485956192, -0.18896475434303284, -0.0528864711523056));
	r += mul(s2_6, min16float4x4(-0.2954573333263397, 0.19108715653419495, 0.3368641138076782, 0.013026496395468712, 0.09900665283203125, 0.0011780377244576812, 0.048271577805280685, -0.1485416740179062, -0.10008814185857773, -0.2003650963306427, 0.4474678933620453, 0.5642830729484558, -0.02350628189742565, 0.03835075721144676, -0.1164156123995781, -0.13233496248722076));
	r += mul(s2_7, min16float4x4(0.6665710210800171, 0.265485554933548, 0.3687098026275635, 0.41256001591682434, -0.02596885897219181, 0.09974320977926254, 0.06960790604352951, -0.07418464869260788, 0.5430364608764648, -0.4423515200614929, 0.26114165782928467, 0.337123304605484, -0.17374423146247864, -0.12392648309469223, -0.10184455662965775, -0.18343770503997803));
	r += mul(s2_8, min16float4x4(0.04782606288790703, 0.2455866038799286, 0.17548565566539764, 0.19248434901237488, 0.039130594581365585, -0.07641185075044632, -0.14587432146072388, 0.05983280390501022, -0.32802829146385193, 0.07878070324659348, 0.2705523371696472, -0.17699389159679413, -0.15474702417850494, -0.08150863647460938, -0.15869595110416412, -0.06715859472751617));
	r += mul(s3_0, min16float4x4(0.187226802110672, -0.019240612164139748, -0.1097118929028511, -0.15171971917152405, -0.1298736333847046, 0.07887041568756104, 0.26121070981025696, -0.04980282858014107, -0.14582286775112152, -0.11172545701265335, 0.08330205082893372, 0.021529562771320343, -0.222147598862648, 0.4109139144420624, 0.39728230237960815, 0.29087167978286743));
	r += mul(s3_1, min16float4x4(-0.1581616848707199, -0.02291727438569069, 0.11501868814229965, -0.05706537514925003, 0.2475353479385376, -0.15833596885204315, -0.2316415160894394, -0.09254949539899826, -0.021312275901436806, 0.1764460802078247, 0.24081197381019592, -0.05239370837807655, 0.26099398732185364, 0.8311647176742554, 0.295160174369812, -0.15370520949363708));
	r += mul(s3_2, min16float4x4(0.017772916704416275, 0.001959070563316345, 0.11267431825399399, -0.04904100298881531, 0.04281887784600258, 0.1616375744342804, -0.15982411801815033, -0.058032404631376266, 0.060920774936676025, 0.18505741655826569, 0.24443936347961426, -0.048783887177705765, -0.18027424812316895, 0.22651991248130798, 0.29199108481407166, 0.0952552855014801));
	r += mul(s3_3, min16float4x4(0.35271552205085754, -0.18833737075328827, -0.1312616914510727, -0.07782464474439621, -0.07046934217214584, -0.12321451306343079, 0.15272390842437744, -0.14728200435638428, -0.6996230483055115, 0.20484068989753723, 0.5931169390678406, 0.923642635345459, 0.08240588009357452, -0.12002985179424286, -0.22175809741020203, -0.14903241395950317));
	r += mul(s3_4, min16float4x4(-0.17702969908714294, 0.09872950613498688, 0.004181213676929474, -0.067723847925663, -0.3795764744281769, -0.20341844856739044, -0.026312755420804024, -0.08542916923761368, -0.06905317306518555, -0.668554425239563, 0.291347473859787, 0.42922505736351013, -0.14011560380458832, -0.779296338558197, -0.8574997782707214, -0.6194271445274353));
	r += mul(s3_5, min16float4x4(0.03962617367506027, 0.08751989901065826, 0.002835699124261737, 0.06426669657230377, 0.24756662547588348, -0.3191794157028198, -0.12176630645990372, -0.027374425902962685, -0.470630407333374, -0.37793034315109253, 0.09367242455482483, 0.0901147797703743, -0.13900023698806763, -0.28447768092155457, -0.17100432515144348, 0.2359686642885208));
	r += mul(s3_6, min16float4x4(0.07149824500083923, -0.10212977230548859, 0.040689293295145035, -0.015822211280465126, -0.2468843311071396, 0.11175786703824997, 0.042684659361839294, 0.05210218206048012, -0.018443094566464424, -0.05667983368039131, -0.104055255651474, -0.9106485247612, 0.11494654417037964, -0.17762905359268188, -0.28351765871047974, -0.20119735598564148));
	r += mul(s3_7, min16float4x4(-0.15478083491325378, 0.15913201868534088, -0.047651372849941254, 0.07575222849845886, 0.10153771936893463, -0.019486727192997932, 0.017617305740714073, -0.19911253452301025, -0.38577383756637573, 0.3433345854282379, 0.5119557976722717, -0.5036418437957764, -0.032231174409389496, -0.04066646471619606, -0.3719295859336853, -0.3057825565338135));
	r += mul(s3_8, min16float4x4(-0.0471658818423748, 0.011439776048064232, -0.0748182013630867, 0.07197403907775879, -0.20282293856143951, 0.23394887149333954, 0.21253085136413574, -0.2593039274215698, 0.01962985098361969, -0.15025876462459564, 0.24164532124996185, -0.08336985856294632, 0.05430222302675247, -0.2135351449251175, 0.08251260966062546, -0.1416034698486328));
	r += float4(-0.007059084251523018, -0.0035923542454838753, 0.008290736004710197, 0.013317877426743507);
	return r;
}
void Pass2(uint2 blockStart, uint3 tid) {
	float2 pt = float2(GetInputPt());
	uint2 gxy = Rmp8x8(tid.x) + blockStart;
	uint2 size = GetInputSize();
	if (gxy.x >= size.x || gxy.y >= size.y) {
		return;
	}
	float2 pos = (gxy + 0.5) * pt;
	min16float4 s0_0 = l0(-1.0, -1.0);
	min16float4 s0_1 = l0(0.0, -1.0);
	min16float4 s0_2 = l0(1.0, -1.0);
	min16float4 s0_3 = l0(-1.0, 0.0);
	min16float4 s0_4 = l0(0.0, 0.0);
	min16float4 s0_5 = l0(1.0, 0.0);
	min16float4 s0_6 = l0(-1.0, 1.0);
	min16float4 s0_7 = l0(0.0, 1.0);
	min16float4 s0_8 = l0(1.0, 1.0);
	min16float4 s1_0 = max(-s0_0, 0.0);
	min16float4 s1_1 = max(-s0_1, 0.0);
	min16float4 s1_2 = max(-s0_2, 0.0);
	min16float4 s1_3 = max(-s0_3, 0.0);
	min16float4 s1_4 = max(-s0_4, 0.0);
	min16float4 s1_5 = max(-s0_5, 0.0);
	min16float4 s1_6 = max(-s0_6, 0.0);
	min16float4 s1_7 = max(-s0_7, 0.0);
	min16float4 s1_8 = max(-s0_8, 0.0);
	s0_0 = max(s0_0, 0.0);
	s0_1 = max(s0_1, 0.0);
	s0_2 = max(s0_2, 0.0);
	s0_3 = max(s0_3, 0.0);
	s0_4 = max(s0_4, 0.0);
	s0_5 = max(s0_5, 0.0);
	s0_6 = max(s0_6, 0.0);
	s0_7 = max(s0_7, 0.0);
	s0_8 = max(s0_8, 0.0);
	min16float4 s2_0 = l1(-1.0, -1.0);
	min16float4 s2_1 = l1(0.0, -1.0);
	min16float4 s2_2 = l1(1.0, -1.0);
	min16float4 s2_3 = l1(-1.0, 0.0);
	min16float4 s2_4 = l1(0.0, 0.0);
	min16float4 s2_5 = l1(1.0, 0.0);
	min16float4 s2_6 = l1(-1.0, 1.0);
	min16float4 s2_7 = l1(0.0, 1.0);
	min16float4 s2_8 = l1(1.0, 1.0);
	min16float4 s3_0 = max(-s2_0, 0.0);
	min16float4 s3_1 = max(-s2_1, 0.0);
	min16float4 s3_2 = max(-s2_2, 0.0);
	min16float4 s3_3 = max(-s2_3, 0.0);
	min16float4 s3_4 = max(-s2_4, 0.0);
	min16float4 s3_5 = max(-s2_5, 0.0);
	min16float4 s3_6 = max(-s2_6, 0.0);
	min16float4 s3_7 = max(-s2_7, 0.0);
	min16float4 s3_8 = max(-s2_8, 0.0);
	s2_0 = max(s2_0, 0.0);
	s2_1 = max(s2_1, 0.0);
	s2_2 = max(s2_2, 0.0);
	s2_3 = max(s2_3, 0.0);
	s2_4 = max(s2_4, 0.0);
	s2_5 = max(s2_5, 0.0);
	s2_6 = max(s2_6, 0.0);
	s2_7 = max(s2_7, 0.0);
	s2_8 = max(s2_8, 0.0);
	conv1_0[gxy] = f0(pt, pos, s0_0, s0_1, s0_2, s0_3, s0_4, s0_5, s0_6, s0_7, s0_8, s1_0, s1_1, s1_2, s1_3, s1_4, s1_5, s1_6, s1_7, s1_8, s2_0, s2_1, s2_2, s2_3, s2_4, s2_5, s2_6, s2_7, s2_8, s3_0, s3_1, s3_2, s3_3, s3_4, s3_5, s3_6, s3_7, s3_8);
	conv1_1[gxy] = f1(pt, pos, s0_0, s0_1, s0_2, s0_3, s0_4, s0_5, s0_6, s0_7, s0_8, s1_0, s1_1, s1_2, s1_3, s1_4, s1_5, s1_6, s1_7, s1_8, s2_0, s2_1, s2_2, s2_3, s2_4, s2_5, s2_6, s2_7, s2_8, s3_0, s3_1, s3_2, s3_3, s3_4, s3_5, s3_6, s3_7, s3_8);
}
//!PASS 3
//!DESC CuNNy-2x8C-BILINEAR-NVL-SH-conv2
//!BLOCK_SIZE 8
//!NUM_THREADS 64
//!IN conv1_0, conv1_1
//!OUT conv2_0, conv2_1
#define O(t, p) t.SampleLevel(SP, pos + p * pt, 0)
#define l0(x, y) O(conv1_0, float2(x, y))
#define l1(x, y) O(conv1_1, float2(x, y))
float4 f0(float2 pt, float2 pos, min16float4 s0_0, min16float4 s0_1, min16float4 s0_2, min16float4 s0_3, min16float4 s0_4, min16float4 s0_5, min16float4 s0_6, min16float4 s0_7, min16float4 s0_8, min16float4 s1_0, min16float4 s1_1, min16float4 s1_2, min16float4 s1_3, min16float4 s1_4, min16float4 s1_5, min16float4 s1_6, min16float4 s1_7, min16float4 s1_8, min16float4 s2_0, min16float4 s2_1, min16float4 s2_2, min16float4 s2_3, min16float4 s2_4, min16float4 s2_5, min16float4 s2_6, min16float4 s2_7, min16float4 s2_8, min16float4 s3_0, min16float4 s3_1, min16float4 s3_2, min16float4 s3_3, min16float4 s3_4, min16float4 s3_5, min16float4 s3_6, min16float4 s3_7, min16float4 s3_8) {
	min16float4 r = 0.0;
	r += mul(s0_0, min16float4x4(-0.12407521158456802, -0.12266931682825089, 0.04548724368214607, 0.14385344088077545, -0.02857520617544651, -0.004082432482391596, 0.007810074836015701, 0.026562539860606194, 0.06598851084709167, -0.019260097295045853, 0.007829880341887474, 0.06003052368760109, 0.010047004558146, -0.017568135634064674, -0.0503615066409111, -0.08667712658643723));
	r += mul(s0_1, min16float4x4(0.023349199444055557, 0.15496399998664856, 0.11065854132175446, -0.3384054899215698, 0.03186018019914627, 0.04134852811694145, -0.017272936180233955, -0.061727434396743774, 0.12119738757610321, 0.2102777063846588, 0.14614729583263397, -0.15985238552093506, -0.1333007961511612, -0.16029201447963715, -0.1303706020116806, 0.2397453635931015));
	r += mul(s0_2, min16float4x4(0.17820172011852264, -0.027205226942896843, 0.4497395157814026, -0.08116655051708221, 0.0635387971997261, 0.0026630167849361897, 0.04919438809156418, 0.03247765079140663, 0.04211561381816864, -0.08120676130056381, 0.003780541243031621, 0.03629913926124573, -0.0331275574862957, 0.08105149865150452, -0.07248176634311676, -0.06909118592739105));
	r += mul(s0_3, min16float4x4(0.12377987802028656, 0.29274386167526245, 0.031191062182188034, -0.08912844955921173, 0.003751622512936592, 0.0607469379901886, -0.00031628075521439314, 0.029514743015170097, 0.04636874422430992, -0.15830516815185547, 0.08375965803861618, 0.15681998431682587, -0.04565595090389252, 0.11251036077737808, 0.09351854771375656, -0.1852237582206726));
	r += mul(s0_4, min16float4x4(-0.0728897824883461, -0.45862165093421936, -0.4130687713623047, -0.16917896270751953, -0.06180059164762497, 0.084755539894104, 0.07602144777774811, -0.2467583864927292, -0.11438539624214172, 0.03713131695985794, -0.026932552456855774, -0.007204090710729361, -0.10064387321472168, 0.06742630153894424, -0.47564423084259033, 0.1289442628622055));
	r += mul(s0_5, min16float4x4(-0.11027325689792633, -0.33373141288757324, 1.2244969606399536, -0.36736860871315, -0.03128938749432564, -0.1557593196630478, -0.1210039034485817, 0.1513693779706955, -0.038573168218135834, 0.01755976304411888, -0.04790527746081352, -0.022885402664542198, 0.033118635416030884, 0.08569343388080597, 0.07823742181062698, -0.06374121457338333));
	r += mul(s0_6, min16float4x4(-0.038452088832855225, 0.017269419506192207, 0.03957932069897652, 0.03898148238658905, 0.008108463138341904, -0.007906454615294933, 0.021320601925253868, 0.04402531683444977, -0.005290620494633913, -0.008173606358468533, 0.03973415493965149, -0.003907313104718924, 0.0037023022305220366, 0.02360503189265728, 0.01842312328517437, -0.009322681464254856));
	r += mul(s0_7, min16float4x4(0.031656861305236816, 0.0681491494178772, 0.0015168690588325262, 0.07826673239469528, -0.042475052177906036, 0.1987321972846985, -0.06214544549584389, -0.16294433176517487, 0.018739815801382065, 0.033208541572093964, -0.0675361305475235, -0.03190511092543602, 0.00682225963100791, 0.04351666942238808, 0.029944151639938354, -0.014274627901613712));
	r += mul(s0_8, min16float4x4(0.004997006617486477, -0.35413575172424316, 0.2199375480413437, 0.16045281291007996, -0.08002456277608871, 0.09306027740240097, 0.09006490558385849, -0.15380533039569855, -0.010243508033454418, 0.060181282460689545, 0.030207844451069832, -0.04676143452525139, 0.0012580555630847812, -0.0747876688838005, 0.013011626899242401, 0.05749852955341339));
	r += mul(s1_0, min16float4x4(0.0011204348411411047, 0.12357453256845474, -0.003420748980715871, -0.08949003368616104, 0.06156414747238159, -0.01688484475016594, 0.05726505070924759, -0.034221500158309937, 0.01569240912795067, -0.23329949378967285, -0.39542847871780396, -0.19270561635494232, 0.006469982676208019, 0.10256785154342651, 0.09382836520671844, -0.09750508517026901));
	r += mul(s1_1, min16float4x4(-0.10859216004610062, -0.12052076309919357, -0.043149758130311966, 0.12525199353694916, 0.2983751595020294, 0.060048092156648636, 0.10308133065700531, 0.07072414457798004, 0.1609552949666977, 0.8439022302627563, -0.3036779463291168, -0.9863282442092896, 0.08909165859222412, -0.09759177267551422, 0.06332088261842728, 0.05245545506477356));
	r += mul(s1_2, min16float4x4(0.008390592411160469, 0.011327730491757393, 0.030247068032622337, 0.009045516140758991, 0.23258166015148163, -0.11323775351047516, -0.06911111623048782, 0.19190430641174316, 0.08179502189159393, -0.039924316108226776, -0.7306172847747803, 0.3006119728088379, 0.041124045848846436, 0.018895946443080902, -0.0367266945540905, 0.027246084064245224));
	r += mul(s1_3, min16float4x4(0.027277318760752678, 0.16246497631072998, 0.26464879512786865, -0.06649046391248703, 0.051648613065481186, -0.13647344708442688, 0.07636841386556625, 0.07917898893356323, -0.0916130468249321, 0.03149571269750595, -0.11374862492084503, 0.07196775823831558, 0.04113086313009262, 0.3094460964202881, 0.2095184326171875, 0.04447590559720993));
	r += mul(s1_4, min16float4x4(0.1123589277267456, -0.32758602499961853, -0.3232422173023224, 0.10305333137512207, 0.18748784065246582, 0.42361757159233093, 0.796406090259552, -0.4052838087081909, -0.189952552318573, 0.5218629240989685, -0.5488311648368835, -0.6484962105751038, -0.0028637126088142395, -0.7709817886352539, -0.059050582349300385, 0.5576850175857544));
	r += mul(s1_5, min16float4x4(-0.030415404587984085, -0.051244813948869705, 0.04588516056537628, 0.08292679488658905, 0.3153994381427765, -0.6542945504188538, -0.3791017532348633, 0.5641492605209351, 0.043406497687101364, 0.2912460267543793, -0.05291526019573212, -0.05459794029593468, -0.03724370524287224, 0.2027841955423355, -0.2523987591266632, -0.10962904244661331));
	r += mul(s1_6, min16float4x4(-0.009725002571940422, 0.06889721751213074, 0.1003771647810936, -0.029987158253788948, -0.0006838664412498474, -0.1513492465019226, 0.08739782869815826, 0.1064683273434639, 0.057973504066467285, 0.027107996866106987, 0.016273166984319687, 0.039215609431266785, 0.14310960471630096, 0.20355616509914398, -0.08143584430217743, 0.1172243058681488));
	r += mul(s1_7, min16float4x4(-0.039613254368305206, -0.04439159482717514, -0.017598316073417664, -0.08606702089309692, -0.10982751846313477, 0.1490950882434845, 0.18875481188297272, -0.15741018950939178, 0.13761065900325775, 0.06274215877056122, 0.10450135916471481, -0.12319338321685791, 0.10809086263179779, 0.1564301699399948, -0.38769763708114624, -0.12887440621852875));
	r += mul(s1_8, min16float4x4(0.025611167773604393, 0.010649358853697777, -0.020084723830223083, -0.038707438856363297, 0.026328610256314278, -0.1459961086511612, 0.014865285716950893, 0.1528318077325821, 0.09106212854385376, 0.03709583356976509, -0.039672479033470154, -0.05212156102061272, 0.05402938276529312, 0.20049144327640533, -0.091062530875206, -0.14501811563968658));
	r += mul(s2_0, min16float4x4(-0.026962870731949806, -0.04634668678045273, 0.23911741375923157, -0.24408522248268127, 0.016079897060990334, -0.10467661172151566, 0.026130063459277153, 0.013730875216424465, 0.17066220939159393, -0.05557657778263092, -0.05805150419473648, 0.09204908460378647, -0.022873448207974434, 0.028012337163090706, 0.004116813186556101, -0.05177377164363861));
	r += mul(s2_1, min16float4x4(0.06322919577360153, 0.044765766710042953, 0.14611753821372986, -0.23289494216442108, -0.26539146900177, -0.07788185775279999, -0.1670919954776764, 0.07332037389278412, -0.14438700675964355, 0.24409058690071106, 0.02012341469526291, -0.3000059425830841, 0.06847140192985535, 0.07700558751821518, -0.26828619837760925, 0.0403951071202755));
	r += mul(s2_2, min16float4x4(0.027030138298869133, -0.28878846764564514, 0.3511693477630615, 0.16828066110610962, -0.002790269209071994, 0.1325879991054535, 0.0765232965350151, -0.1558944135904312, 0.08715792000293732, -0.06763634830713272, 0.04019744694232941, 0.05867723375558853, -0.08631055802106857, 0.042357660830020905, -0.027690913528203964, -0.1106758639216423));
	r += mul(s2_3, min16float4x4(0.06605996936559677, -0.17427463829517365, -0.14390160143375397, -0.2861415445804596, 0.21095171570777893, -0.3349606394767761, -0.03789113461971283, 0.03409752622246742, -0.043318264186382294, -0.05904337391257286, -0.06777230650186539, -0.09377307444810867, 0.030863678082823753, 0.0038409640546888113, -0.09350576996803284, 0.07282321155071259));
	r += mul(s2_4, min16float4x4(-0.14390498399734497, 0.3863169550895691, 0.13849426805973053, -0.5761830806732178, 0.4168879985809326, 0.36416134238243103, -0.08950072526931763, 0.09985512495040894, -0.021723812445998192, 0.1808420717716217, -0.22656063735485077, 0.0694485679268837, -0.0710558146238327, -0.19624356925487518, -0.25571495294570923, 0.06333135068416595));
	r += mul(s2_5, min16float4x4(0.11640213429927826, -0.5690773725509644, 0.15124578773975372, 0.45410364866256714, 0.1084279716014862, 0.016300372779369354, -0.10732155293226242, -0.010655561462044716, 0.01599089242517948, 0.10131993144750595, 0.03970782831311226, -0.2148415446281433, 0.06618303060531616, 0.39549705386161804, 0.0018537369323894382, -0.2961956858634949));
	r += mul(s2_6, min16float4x4(-0.010062675923109055, -0.2159486562013626, 0.0024402805138379335, 0.13876241445541382, -0.0023902179673314095, -0.1269536018371582, 0.1811796873807907, -0.13339588046073914, -0.040422871708869934, -0.05755423754453659, 0.015496455132961273, -0.06609808653593063, 0.009390512481331825, -0.04876696318387985, 0.0068544866517186165, 0.043355368077754974));
	r += mul(s2_7, min16float4x4(0.0038032459560781717, -0.007889826782047749, 0.09936712682247162, -0.006678940262645483, -2.134807825088501, 0.09300179779529572, -0.41201213002204895, -0.08565745502710342, -0.03300732746720314, 0.10227715969085693, -0.11717911064624786, 0.01740667037665844, 0.18026909232139587, -0.1349164843559265, -0.009112944826483727, 0.11819375306367874));
	r += mul(s2_8, min16float4x4(-0.002803156850859523, -0.009364535100758076, 0.020119890570640564, 0.004658812656998634, -0.06654886901378632, -0.08176452666521072, -0.09887620806694031, 0.10079184919595718, -0.05567455664277077, -0.07449247688055038, -0.021587233990430832, 0.0754334032535553, 0.030463362112641335, 0.13602598011493683, 0.05013195425271988, -0.11334173381328583));
	r += mul(s3_0, min16float4x4(0.09593471884727478, 0.07291175425052643, -0.041731953620910645, -0.06937275826931, -0.07187005877494812, -0.10645721852779388, 0.09064233303070068, 0.22150856256484985, -0.17306378483772278, 0.036845214664936066, -0.249507337808609, 0.25704097747802734, 0.012450632639229298, -0.02157560922205448, 0.03189098462462425, -0.03401091694831848));
	r += mul(s3_1, min16float4x4(-0.0752301961183548, -0.22229386866092682, -0.010230881161987782, 0.23782430589199066, 0.10216603428125381, 0.14690443873405457, 0.15228839218616486, -0.3154864013195038, -0.8205074667930603, -0.07100071758031845, 0.23017553985118866, -0.43286415934562683, 0.005808969493955374, -0.3485378324985504, 0.16184461116790771, 0.4993416666984558));
	r += mul(s3_2, min16float4x4(-0.09097608178853989, 0.018257323652505875, -0.051398299634456635, -0.007787732873111963, 0.053350046277046204, -0.028502535074949265, 0.11454648524522781, 0.03546593338251114, -0.15641430020332336, -0.058921150863170624, -0.35479220747947693, 0.14196349680423737, -0.23352964222431183, 0.1622331142425537, -0.24166856706142426, -0.3126482367515564));
	r += mul(s3_3, min16float4x4(-0.11755659431219101, -0.1584482043981552, 0.018845444545149803, -0.06228186935186386, -0.05412599444389343, 0.0978955328464508, -0.05582877993583679, -0.054205186665058136, -0.09612967818975449, -0.2469654083251953, -0.08710754662752151, 0.25771084427833557, -0.05588899925351143, 0.07741014659404755, 0.10766652971506119, -0.20493927597999573));
	r += mul(s3_4, min16float4x4(0.05026491358876228, 0.4231749176979065, 0.44279077649116516, -0.29579487442970276, -0.0591927245259285, -0.12328635901212692, -0.2568402886390686, -0.0057631428353488445, -1.521504521369934, -0.40332457423210144, -0.11775176227092743, 0.28296464681625366, 0.15474927425384521, -0.053699154406785965, -0.12151337414979935, 0.3173834979534149));
	r += mul(s3_5, min16float4x4(0.04391831159591675, -0.04755362868309021, 0.044893667101860046, 0.08405537903308868, 0.019523903727531433, -0.03207485005259514, -0.09682483971118927, 0.04854052513837814, 0.024037960916757584, 0.47310659289360046, -0.0218355655670166, -0.2587515711784363, -0.006953318603336811, 0.32309263944625854, 0.1157865822315216, -0.36815449595451355));
	r += mul(s3_6, min16float4x4(0.039931770414114, 0.000687976076733321, -0.08521924167871475, -0.03454911336302757, -0.05302298069000244, 0.0607881098985672, -0.10533437877893448, -0.055249765515327454, -0.0019215081119909883, 0.0022596626076847315, 0.021420827135443687, 0.030819756910204887, -0.03087107092142105, 0.054975107312202454, -0.02815474197268486, -0.050717324018478394));
	r += mul(s3_7, min16float4x4(0.051253773272037506, -0.031303953379392624, 0.0030236958991736174, 0.09543098509311676, 0.0022996447514742613, -0.07015439122915268, -0.02679736353456974, 0.08494607359170914, -0.009440910071134567, -0.08390071243047714, 0.015968581661581993, 0.05008501186966896, -0.04078548401594162, -0.16469618678092957, -0.001559785334393382, 0.11791568994522095));
	r += mul(s3_8, min16float4x4(0.030817536637187004, 0.023714803159236908, -0.020617881789803505, 0.019838953390717506, -0.0052462550811469555, -0.0027187075465917587, -0.018301041796803474, -0.0021227283868938684, -0.00907077919691801, 0.005413908511400223, 0.014416583813726902, -0.012087110430002213, 0.012797584757208824, -0.03135630860924721, -0.01058210339397192, 0.04229287430644035));
	r += float4(-0.0023442236706614494, 0.0009978185407817364, -0.002645721659064293, 0.00011939259275095537);
	return r;
}
float4 f1(float2 pt, float2 pos, min16float4 s0_0, min16float4 s0_1, min16float4 s0_2, min16float4 s0_3, min16float4 s0_4, min16float4 s0_5, min16float4 s0_6, min16float4 s0_7, min16float4 s0_8, min16float4 s1_0, min16float4 s1_1, min16float4 s1_2, min16float4 s1_3, min16float4 s1_4, min16float4 s1_5, min16float4 s1_6, min16float4 s1_7, min16float4 s1_8, min16float4 s2_0, min16float4 s2_1, min16float4 s2_2, min16float4 s2_3, min16float4 s2_4, min16float4 s2_5, min16float4 s2_6, min16float4 s2_7, min16float4 s2_8, min16float4 s3_0, min16float4 s3_1, min16float4 s3_2, min16float4 s3_3, min16float4 s3_4, min16float4 s3_5, min16float4 s3_6, min16float4 s3_7, min16float4 s3_8) {
	min16float4 r = 0.0;
	r += mul(s0_0, min16float4x4(0.08448638767004013, 0.052556976675987244, 0.14388972520828247, -0.05876222625374794, 0.005565920379012823, 0.018432030454277992, -0.001901558949612081, 0.01588631048798561, -0.08971288055181503, 0.00045579811558127403, -0.09790006279945374, -0.05514543876051903, 0.01795177347958088, -0.0959562435746193, -0.031532589346170425, -0.005947131663560867));
	r += mul(s0_1, min16float4x4(0.1987748146057129, 0.12843339145183563, 0.37375861406326294, -0.008402975276112556, -0.0019912642892450094, -0.00018827305757440627, 0.0031760914716869593, 0.010443146340548992, -0.011491570621728897, -0.013247835449874401, -0.013458340428769588, 0.2939445376396179, 0.0035947123542428017, -0.0802573561668396, -0.05843404680490494, -0.03175115957856178));
	r += mul(s0_2, min16float4x4(-0.02186291478574276, 0.32128849625587463, -0.10615132004022598, 0.006544184871017933, -0.0180836021900177, -0.04510616138577461, -0.013237896375358105, 0.04490554332733154, -0.0014565078308805823, 0.005518670659512281, 0.04547229781746864, 0.0122261643409729, 0.01762881688773632, 0.040115971118211746, -0.03626022860407829, 0.01402059756219387));
	r += mul(s0_3, min16float4x4(-0.05848940834403038, 0.09268464893102646, -0.007709576282650232, 0.12238934636116028, -0.015572136268019676, -0.01547530759125948, -0.03689372539520264, 0.05920512601733208, 0.1051858440041542, -0.06170273572206497, 0.023817449808120728, 0.010221004486083984, 0.03945721313357353, 0.19287137687206268, 0.042362380772829056, 0.21866804361343384));
	r += mul(s0_4, min16float4x4(-0.1069193035364151, -0.3941545784473419, -0.23714888095855713, 0.17036974430084229, 0.12014511227607727, 0.16872607171535492, 0.15683461725711823, 0.18985456228256226, -0.15148703753948212, -0.018250837922096252, -0.06506113708019257, -0.07985667884349823, -0.27888163924217224, -0.08075680583715439, -0.2728233337402344, -0.23156288266181946));
	r += mul(s0_5, min16float4x4(-0.09057004749774933, 0.28325358033180237, 0.3731728196144104, -0.8614011406898499, 0.10770931839942932, -0.03862914443016052, -0.028491327539086342, -0.05984891951084137, 0.007853527553379536, -0.008381331339478493, -0.03113831765949726, 0.09334535896778107, -0.11810672283172607, -0.11619231849908829, 0.00924375094473362, -0.09693098813295364));
	r += mul(s0_6, min16float4x4(-0.024691112339496613, -0.03571050986647606, -0.060898054391145706, -0.11180282384157181, -0.08209077268838882, -0.05547618865966797, 0.011336741037666798, -0.11596711724996567, -0.0401456393301487, -0.010284258984029293, 0.0012576343724504113, -0.04238317906856537, -0.023827018216252327, 0.01921902969479561, -0.11315882205963135, 0.05752890557050705));
	r += mul(s0_7, min16float4x4(-0.02284364402294159, 0.12645085155963898, 0.04326554015278816, 0.026916882023215294, -0.09354843944311142, -0.02210741862654686, 0.09813101589679718, -0.013645830564200878, -0.020313000306487083, -0.037532463669776917, -0.04278590530157089, 0.015004249289631844, 0.12216532230377197, 0.04829338192939758, -0.1575741022825241, 0.09568298608064651));
	r += mul(s0_8, min16float4x4(0.09538082778453827, 0.08423000574111938, 0.381870836019516, 0.0038356257136911154, 0.015205076895654202, 0.11077062040567398, 0.01603284850716591, 0.06902912259101868, -0.06947685033082962, 0.0019331327639520168, -0.04351506754755974, 0.01931069605052471, 0.03169617801904678, 0.03932812809944153, -0.027512267231941223, 0.02263106219470501));
	r += mul(s1_0, min16float4x4(0.010137285105884075, -0.08349115401506424, -0.10474039614200592, 0.13068775832653046, 0.051786329597234726, -0.024726461619138718, 0.044495027512311935, -0.01557393278926611, 0.3100350499153137, -0.45819973945617676, 0.10628770291805267, -0.2163064330816269, -0.008384750224649906, 0.06786783039569855, 0.20871156454086304, -0.08923102915287018));
	r += mul(s1_1, min16float4x4(-0.21620488166809082, 0.03416221961379051, -0.09677492082118988, -0.10082533210515976, 0.03355253115296364, -0.19484393298625946, 0.11245235055685043, 0.01541838888078928, 0.5249760150909424, -0.2956640422344208, 1.1477113962173462, -0.9638494849205017, 0.04576840624213219, -0.05705104395747185, -0.00025633175391703844, -0.015215309336781502));
	r += mul(s1_2, min16float4x4(-0.08467528223991394, -0.04006369784474373, -0.03608109429478645, -0.010611077770590782, 0.24186524748802185, -0.09655468910932541, 0.045922521501779556, 0.03721834719181061, -0.11048230528831482, -0.6512015461921692, -0.11899814009666443, -0.25100177526474, -0.052023667842149734, 0.02568886987864971, 0.005765282083302736, 0.028619136661291122));
	r += mul(s1_3, min16float4x4(0.13761143386363983, 0.18925051391124725, 0.19312584400177002, 0.18467417359352112, 0.022327469661831856, 0.026447487995028496, -0.03878505900502205, -0.0021540839225053787, -0.39402222633361816, -0.07482387870550156, 0.36087629199028015, -0.16516172885894775, -0.008282157592475414, 0.10588966310024261, 0.4009023904800415, 0.16531303524971008));
	r += mul(s1_4, min16float4x4(0.202247753739357, -0.1468571424484253, -0.0024071394000202417, -0.08027192205190659, 0.07897501438856125, 0.37288033962249756, 0.7408627271652222, -0.002999906660988927, -0.9120624661445618, -0.2870207130908966, 0.19447804987430573, 0.3757583796977997, 0.023968294262886047, -0.08625663071870804, -0.2880021333694458, -0.1627354770898819));
	r += mul(s1_5, min16float4x4(-0.037566591054201126, -0.06858715415000916, 0.029914701357483864, 0.06143901124596596, 0.10275526344776154, 0.10043787211179733, -0.22620023787021637, -0.2852083444595337, -0.45936280488967896, -0.16877678036689758, -0.2564871311187744, -0.20391209423542023, 0.02583504468202591, -0.26037484407424927, 0.11021582037210464, -0.133385568857193));
	r += mul(s1_6, min16float4x4(-0.03922108933329582, 0.006744221318513155, 0.037414465099573135, -0.05480985715985298, 0.3469228446483612, 0.1007278561592102, -0.20219743251800537, 0.19582077860832214, 0.1522301584482193, 0.0026656079571694136, -0.07951349765062332, -0.006872186437249184, -0.22834886610507965, -0.1809597760438919, -0.2617992162704468, -0.33107060194015503));
	r += mul(s1_7, min16float4x4(-0.054429780691862106, -0.01655787229537964, 0.013725508004426956, 0.012506059370934963, 0.4616101384162903, 0.42475971579551697, -0.02584773302078247, 0.41973984241485596, 0.13630205392837524, -0.009719138033688068, -0.023034749552607536, 0.08817427605390549, -1.269425392150879, -0.8003522157669067, 0.26123133301734924, -0.5917388200759888));
	r += mul(s1_8, min16float4x4(0.1284189224243164, 0.09929437935352325, 0.0039620366878807545, 0.08381238579750061, 0.23232650756835938, 0.24787463247776031, -0.33888450264930725, 0.007464844733476639, -0.0037084210198372602, 0.034531284123659134, 0.003776764729991555, -0.1554599404335022, -0.5228894948959351, -0.5860554575920105, 0.12117379903793335, -0.46504220366477966));
	r += mul(s2_0, min16float4x4(0.18213149905204773, 0.1808275282382965, 0.2471167892217636, -0.0339205302298069, -0.0072878273203969, 0.016840456053614616, -0.1658092886209488, -0.0070448932237923145, -0.13085530698299408, -0.06484659761190414, -0.17629897594451904, -0.008355095982551575, 0.01591029018163681, 0.0024525579065084457, 0.030990513041615486, 0.004840858280658722));
	r += mul(s2_1, min16float4x4(0.13027028739452362, -0.10486507415771484, 0.36700373888015747, -0.19586557149887085, -0.011203939095139503, -0.06502101570367813, -0.0020426337141543627, -0.0689053162932396, 0.06510365754365921, -0.08810726553201675, 0.11570803076028824, 0.014907977543771267, -0.30888137221336365, 0.05050703510642052, -0.22018606960773468, -0.05664726346731186));
	r += mul(s2_2, min16float4x4(0.07413391768932343, 0.027800409123301506, -0.021042756736278534, 0.13046985864639282, 0.0759250819683075, 0.040153443813323975, 0.05090827867388725, -0.02344321273267269, -0.22860607504844666, -0.12791933119297028, -0.02812894992530346, -0.007636568509042263, 0.1577593982219696, -0.1674787402153015, 0.18081001937389374, -0.045490700751543045));
	r += mul(s2_3, min16float4x4(-0.12085293233394623, -0.12261923402547836, 0.03458961099386215, -0.18925932049751282, -0.0749514177441597, -0.26493340730667114, 0.024962827563285828, -0.4815778136253357, -0.022071104496717453, -0.009304882027208805, -0.0681389644742012, -0.15926823019981384, -0.059972748160362244, -0.07837221771478653, -0.0012706313282251358, -0.04481765627861023));
	r += mul(s2_4, min16float4x4(-0.16030853986740112, 0.04248128831386566, 0.24094757437705994, 0.06937474757432938, -0.06041307374835014, -0.4209185838699341, -0.005051771644502878, 0.40038344264030457, -0.22431734204292297, -0.16976189613342285, -0.023900236934423447, 0.23780743777751923, -0.32760605216026306, -0.36039984226226807, -0.11398658156394958, -0.29712751507759094));
	r += mul(s2_5, min16float4x4(0.6151242256164551, 0.6066257357597351, -0.2959045469760895, 0.509766697883606, 0.08009865880012512, 0.007172116078436375, -0.016755571588873863, -0.10692431777715683, 0.08023417741060257, 0.11810456216335297, -0.07495125383138657, 0.04931594803929329, -0.35396087169647217, -0.05602717399597168, -0.01346429344266653, 0.381902813911438));
	r += mul(s2_6, min16float4x4(0.24011197686195374, 0.13922590017318726, 0.0410039983689785, 0.24959182739257812, 0.294970840215683, 0.2947242856025696, -0.11685138940811157, 0.5683593153953552, -0.01291463803499937, 0.07970288395881653, 0.006237939465790987, 0.18997064232826233, 0.023509500548243523, -0.05727686360478401, 0.0734187439084053, -0.09253766387701035));
	r += mul(s2_7, min16float4x4(0.053176481276750565, 0.20071029663085938, 0.03507585451006889, 0.20324432849884033, 0.03355051204562187, 0.45587843656539917, 0.2404986172914505, -0.11777463555335999, -0.15084786713123322, -0.02190946601331234, -0.19946134090423584, -0.09022001922130585, 0.17838340997695923, -0.11857237666845322, 0.012772895395755768, -0.08864004909992218));
	r += mul(s2_8, min16float4x4(-0.1266019195318222, 0.009368776343762875, -0.11005357652902603, 0.11711102724075317, 0.23000182211399078, -0.14591793715953827, 0.04695150628685951, -0.18446487188339233, -0.07178040593862534, -0.03474422171711922, 0.0876523107290268, 0.055871471762657166, 0.22377106547355652, 0.0861063152551651, -0.0320562943816185, 0.21923860907554626));
	r += mul(s3_0, min16float4x4(-0.0707002505660057, -0.03121032565832138, -0.06314415484666824, 0.004876791965216398, 0.08605289459228516, 0.009740098379552364, 0.08467186242341995, 0.025170886889100075, -0.10278486460447311, -0.11803856492042542, -0.2692734897136688, 0.19775943458080292, 0.15841835737228394, -0.027919312939047813, -0.13915319740772247, 0.22998060286045074));
	r += mul(s3_1, min16float4x4(0.06037602946162224, -0.025591544806957245, -0.0611957386136055, 0.011999718844890594, -0.04101515933871269, 0.20741431415081024, -0.04185815900564194, -0.00450378330424428, 0.41281580924987793, 0.7441788911819458, 0.12476242333650589, 0.7172365188598633, 0.4088364541530609, 0.2532423436641693, -0.14723825454711914, 0.2539198696613312));
	r += mul(s3_2, min16float4x4(0.17047728598117828, 0.10912132263183594, 0.009823684580624104, 0.020812146365642548, -0.06374329328536987, -0.007778172381222248, 0.05326797813177109, 0.03727913275361061, 0.13788698613643646, 0.23487555980682373, -0.09408518671989441, 0.2231474667787552, 0.288086861371994, 0.0037729390896856785, 0.21435347199440002, -0.24973151087760925));
	r += mul(s3_3, min16float4x4(0.15804420411586761, -0.016720572486519814, -0.049728188663721085, 0.09247845411300659, 0.08538530021905899, 0.10045651346445084, -0.3095705211162567, 0.26801955699920654, -0.16639038920402527, -0.14438040554523468, -0.7830846905708313, 0.07272070646286011, -0.04955674707889557, 0.05351819470524788, 0.019630208611488342, 0.05105084925889969));
	r += mul(s3_4, min16float4x4(-0.1479494273662567, 0.27832022309303284, -0.16065138578414917, 0.25044456124305725, -0.0105931106954813, -0.134028822183609, 0.23095829784870148, -0.2745171785354614, 0.2135322093963623, -0.11050046235322952, -0.2720581889152527, 0.3339456617832184, -0.09549416601657867, 0.10733023285865784, -0.3720764219760895, -0.12841738760471344));
	r += mul(s3_5, min16float4x4(-0.06339547783136368, 0.02499118074774742, -0.02709675021469593, -0.040209896862506866, 0.1682535856962204, 0.02517932467162609, 0.09401831030845642, 0.08384919166564941, -0.061648186296224594, 0.14501766860485077, -0.08876639604568481, 0.17102697491645813, -0.7917372584342957, -0.3445676565170288, 0.057439278811216354, -0.05753088742494583));
	r += mul(s3_6, min16float4x4(-0.06669891625642776, -0.08668263256549835, 0.08887562900781631, -0.0063348934054374695, -0.16041724383831024, -0.05529800429940224, -0.035792071372270584, -0.02592894621193409, 0.0842229574918747, 0.09480548650026321, -0.07238594442605972, 0.08913259208202362, -0.006833433173596859, 0.03551897406578064, 0.014915418811142445, 0.0496269091963768));
	r += mul(s3_7, min16float4x4(0.08722321689128876, -0.10413984209299088, -0.005282848607748747, -0.13491937518119812, 0.11147505044937134, -0.010818502865731716, 0.16839975118637085, -0.01909065432846546, -0.040398240089416504, 0.02474660985171795, -0.032043084502220154, 0.02574358880519867, 0.025084540247917175, 0.006669040769338608, -0.06417015939950943, 0.02337455563247204));
	r += mul(s3_8, min16float4x4(0.009347975254058838, -0.0861576497554779, -0.06989478319883347, -0.0964365303516388, 0.03413673862814903, 0.04289698600769043, 0.05529208853840828, 0.016732217743992805, -0.022862225770950317, -0.10777760297060013, 0.0599677674472332, -0.09922920912504196, -0.060006529092788696, -0.028170306235551834, -0.09208425134420395, 0.0642043873667717));
	r += float4(0.0005730621633119881, -0.0021345221903175116, -0.0015218437183648348, 0.00022113812156021595);
	return r;
}
void Pass3(uint2 blockStart, uint3 tid) {
	float2 pt = float2(GetInputPt());
	uint2 gxy = Rmp8x8(tid.x) + blockStart;
	uint2 size = GetInputSize();
	if (gxy.x >= size.x || gxy.y >= size.y) {
		return;
	}
	float2 pos = (gxy + 0.5) * pt;
	min16float4 s0_0 = l0(-1.0, -1.0);
	min16float4 s0_1 = l0(0.0, -1.0);
	min16float4 s0_2 = l0(1.0, -1.0);
	min16float4 s0_3 = l0(-1.0, 0.0);
	min16float4 s0_4 = l0(0.0, 0.0);
	min16float4 s0_5 = l0(1.0, 0.0);
	min16float4 s0_6 = l0(-1.0, 1.0);
	min16float4 s0_7 = l0(0.0, 1.0);
	min16float4 s0_8 = l0(1.0, 1.0);
	min16float4 s1_0 = max(-s0_0, 0.0);
	min16float4 s1_1 = max(-s0_1, 0.0);
	min16float4 s1_2 = max(-s0_2, 0.0);
	min16float4 s1_3 = max(-s0_3, 0.0);
	min16float4 s1_4 = max(-s0_4, 0.0);
	min16float4 s1_5 = max(-s0_5, 0.0);
	min16float4 s1_6 = max(-s0_6, 0.0);
	min16float4 s1_7 = max(-s0_7, 0.0);
	min16float4 s1_8 = max(-s0_8, 0.0);
	s0_0 = max(s0_0, 0.0);
	s0_1 = max(s0_1, 0.0);
	s0_2 = max(s0_2, 0.0);
	s0_3 = max(s0_3, 0.0);
	s0_4 = max(s0_4, 0.0);
	s0_5 = max(s0_5, 0.0);
	s0_6 = max(s0_6, 0.0);
	s0_7 = max(s0_7, 0.0);
	s0_8 = max(s0_8, 0.0);
	min16float4 s2_0 = l1(-1.0, -1.0);
	min16float4 s2_1 = l1(0.0, -1.0);
	min16float4 s2_2 = l1(1.0, -1.0);
	min16float4 s2_3 = l1(-1.0, 0.0);
	min16float4 s2_4 = l1(0.0, 0.0);
	min16float4 s2_5 = l1(1.0, 0.0);
	min16float4 s2_6 = l1(-1.0, 1.0);
	min16float4 s2_7 = l1(0.0, 1.0);
	min16float4 s2_8 = l1(1.0, 1.0);
	min16float4 s3_0 = max(-s2_0, 0.0);
	min16float4 s3_1 = max(-s2_1, 0.0);
	min16float4 s3_2 = max(-s2_2, 0.0);
	min16float4 s3_3 = max(-s2_3, 0.0);
	min16float4 s3_4 = max(-s2_4, 0.0);
	min16float4 s3_5 = max(-s2_5, 0.0);
	min16float4 s3_6 = max(-s2_6, 0.0);
	min16float4 s3_7 = max(-s2_7, 0.0);
	min16float4 s3_8 = max(-s2_8, 0.0);
	s2_0 = max(s2_0, 0.0);
	s2_1 = max(s2_1, 0.0);
	s2_2 = max(s2_2, 0.0);
	s2_3 = max(s2_3, 0.0);
	s2_4 = max(s2_4, 0.0);
	s2_5 = max(s2_5, 0.0);
	s2_6 = max(s2_6, 0.0);
	s2_7 = max(s2_7, 0.0);
	s2_8 = max(s2_8, 0.0);
	conv2_0[gxy] = f0(pt, pos, s0_0, s0_1, s0_2, s0_3, s0_4, s0_5, s0_6, s0_7, s0_8, s1_0, s1_1, s1_2, s1_3, s1_4, s1_5, s1_6, s1_7, s1_8, s2_0, s2_1, s2_2, s2_3, s2_4, s2_5, s2_6, s2_7, s2_8, s3_0, s3_1, s3_2, s3_3, s3_4, s3_5, s3_6, s3_7, s3_8);
	conv2_1[gxy] = f1(pt, pos, s0_0, s0_1, s0_2, s0_3, s0_4, s0_5, s0_6, s0_7, s0_8, s1_0, s1_1, s1_2, s1_3, s1_4, s1_5, s1_6, s1_7, s1_8, s2_0, s2_1, s2_2, s2_3, s2_4, s2_5, s2_6, s2_7, s2_8, s3_0, s3_1, s3_2, s3_3, s3_4, s3_5, s3_6, s3_7, s3_8);
}
//!PASS 4
//!DESC CuNNy-2x8C-BILINEAR-NVL-SH-down
//!BLOCK_SIZE 8
//!NUM_THREADS 64
//!IN conv2_0, conv2_1
//!OUT down
#define O(t, p) t.SampleLevel(SP, pos + p * pt, 0)
#define l0(x, y) O(conv2_0, float2(x, y))
#define l1(x, y) O(conv2_1, float2(x, y))
float4 f0(float2 pt, float2 pos, min16float4 s0_0, min16float4 s0_1, min16float4 s0_2, min16float4 s0_3, min16float4 s0_4, min16float4 s0_5, min16float4 s0_6, min16float4 s0_7, min16float4 s0_8, min16float4 s1_0, min16float4 s1_1, min16float4 s1_2, min16float4 s1_3, min16float4 s1_4, min16float4 s1_5, min16float4 s1_6, min16float4 s1_7, min16float4 s1_8, min16float4 s2_0, min16float4 s2_1, min16float4 s2_2, min16float4 s2_3, min16float4 s2_4, min16float4 s2_5, min16float4 s2_6, min16float4 s2_7, min16float4 s2_8, min16float4 s3_0, min16float4 s3_1, min16float4 s3_2, min16float4 s3_3, min16float4 s3_4, min16float4 s3_5, min16float4 s3_6, min16float4 s3_7, min16float4 s3_8) {
	min16float4 r = 0.0;
	r += mul(s0_0, min16float4x4(-0.048983294516801834, -0.031055159866809845, -0.0015863182488828897, -0.02131100744009018, 0.09790021926164627, 0.04936709254980087, 0.0432484969496727, 0.04450124874711037, 0.08202945441007614, 0.012399188242852688, 3.316383299534209e-06, 0.007249017711728811, 0.07872111350297928, -0.010606433264911175, -0.01553225889801979, -0.005515755154192448));
	r += mul(s0_1, min16float4x4(-0.08131018280982971, -0.09107840806245804, 0.011366128921508789, -0.017088908702135086, 0.015218855813145638, 0.040604546666145325, 0.05713237449526787, 0.08215966075658798, -0.025716809555888176, 0.11416278034448624, 0.013245349749922752, 0.032868899405002594, -0.06712444871664047, 0.06868103891611099, 0.011798416264355183, 0.10182373970746994));
	r += mul(s0_2, min16float4x4(0.015440410003066063, -0.0035901751834899187, 0.014939927496016026, 0.013350935652852058, 0.0461600199341774, -0.0010176857467740774, -0.06875491887331009, 0.004652129020541906, 0.04570465162396431, -0.0398477166891098, 0.002871548058465123, 0.015149789862334728, 0.10962988436222076, 0.05163682624697685, -0.03126766160130501, 0.006104248110204935));
	r += mul(s0_3, min16float4x4(0.040644921362400055, -0.06915626674890518, -0.13928233087062836, -0.056046683341264725, 0.10571656376123428, 0.01849394477903843, 0.16818882524967194, 0.01582339033484459, 0.2299807369709015, 0.03310852125287056, 0.20388171076774597, 0.0173952654004097, -0.5291731953620911, 0.013140070252120495, 0.012667961418628693, 0.011659694835543633));
	r += mul(s0_4, min16float4x4(0.008479251526296139, 0.21282713115215302, -0.16949959099292755, -0.1610448658466339, 0.08586356043815613, 0.18260115385055542, -0.04791799932718277, 0.06327098608016968, -0.07975892722606659, 0.8075357675552368, -0.21417474746704102, 0.16356945037841797, -0.5634844303131104, 1.0351555347442627, -0.13538858294487, 0.16430319845676422));
	r += mul(s0_5, min16float4x4(-0.003694661892950535, -0.07236681133508682, 0.04224821925163269, 0.05793788284063339, -0.09690749645233154, -0.21383139491081238, 0.2133866846561432, -0.19652259349822998, 0.010571860708296299, -0.08840885013341904, 0.06550467014312744, -0.14022815227508545, 0.006630318239331245, -0.23485179245471954, 0.35644906759262085, -0.11759322136640549));
	r += mul(s0_6, min16float4x4(-0.03055177628993988, 0.11202850937843323, -0.0697723925113678, 0.14341962337493896, -0.13819704949855804, -0.04705548658967018, -0.12475734949111938, -0.03985220938920975, -0.07647648453712463, -0.15418386459350586, -0.03128725290298462, -0.15683946013450623, -0.002592497505247593, -0.14095379412174225, -0.32787808775901794, -0.06052449718117714));
	r += mul(s0_7, min16float4x4(-0.5290672183036804, -0.8497597575187683, 1.3303594589233398, 0.2994391620159149, -2.8791870136046782e-05, -0.13232989609241486, 0.10064146667718887, -0.05039995163679123, -0.27831581234931946, -0.15187670290470123, -0.4930083155632019, 0.266567587852478, 0.07087953388690948, -0.03429591283202171, -0.392310231924057, 0.4716848134994507));
	r += mul(s0_8, min16float4x4(-0.14013874530792236, -0.07699707895517349, -0.11352549493312836, 0.4329114258289337, -0.017033442854881287, 0.00922816526144743, -0.18793557584285736, -0.0032904662657529116, -0.005871332250535488, -0.01334648858755827, -0.01280553825199604, -0.08033601194620132, 0.09430082142353058, 0.07247921079397202, -0.09288708865642548, -0.07581555843353271));
	r += mul(s1_0, min16float4x4(0.06766924262046814, 0.028032373636960983, 0.045296940952539444, 0.02411934919655323, -0.062111832201480865, -0.05065806955099106, -0.09824780374765396, -0.03698967024683952, -0.04893955588340759, -0.03576795011758804, -0.002541541587561369, -0.00484591955319047, -0.025980446487665176, -0.01848767139017582, -0.02123534493148327, -0.006423996761441231));
	r += mul(s1_1, min16float4x4(0.08292712271213531, 0.14013682305812836, 0.0157766193151474, 0.048947226256132126, 0.06726150214672089, -0.11743257194757462, -0.01990477554500103, -0.126462921500206, -0.018826579675078392, -0.016969967633485794, -0.014163987711071968, 0.0172612052410841, -0.04357781633734703, -0.0169802438467741, -0.008669275790452957, -0.014305912889540195));
	r += mul(s1_2, min16float4x4(-0.0012967848451808095, -0.024342436343431473, 0.00078424351522699, -0.00844753161072731, -0.07531236112117767, 0.05237799137830734, 0.04010418429970741, 0.0019097181502729654, -0.009795802645385265, -0.016916535794734955, 0.022971201688051224, -0.02510431781411171, -0.08353827148675919, -0.07675495743751526, 0.040136195719242096, -0.03186025097966194));
	r += mul(s1_3, min16float4x4(0.08158693462610245, 0.05132538452744484, 0.026672884821891785, -0.008089902810752392, -0.08280935138463974, 0.016663797199726105, 0.07089421153068542, 0.01286917831748724, -0.21584391593933105, -0.03919174149632454, -0.284180223941803, -0.09357727319002151, 0.06469480693340302, 0.05062141641974449, 0.0501706600189209, 0.035250887274742126));
	r += mul(s1_4, min16float4x4(-0.011780277825891972, 0.025479668751358986, -0.06587795168161392, -0.008106824941933155, 0.7525530457496643, -0.9945237040519714, 0.4111643433570862, -0.7101172208786011, -0.053616270422935486, -0.22117716073989868, -0.02143103815615177, -0.2341730296611786, -0.15966778993606567, -0.07513824850320816, -0.03215975686907768, -0.002671221038326621));
	r += mul(s1_5, min16float4x4(-0.014008215628564358, -0.03503386676311493, -0.034278374165296555, -0.08862265199422836, -0.01824846863746643, 0.2531794011592865, -0.27050837874412537, 0.24367259442806244, 0.034303463995456696, 0.07006978988647461, 0.002851371420547366, 0.09328257292509079, 0.09206055104732513, 0.12195535004138947, -0.27959534525871277, 0.0984201654791832));
	r += mul(s1_6, min16float4x4(-0.029362672939896584, -0.015655439347028732, -0.038765545934438705, -0.018127406015992165, 0.11214887350797653, 0.11797240376472473, 0.07872889935970306, 0.08781500160694122, 0.06961354613304138, 0.04067671671509743, 0.14559678733348846, 0.06616166234016418, 0.13818387687206268, 0.05629465728998184, 0.21256262063980103, 0.06043684855103493));
	r += mul(s1_7, min16float4x4(-0.029891908168792725, -0.03771965205669403, -0.07788088172674179, -0.05774035304784775, -0.03185588866472244, 0.11636896431446075, 0.20758110284805298, -0.15673953294754028, 0.12073929607868195, 0.10942284762859344, 0.13985675573349, 0.1743164211511612, -0.05236400291323662, 0.09985541552305222, -0.2739661633968353, 0.054072264581918716));
	r += mul(s1_8, min16float4x4(-0.00152781349606812, -0.004592590034008026, 0.006913574878126383, -0.027215849608182907, -0.023240724578499794, 0.00334079354070127, 0.11794586479663849, 0.0874333381652832, 0.028349561616778374, 0.053144220262765884, 0.031564097851514816, 0.076544389128685, -0.03192899376153946, -0.07466941326856613, 0.19009949266910553, -0.06835182011127472));
	r += mul(s2_0, min16float4x4(0.08180356025695801, 0.08973647654056549, 0.03857685253024101, 0.04573742672801018, -0.10864455252885818, -0.029761722311377525, -0.004706466570496559, 0.004303859546780586, -0.006602956913411617, -0.10641545802354813, -0.0062656095251441, -0.0822751596570015, -0.09399375319480896, -0.058719001710414886, -0.04843878000974655, -0.046265386044979095));
	r += mul(s2_1, min16float4x4(-0.17921285331249237, -0.14563921093940735, 0.14108097553253174, 0.038165703415870667, 0.022521696984767914, -0.1625695675611496, -0.08798930794000626, -0.09306549280881882, 0.1164555475115776, 0.08807767927646637, -0.021226659417152405, -0.03498673439025879, 0.1535952389240265, 0.09394343197345734, -0.024899370968341827, 0.01300455816090107));
	r += mul(s2_2, min16float4x4(-0.004443501587957144, -0.06685691326856613, -0.06246652454137802, 0.043467141687870026, -7.081438525347039e-05, 0.08373916149139404, -0.01444658450782299, 0.005789441987872124, 0.04040396213531494, 0.19970762729644775, 0.027552954852581024, 0.018864570185542107, -0.02725382335484028, 0.008825366385281086, 0.04276333749294281, -0.026061464101076126));
	r += mul(s2_3, min16float4x4(0.19453883171081543, 0.05042225867509842, -0.25878989696502686, 0.11796937882900238, -0.14059768617153168, -0.1362343728542328, -0.009537025354802608, -0.062385138124227524, -0.2027195692062378, -0.07937191426753998, -0.1929611712694168, -0.11423531174659729, -0.1694585531949997, -0.08862274140119553, -0.17322872579097748, -0.06423553824424744));
	r += mul(s2_4, min16float4x4(0.6525041460990906, 0.7132248282432556, -0.29457083344459534, -0.7222445607185364, -0.7871097326278687, -0.3955254852771759, 0.3043845295906067, 0.6892625093460083, -0.3779292702674866, 0.2900426983833313, -0.20854267477989197, 0.09418024122714996, 0.2647210955619812, -0.005449863150715828, 0.4814452528953552, 0.05695122852921486));
	r += mul(s2_5, min16float4x4(-0.019881336018443108, 0.0687403678894043, -0.13916026055812836, -0.1204044297337532, 0.06524687260389328, -0.2192428559064865, 0.21228928864002228, -0.021812384948134422, 0.3049626350402832, -0.19311843812465668, 0.20171597599983215, 0.5686502456665039, 0.007502934895455837, 0.19288210570812225, -0.12952210009098053, 0.19876961410045624));
	r += mul(s2_6, min16float4x4(-0.019675426185131073, -0.012190258130431175, 0.09215346723794937, -0.024357933551073074, 0.16473227739334106, 0.05455690622329712, 0.18571655452251434, 0.06259460747241974, -0.04714856669306755, -0.010878454893827438, -0.11742936819791794, -0.00943346880376339, -0.11499015241861343, -0.04329731687903404, -0.20222815871238708, -0.06111736595630646));
	r += mul(s2_7, min16float4x4(-0.07607247680425644, -0.07966379076242447, -0.06190158799290657, 0.11496738344430923, 0.07290077954530716, 0.20061103999614716, -0.0005700682522729039, 0.03538971394300461, -0.07128387689590454, -0.09882298111915588, 0.09448986500501633, 0.02491198666393757, -0.020211301743984222, -0.10829232633113861, 0.020185692235827446, -0.09216456860303879));
	r += mul(s2_8, min16float4x4(-0.04501985386013985, -0.03820452466607094, -0.005736181978136301, -0.0462716706097126, 0.015867887064814568, -0.026105297729372978, -0.04923226684331894, 0.02854672074317932, 0.22515559196472168, 0.07194003462791443, -0.0039849127642810345, -0.3583982586860657, 0.01255433913320303, 0.02215087041258812, 0.06618067622184753, 0.02803690917789936));
	r += mul(s3_0, min16float4x4(-0.06607725471258163, -0.05145932734012604, -0.036105748265981674, -0.052858226001262665, 0.02940700389444828, 0.040646281093358994, -0.01853705570101738, 0.010120171122252941, 0.07449650019407272, 0.040172677487134933, 0.03962814435362816, 0.03248303756117821, 0.09577293694019318, 0.08322705328464508, 0.04415414482355118, 0.0949706956744194));
	r += mul(s3_1, min16float4x4(0.12548941373825073, 0.06747172027826309, 0.01074758730828762, 0.017669154331088066, 0.0673811212182045, 0.06913638859987259, 0.016660122200846672, 0.02780875936150551, -0.13142094016075134, -0.04821241274476051, -0.0004885816015303135, -0.00632752338424325, -0.034413982182741165, -0.0898849219083786, -0.03308824822306633, -0.08640946447849274));
	r += mul(s3_2, min16float4x4(0.0005076926900073886, 0.052413903176784515, 0.028284816071391106, 0.009955338202416897, -0.03281741216778755, -0.02740185521543026, 0.0029371597338467836, -0.021649276837706566, -0.07055646181106567, -0.1572219878435135, -0.03725547716021538, -0.03838939964771271, 0.013988952152431011, -0.040949273854494095, -0.03948162496089935, 0.005770843010395765));
	r += mul(s3_3, min16float4x4(-0.05922376364469528, 0.0005197671125642955, -0.10553497821092606, 0.008529222570359707, 0.17931580543518066, 0.02101755514740944, 0.14996182918548584, 0.06441380083560944, 0.14116224646568298, 0.04467625916004181, 0.18324455618858337, 0.03621460497379303, 0.31347689032554626, 0.07156593352556229, 0.14697283506393433, 0.08897958695888519));
	r += mul(s3_4, min16float4x4(-0.08000921458005905, -0.14526350796222687, 0.07163028419017792, -0.06469900161027908, 0.006369553040713072, 0.10288676619529724, 0.06010374426841736, 0.031845372170209885, -0.011327733285725117, 0.12768980860710144, -0.10821202397346497, 0.14188948273658752, -0.4697262942790985, -0.2355540692806244, 0.06312128156423569, -0.35741350054740906));
	r += mul(s3_5, min16float4x4(0.04333946481347084, 0.04864620044827461, 0.06076306477189064, 0.09750912338495255, 0.006501462776213884, 0.05815126374363899, -0.13075076043605804, 0.006098145619034767, -0.07314689457416534, -0.10675443708896637, -0.1713866889476776, -0.22125637531280518, -0.07202131301164627, -0.12647847831249237, 0.0632350966334343, -0.11746309697628021));
	r += mul(s3_6, min16float4x4(-0.005611349828541279, -0.0019298846600577235, -0.05999850854277611, 0.0014344120863825083, -0.10487692058086395, -0.06393787264823914, -0.1670379787683487, -0.08334866166114807, 0.04022171348333359, 0.013078870251774788, 0.0681348666548729, 0.026451220735907555, 0.07953663915395737, 0.022219816222786903, 0.2558577060699463, 0.03942859172821045));
	r += mul(s3_7, min16float4x4(0.006276440341025591, -0.00407782755792141, 0.020786074921488762, -0.08959569036960602, -0.019023587927222252, -0.09106467664241791, -0.05476686730980873, -0.11119630187749863, 0.025529984384775162, 0.04152645170688629, 0.028002934530377388, 0.02430753782391548, 0.1332998424768448, 0.1372070163488388, -0.18213284015655518, 0.24172788858413696));
	r += mul(s3_8, min16float4x4(0.022256214171648026, 0.021177055314183235, 0.022764351218938828, 0.059304188936948776, -0.0052716792561113834, 0.02322213724255562, 0.03559016063809395, -0.027613455429673195, -0.003242980455979705, 0.017743611708283424, 0.026921767741441727, 0.03433199226856232, 0.03453293442726135, 0.018507735803723335, -0.08814410865306854, -0.0771065503358841));
	r += float4(-0.0006086667999625206, -0.00042656066943891346, 0.00011369075946277007, 0.00030516114202328026);
	return tanh(r);
}
void Pass4(uint2 blockStart, uint3 tid) {
	float2 pt = float2(GetInputPt());
	uint2 gxy = Rmp8x8(tid.x) + blockStart;
	uint2 size = GetInputSize();
	if (gxy.x >= size.x || gxy.y >= size.y) {
		return;
	}
	float2 pos = (gxy + 0.5) * pt;
	min16float4 s0_0 = l0(-1.0, -1.0);
	min16float4 s0_1 = l0(0.0, -1.0);
	min16float4 s0_2 = l0(1.0, -1.0);
	min16float4 s0_3 = l0(-1.0, 0.0);
	min16float4 s0_4 = l0(0.0, 0.0);
	min16float4 s0_5 = l0(1.0, 0.0);
	min16float4 s0_6 = l0(-1.0, 1.0);
	min16float4 s0_7 = l0(0.0, 1.0);
	min16float4 s0_8 = l0(1.0, 1.0);
	min16float4 s1_0 = max(-s0_0, 0.0);
	min16float4 s1_1 = max(-s0_1, 0.0);
	min16float4 s1_2 = max(-s0_2, 0.0);
	min16float4 s1_3 = max(-s0_3, 0.0);
	min16float4 s1_4 = max(-s0_4, 0.0);
	min16float4 s1_5 = max(-s0_5, 0.0);
	min16float4 s1_6 = max(-s0_6, 0.0);
	min16float4 s1_7 = max(-s0_7, 0.0);
	min16float4 s1_8 = max(-s0_8, 0.0);
	s0_0 = max(s0_0, 0.0);
	s0_1 = max(s0_1, 0.0);
	s0_2 = max(s0_2, 0.0);
	s0_3 = max(s0_3, 0.0);
	s0_4 = max(s0_4, 0.0);
	s0_5 = max(s0_5, 0.0);
	s0_6 = max(s0_6, 0.0);
	s0_7 = max(s0_7, 0.0);
	s0_8 = max(s0_8, 0.0);
	min16float4 s2_0 = l1(-1.0, -1.0);
	min16float4 s2_1 = l1(0.0, -1.0);
	min16float4 s2_2 = l1(1.0, -1.0);
	min16float4 s2_3 = l1(-1.0, 0.0);
	min16float4 s2_4 = l1(0.0, 0.0);
	min16float4 s2_5 = l1(1.0, 0.0);
	min16float4 s2_6 = l1(-1.0, 1.0);
	min16float4 s2_7 = l1(0.0, 1.0);
	min16float4 s2_8 = l1(1.0, 1.0);
	min16float4 s3_0 = max(-s2_0, 0.0);
	min16float4 s3_1 = max(-s2_1, 0.0);
	min16float4 s3_2 = max(-s2_2, 0.0);
	min16float4 s3_3 = max(-s2_3, 0.0);
	min16float4 s3_4 = max(-s2_4, 0.0);
	min16float4 s3_5 = max(-s2_5, 0.0);
	min16float4 s3_6 = max(-s2_6, 0.0);
	min16float4 s3_7 = max(-s2_7, 0.0);
	min16float4 s3_8 = max(-s2_8, 0.0);
	s2_0 = max(s2_0, 0.0);
	s2_1 = max(s2_1, 0.0);
	s2_2 = max(s2_2, 0.0);
	s2_3 = max(s2_3, 0.0);
	s2_4 = max(s2_4, 0.0);
	s2_5 = max(s2_5, 0.0);
	s2_6 = max(s2_6, 0.0);
	s2_7 = max(s2_7, 0.0);
	s2_8 = max(s2_8, 0.0);
	down[gxy] = f0(pt, pos, s0_0, s0_1, s0_2, s0_3, s0_4, s0_5, s0_6, s0_7, s0_8, s1_0, s1_1, s1_2, s1_3, s1_4, s1_5, s1_6, s1_7, s1_8, s2_0, s2_1, s2_2, s2_3, s2_4, s2_5, s2_6, s2_7, s2_8, s3_0, s3_1, s3_2, s3_3, s3_4, s3_5, s3_6, s3_7, s3_8);
}
//!PASS 5
//!DESC CuNNy-2x8C-BILINEAR-NVL-SH-shuffle
//!STYLE PS
//!IN down, INPUT
float4 Pass5(float2 pos) {
	float2 pt = float2(GetInputPt());
	const static float3x3 rgb2yuv = {0.299, 0.587, 0.114, -0.169, -0.331, 0.5, 0.5, -0.419, -0.081};
	const static float3x3 yuv2rgb = {1, -0.00093, 1.401687, 1, -0.3437, -0.71417, 1, 1.77216, 0.00099};
	float4 r = 0.0;
	float2 size = float2(GetInputSize());
	float2 f = frac(pos * size);
	float3 yuv = mul(rgb2yuv, INPUT.SampleLevel(SL, pos, 0).rgb);
	int2 i = int2(f * 2.0);
	r.r = down.SampleLevel(SP, (float2(0.5, 0.5) - f) * pt + pos, 0)[2*i.y + i.x];
	r.r += yuv.r;
	r.a = 1.0;
	r.r = clamp(r, 0.0, 1.0);
	float3 px = mul(yuv2rgb, float3(r.r, yuv.yz));
	return float4(px, 1.0);
}
